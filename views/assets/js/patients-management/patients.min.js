moment.locale("es"),Vue.use(VueTelInputVuetify,{vuetify:vuetify}),Vue.component("line-chart",{extends:VueChartJs.Bar,mixins:VueChartJs.mixins.reactiveProp,props:["chartdata","options"],mounted(){this.renderChart(this.chartdata,{responsive:!0,maintainAspectRatio:!0})}});let vm=new Vue({vuetify:vuetify,el:"#siac-suite-container",data:{barAlert:!1,tab:null,view_tab:null,view_comparison_tab:null,view_dialog:!1,view_comparison_dialog:!1,appointment_dialog:!1,ph_cd_heart_failure_dx_year_modal:!1,ph_cd_ischemic_cardiopathy_sca_year_modal:!1,ph_cd_ischemic_cardiopathy_sca_im_year_modal:!1,ph_cd_ischemic_cardiopathy_sca_ua_year_modal:!1,ph_cd_ischemic_cardiopathy_scai_ua_year_modal:!1,ph_cd_ischemic_cardiopathy_surgery_year_modal:!1,ph_cd_ischemic_cardiopathy_percutaneous_year_modal:!1,ph_polipildora_date_modal:!1,smoking_start_year_modal:!1,smoking_quit_year_modal:!1,cv_disease_year_modal:!1,arritmia_year_modal:!1,recipe_reports_dialog:!1,historic_records_dialog:!1,dialog:!1,dialogDelete:!1,finishOptionsDialog:!1,FollowUpAppointmentsDialog:!1,viewPatientsComparisonDialog:!1,viewPatientsAverageComparisonDialog:!1,viewPatientsStatisticsDialog:!1,ComparisonPatientsDialog:!1,general_save:!1,upload_button:!1,image_loading:!1,previewImage:"",barTimeout:1e3,barMessage:"",barType:"",empty_message:"No hay datos disponibles",birthdate_modal:"",entry_date_modal:"",birthdate_dialog:"",entry_date_dialog:"",appointment_date_dialog:"",appointment_time_dialog:"",exam_date_dialog:"",exam_file_date_dialog:"",menu:"",patients_search:"",template_search:"",ref_index:0,templates:[],filtered_templates:[],templates_loading:!1,appointment_calendar:new AppointmentCalendar,comparison:{active:0,external_loading:!1,type_selected:1,types:[{text:"Pacientes de la misma unidad",value:1}],patients:[],external_patients:[],patients_filtered:[],external_patients_filtered:[],patient_selected:{},patient_to_compare:{},appointments:{loading:!1,current_patient:{},patient_to_compare:{}},history:{loading:!1,average_loading:!1,patients:[],external_patients:[],patients_filtered:[],external_patients_filtered:[],current_patient:{},patient_to_compare:{}},anthropometry:{loading:!1,average_loading:!1,patients:[],external_patients:[],patients_filtered:[],external_patients_filtered:[],current_patient:{},patient_to_compare:{}},physical_exams:{loading:!1,average_loading:!1,patients:[],external_patients:[],patients_filtered:[],external_patients_filtered:[],current_patient:{},patient_to_compare:{}},electro_cardiogram:{loading:!1,average_loading:!1,patients:[],external_patients:[],patients_filtered:[],external_patients_filtered:[],current_patient:{},patient_to_compare:{}},echocardiogram:{loading:!1,average_loading:!1,patients:[],external_patients:[],patients_filtered:[],external_patients_filtered:[],current_patient:{},patient_to_compare:{}},laboratory_exams:{loading:!1,average_loading:!1,patients:[],external_patients:[],patients_filtered:[],external_patients_filtered:[],examsListed:!1,selectedExam:{},current_patient:[],patient_to_compare:[]},diagnostics:{loading:!1,rf_loading:!1,average_loading:!1,patients:[],external_patients:[],patients_filtered:[],external_patients_filtered:[],items:{current_patient:[],patient_to_compare:[]},risk_factors:{current_patient:[],patient_to_compare:[]}},vital_signs:{loading:!1,average_loading:!1,patients:[],external_patients:[],patients_filtered:[],external_patients_filtered:[],current_patient:{},patient_to_compare:{}}},statistics:{male:{age_average:0,total_patients:0},female:{age_average:0,total_patients:0},anthropometry:{loading:!1,items:[],weight:0,height:0,abdominal_waist:0,cs:0,bmi:0},life_style:{loading:!1,items:[],smoking:{active:0,inactive:0},alcohol_consumption:{active:0,inactive:0},sedentary:{active:0,inactive:0},exercises:{aerobics:0,resistance:0,time_weekly_avg:0}},diseases:{loading:!1,histories:[],hta:{controlled:0,no_controlled:0},dmt2:{controlled:0,no_controlled:0},dyslipidemia:{controlled:0,no_controlled:0},obesity:{total:120},smoking:0},laboratory_exam:{loading:!1,items:[{name:"Colesterol Total",nomenclature:"mg/dL",items:0,total:0},{name:"Triglicerídos",nomenclature:"mg/dL",items:0,total:0},{name:"Colesterol HDL",nomenclature:"mg/dL",items:0,total:0},{name:"Colesterol No HDL",nomenclature:"mg/dL",items:0,total:0},{name:"Glicemia en ayunas",nomenclature:"mg/dL",items:0,total:0},{name:"Glicemia postprandial",nomenclature:"mg/dL",items:0,total:0}]},chart:{loading:!1,monthly_data:{current_year:moment().format("YYYY"),months:["01","02","03","04","05","06","07","08","09","10","11","12"],labels:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],datasets:[{label:"Total",backgroundColor:vuetify.preset.theme.themes.light.secondary,data:[]},{label:"Mujeres",backgroundColor:"#e91e63",data:[]},{label:"Hombres",backgroundColor:vuetify.preset.theme.themes.light.primary,data:[]}]},weekly_data:{current_day:moment().format("YYYY-MM-DD"),labels:[],datasets:[{label:"Total",backgroundColor:vuetify.preset.theme.themes.light.secondary,data:[]},{label:"Mujeres",backgroundColor:"#e91e63",data:[]},{label:"Hombres",backgroundColor:vuetify.preset.theme.themes.light.primary,data:[]}]}}},patients:[],headers:[{text:"N° de historia",align:"start",value:"patient_id",width:"auto"},{text:"Nombre y Apellido",value:"full_name",width:"auto"},{text:"Teléfono",value:"telephone",width:"auto"},{text:"Email",value:"email",width:"auto"},{text:"Dirección",value:"address",width:"auto"},{text:"Acciones",value:"actions",align:"center",sortable:!1}],views:{patient_appointments:{headers:[{text:"Fecha de la cita",align:"start",value:"appointment_date"},{text:"Hora de la cita",value:"appointment_time"},{text:"Doctor",value:"full_name"},{text:"Tipo de cita",value:"appointment_type"},{text:"Motivo de la cita",value:"appointment_reason"}]},patient_anthropometry:{headers:[{text:"Fecha",align:"start",value:"created_at"},{text:"Peso",value:"weight"},{text:"Talla",value:"height"},{text:"Cintura Abdominal",value:"abdominal_waist"},{text:"Índice Masa Corporal",value:"bmi"},{text:"Superficie Corporal",value:"corporal_surface"}]},patient_laboratory_exams:{exam_headers:[{text:"Fecha del examen",align:"start",value:"exam_date",width:"auto"},{text:"Resultado",value:"results",width:"auto"}],exam_file_headers:[{text:"Fecha",align:"start",value:"exam_date",width:"auto"},{text:"Archivo",align:"center",value:"file_result",width:"auto"}]}},patient_appointments:{finish_loading:!1,dialog:!1,outside_dialog:!1,dialogDelete:!1,date_modal:!1,time_modal:!1,select:!1,current_appointment:{},previous_appointment:{},types:[{text:"Primera vez"},{text:"Consulta de chequeo"}],doctors:[],headers:[{text:"Fecha de la cita",align:"start",value:"appointment_date"},{text:"Hora de la cita",value:"appointment_time"},{text:"Doctor",value:"full_name"},{text:"Tipo de cita",value:"appointment_type"},{text:"Motivo de la cita",value:"appointment_reason"},{text:"Acciones",value:"actions",align:"center",sortable:!1}],appointments:[],editedItem:{},defaultItem:{appointment_date:"",appointment_reason:"",appointment_time:"",appointment_type:""},editedIndex:-1},recipes:{dialog:!1,dialogDelete:!1,date_modal:!1,next_date_modal:!1,select:!1,headers:[{text:"Fecha de creación",align:"start",value:"registered_at"},{text:"Fecha de consulta",align:"start",value:"appointment_date"},{text:"Próxima cita",align:"start",value:"next_appointment"},{text:"Acciones",value:"actions",align:"center",sortable:!1}],diagnostic_headers:[{text:"Diagnóstico",align:"center",value:"diagnostic"},{text:"Metas de Tratamiento",align:"center",value:"treatment_goal"},{text:"",align:"start",value:"action"}],instruction_headers:[{text:"Tratamiento",align:"center",value:"treatment"},{text:"Dosis",align:"center",value:"dosis"},{text:"Horario",align:"center",value:"schedule"},{text:"Observaciones",align:"center",value:"observations"},{text:"",align:"start",value:"action"}],items:[],editedItem:{},defaultItem:{appointment_date:"",diagnostics:[],instructions:[],next_appointment:""},editedIndex:-1},reports:{dialog:!1,dialogDelete:!1,date_modal:!1,next_date_modal:!1,headers:[{text:"Fecha de creación",align:"start",value:"registered_at"},{text:"Fecha de consulta",align:"start",value:"appointment_date"},{text:"Acciones",value:"actions",align:"center",sortable:!1}],treatments:[{text:"Tratamiento",align:"center",value:"treatment"},{text:"Dosis",align:"center",value:"dosis"},{text:"Intervalo",align:"center",value:"interval"},{text:"",align:"start",value:"action"}],items:[],editedItem:{appointment_date:"",next_appointment:"",ecg:"",meta:{diagnostics:[],plan:{},treatments:[],anthropometry:{active:"1",item:{}},physical_exam:{active:"0"},echocardiogram:{active:"0",item:""},electro_cardiogram:{active:"0",item:{}},laboratory_exam:{active:"0",items:[]},vital_signs:{active:"1",items:{}}}},defaultItem:{appointment_date:"",next_appointment:"",ecg:"",meta:{diagnostics:[],plan:{},treatments:[],anthropometry:{active:"1",item:{}},physical_exam:{active:"0"},echocardiogram:{active:"0",item:""},electro_cardiogram:{active:"0",item:{}},laboratory_exam:{active:"0",items:[]},vital_signs:{active:"1",items:{}}}},editedIndex:-1},patient_anthropometry:{editedItem:{weight:"0",weight_suffix:"kg",height:"0",height_suffix:"cm",abdominal_waist:"0",abdominal_waist_suffix:"cm"},defaultItem:{weight:"0",weight_suffix:"kg",height:"0",height_suffix:"cm",abdominal_waist:"0",abdominal_waist_suffix:"cm"},editedIndex:-1,history:[]},patient_laboratory_exams:{add_file_loading:!1,laboratory_exam:!1,dialog:!1,dialogDelete:!1,dialogFileDelete:!1,modal:!1,file_modal:!1,formulas:{cholesterol_ldl:{form_valid:!1,rules:{required:[e=>!!e||"Este campo es requerido"]},vars:{total_cholesterol:0,c_HDL:0,triglyceride_level:0},results:0},cholesterol_no_hdl:{vars:{total_cholesterol:0,c_HDL:0},results:0},egfr_mdr_ckdepi:{vars:{race:1,serum_creatinine:0,metodology:"CKD-EPI"},results:0},filt_glom:{vars:{race:1,serum_creatinine:0},results:0}},headers:[{text:"Laboratorio",align:"start",value:"name",width:"auto"},{text:"Acción",value:"action",width:"auto"}],table_options:{disablePagination:!0,itemsPerPage:15,hideDefaultFooter:!0},exam_headers:[{text:"Fecha del examen",align:"start",value:"exam_date",width:"auto"},{text:"Resultado",value:"results",width:"auto"},{text:"Acción",value:"action",width:"auto"}],exam_files_headers:[{text:"Fecha",align:"start",value:"exam_date",width:"auto"},{text:"Archivo",value:"file_result",width:"auto"},{text:"Acción",value:"action",width:"auto"}],exam_files:[],exam_results:[],exams:[],editedItem:{exam_date:moment().format("YYYY-MM-DD"),results:""},editedFileItem:{exam_date:moment().format("YYYY-MM-DD")},defaultItem:{exam_date:moment().format("YYYY-MM-DD")},selectedExam:{},editedIndex:-1,editedFileIndex:-1},patient_vital_signs:{show_results:!1,temperature:35,sat:75,defaultItem:[{frc:30,breathing_rate:10,pa_left_arm1_average:"",pa_left_arm2_average:"",pa_right_arm1_average:"",pa_right_arm2_average:"",0:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""},1:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""},2:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""}},{frc:30,breathing_rate:10,pa_left_arm1_average:"",pa_left_arm2_average:"",pa_right_arm1_average:"",pa_right_arm2_average:"",0:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""},1:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""},2:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""}},{frc:30,breathing_rate:10,pa_left_arm1_average:"",pa_left_arm2_average:"",pa_right_arm1_average:"",pa_right_arm2_average:"",0:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""},1:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""},2:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""}}],takes:[{frc:30,breathing_rate:10,pa_left_arm1_average:"",pa_left_arm2_average:"",pa_right_arm1_average:"",pa_right_arm2_average:"",0:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""},1:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""},2:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""}},{frc:30,breathing_rate:10,pa_left_arm1_average:"",pa_left_arm2_average:"",pa_right_arm1_average:"",pa_right_arm2_average:"",0:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""},1:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""},2:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""}},{frc:30,breathing_rate:10,pa_left_arm1_average:"",pa_left_arm2_average:"",pa_right_arm1_average:"",pa_right_arm2_average:"",0:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""},1:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""},2:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""}}],headers:[{text:"Fecha",align:"center",value:"created_at",width:"auto"},{text:"",align:"center",value:"heart_frecuency",width:"auto"},{text:"Frecuencia Cardiaca",align:"center",value:"frc",width:"auto"},{text:"Presión Arterial del Brazo Derecho",align:"center",value:"pa_right",width:"auto"},{text:"Presión Arterial del Brazo Izquierdo",align:"center",value:"pa_left",width:"auto"},{text:"Frecuencia respiratoria",align:"center",value:"breathing_rate",width:"auto"},{text:"Temperatura (°C)",align:"center",value:"temperature",width:"auto"},{text:"SAT (%)",align:"center",value:"sat",width:"auto"}],headers_result:[{text:" ",align:"center",value:"heart_frecuency",width:"auto"},{text:"Frecuencia cardíaca",align:"center",value:"frc",width:"auto"},{text:"Presión Arterial del Brazo Derecho",align:"center",value:"pa_right",width:"auto"},{text:"Presión Arterial del Brazo Izquierdo",align:"center",value:"pa_left",width:"auto"},{text:"Frecuencia respiratoria",align:"center",value:"breathing_rate",width:"auto"},{text:"Temperatura (°C)",align:"center",value:"temperature",width:"auto"},{text:"SAT O (%)",align:"center",value:"sat",width:"auto"}],results:[],records:[]},patient_echocardiogram:{loading:!1,content:"",item:[],defaultItem:""},patient_physical_exam:{loading:!1,options:{general_aspect:["Bueno","Regular","Mal"],soplo:["Sistólico","Diastólico","Continuo"],select:[{text:"Sí",value:1},{text:"No",value:0}]},items:[],content:{general_aspect:"",apex:{is_palpated:1,displaced:0,characteristic:"Normokinético"},pvy:{morphology_breastx:1,cvy:1,swivel_stop:1,other:""},carotid_beats:{symmetrical:1,homochroto:1,normal_amplitude:1},auscultation:{rhythmic_heart_sounds:1,regular:1,unfolded_r1:1,r1_type:"",unfolded_r2:1,r2_type:"",unfolded_r3:1,unfolded_r4:1,gallop_rhythm:0,soplo:{active:1,foco_options:["Aórtico","Mitral","Tricuspideo","Pulmonar"],items:[{type:"",foco:"",intensity_foco:""}]}},peripheral_pulses:{symmetrical:1,symmetrical_range:1,mid:"",mii:""},edema:{active:0,range:""},aai:{range:0}},defaultItem:{general_aspect:"",pvy:{morphology_breastx:1,cvy:1,swivel_stop:1,other:""},apex:{is_palpated:1,displaced:0,characteristic:"Normokinético"},carotid_beats:{symmetrical:1,homochroto:1,normal_amplitude:1},auscultation:{rhythmic_heart_sounds:1,regular:1,unfolded_r1:1,unfolded_r2:1,unfolded_r3:1,unfolded_r4:1,gallop_rhythm:0,soplo:{active:1,foco_options:["Aórtico","Mitral","Tricuspideo","Pulmonar"],items:[{type:"",foco:"",intensity_foco:""}]}},peripheral_pulses:{symmetrical:1,symmetrical_range:1,mid:"",mii:""},edema:{active:0,range:""},aai:{range:0}}},patient_life_style:{loading:!1,exercise_start_date_modal:!1,headers:[{text:"Fecha",align:"center",value:"created_at",width:"auto"},{text:"Sedentario",align:"center",value:"sedentary",width:"auto"},{text:"Ejercicio",align:"center",value:"exercise",width:"auto"},{text:"Consumo de alcohol",align:"center",value:"alcohol_consumption",width:"auto"},{text:"Fumador",align:"center",value:"smoking",width:"auto"}],calc:{fagerstrom:{form_dialog:0,vars:{input1:0,input2:0,input3:0,input4:0,input5:0,input6:0},options:{input1:[{text:"Hasta 5 minutos",value:3},{text:"De 6 a 30 minutos",value:2},{text:"De 31 a 60 minutos",value:1},{text:"Más de 60 minutos",value:0}],input3:[{text:"El primero de la mañana",value:1},{text:"Cualquier otro",value:0}],input4:[{text:"31 o más cigarrillos",value:3},{text:"Entre 21 y 30 cigarrillos/día",value:2},{text:"Entre 11 y 20 cigarrillos/día",value:1},{text:"Menos de 10 cigarrillos/día",value:0}]},result:0}},options:{select:[{text:"Sí",value:"1"},{text:"No",value:"0"}],smoking_select:[{text:"Sí",value:1},{text:"No",value:0}],exercises:{type:["Aeróbico","Resistencia"],aerobic:["Caminar","Correr","Trotar","Nadar","Bailar","Ciclismo","Yoga","Tenis"],resistance:["Pesas","Funcionales","Abdominales"]},alcohol_consumption:["1","2 a 3","Más de 4"]},items:[],editedItem:{sedentary:"1",sedentary_material:{material_name:""},physical_exercise:"0",exercise_weekly_minutes:30,exercise_activity_before:"0",exercise_start_date:"",exercise:{type:[],aerobic_exercises:[],resistance_exercises:[]},smoking:{active:"1",did_smoke:"0",start_year:"",quit_year:"",cigarettes_per_day:"",fagerstrom_test:"",no_smoking_frecuency:"0",last_time:"",how_many_times:"",smoking_wish:"0",short_advice:{done:0,material:{material_id:"",material_name:"",source:"",type:""}}},alcohol_consumption:"0",alcohol_daily_consumption:0},defaultItem:{sedentary:"1",sedentary_material:{material_name:""},physical_exercise:"0",exercise_weekly_minutes:30,exercise_activity_before:"0",exercise_start_date:"",exercise:{type:[],aerobic_exercises:[],resistance_exercises:[]},smoking:{active:"0",did_smoke:"0",start_year:"",quit_year:"",cigarettes_per_day:"",fagerstrom_test:"",no_smoking_frecuency:0,last_time:"",how_many_times:"",smoking_wish:0,short_advice:{done:0,material:{material_id:"",material_name:"",source:"",type:""}}},alcohol_consumption:"0",alcohol_daily_consumption:0}},patient_electro_cardiogram:{loading:!1,form_dialog:!1,valid:!1,qtc_edit_results_menu:!1,qtc_view_results_menu:!1,options:{rhythm:["Sinusal","No sinusal"],qtc_list:[{text:"RR",value:"rr"},{text:"QTc (Rautaharju)",value:"qtrau"},{text:"QTc (Bazett)",value:"qtbaz"},{text:"QTc (Framingham)",value:"qtfra"},{text:"QTc (Friderica)",value:"qtfri"},{text:"QTC (Call)",value:"qtcal"}]},rules:{frecuency:[e=>e&&e>=30&&e<=300||"Debe estar en un rango entre 30 y 300"],pr:[e=>e&&e>=90&&e<=240||"Debe estar en un rango entre 90 y 240"],qrs:[e=>e&&e>=60&&e<=200||"Debe estar en un rango entre 60 y 200"]},content:{rhythm:"Sinusal",arritmia_type:"",frecuency:30,pr:"",axes:{p:"",qrs:"",t:""},detail:"",qtc:"",qt:"",fc:"",rr:"",qtrau:"",qtbaz:"",qtfra:"",qtfri:"",qtcal:"",qtc_formula_selected:{text:"RR",value:"rr"},diagnostic:"No"},items:[],defaultItem:{rhythm:"Sinusal",arritmia_type:"",frecuency:30,pr:"",axes:{p:"",qrs:"",t:""},detail:"",qtc:"",qt:"",fc:"",rr:"",qtrau:"",qtbaz:"",qtfra:"",qtfri:"",qtcal:"",qtc_formula_selected:{text:"RR",value:"rr"},diagnostic:"No"}},patient_history:{loading:!1,modals:{ischemic_cardiopathy:{current:1}},options:{treatment_frecuency:[1,2,3,"+3"],ischemic_cardiopathy:{chronic_crown_syndrome:["","Angina inestable"],general_select:[1,2,3,"+ de 3"],functional_class_canada:[1,2,3,4]},arritmia:{type:["","FA","ESV","Otra"],anticoagulated_type:["Antagonistas Vitamina K","ACOD"],general_select:[" ",1,2,3,"+ de 3"],functional_class_canada:[1,2,3,4]},peripheral_artery_disease:{territory:["Miembros inferiores","Carotidea"]},electro_cardiogram:{rhythm:["Sinusal","No sinusal"]},family:["Padre","Madre","Hermano","Hermana"],diseases:["HTA","DMt2","Dislipidemia","Enfermedad arterial coronaria precoz (hombres < 55, mujeres < 65)","Muerte súbita","Hipercolesterolemia familiar homocigótica","ICTUS"]},select:[{text:"Sí",value:1},{text:"No",value:0}],interval_times:[{text:"Menos de un año",value:"Menos de un año"},{text:"Entre 1 y 2 años",value:"Entre 1 y 2 años"},{text:"3 a 4 años",value:"3 a 4 años"},{text:"4 a 5 años",value:"4 a 5 años"},{text:"Más de 5 años",value:"Más de 5 años"},{text:"Más de 10 años",value:"Más de 10 años"}],items:[],form:{history_content:{family_history:[],diseases:{hta:{active:0,controlled:0,detected_previously:1,diagnostic_date:""},dtm2:{active:0,controlled:0,detected_previously:1,diagnostic_date:""},pre_dtm2:{active:0,controlled:0,detected_previously:1,diagnostic_date:""},dyslipidemia:{active:0,controlled:0,detected_previously:1,diagnostic_date:"",treatment:""}},emergency_hta_history:0,emergency_diabetes_history:0,cardiovascular_diseases:{ischemic_cardiopathy:{active:0,revascularized:{active:0,surgery:{active:1,bridge:"",year:moment().format("YYYY-MM-DD")},percutaneous:{active:1,vessels:"",year:moment().format("YYYY-MM-DD"),stent:"",medicated:1}},functional_class_canada:"",sca:{active:0,year:moment().format("YYYY-MM-DD"),im:[{q:1,no_q:1,year:moment().format("YYYY-MM-DD"),localization:""}]},scai:{active:0,year:moment().format("YYYY-MM-DD")}},arritmia:{active:0,items:[{type:"",treatment:0,treatment_type:"",treatments:[""],dosis:"",daily_dosis:"",ablation:0,ablation_age:"",cdi_holder:0,cdi_age:""}]},heart_failure:{active:0,dx_age:moment().format("YYYY-MM-DD"),functional_class:"",treatment:{iecas:{active:0,treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},arni:{active:0},dioxin:{active:0},bra:{active:0,treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},diuretic:{active:0,treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},arn:{active:0},i_slgt2:{active:0,treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""}}},peripheral_artery_disease:{active:0,territory:""}},cronic_kidney_disease:{active:0,stadium:"",dialysis:0},cerebrovascular_disease:{active:0,items:[{year:moment().format("YYYY-MM-DD"),type:"Isquémico",ischemic_type:""}]},treatments:{antihypertensives:{treatments_list:{iecas:["Benazepril","Captopril","Cilazapril","Enalapril","Espirapril","Fosinopril","Lisinopril","Imidapril","Moexipril","Perindopril","Quinapril","Ramipril","Espirapril","Trandolapril","Zofenopril"],bra:["Candesartan","Eprosartan","Irbesartan","Losartan","Olmesartan medoxomilo","Telmisartan","Valsartan"],diuretic:[{header:"Tiazidas y similares"},{name:"Clorotiazida",group:"Group 1"},{name:"Clortalidona",group:"Group 1"},{name:"Hidroclorotiazida",group:"Group 1"},{name:"Metolazona",group:"Group 1"},{divider:!0},{header:"Asa"},{name:"Azetazolamida",group:"Group 2"},{name:"Bumetamida",group:"Group 2"},{name:"Furosemida",group:"Group 2"},{name:"Torsemida",group:"Group 2"},{divider:!0},{header:"Ahorradores de potasio"},{name:"Metolazona",group:"Group 3"},{name:"Espironolactona",group:"Group 3"},{name:"Triametereno",group:"Group 3"},{divider:!0},{header:"Otros"}],ca:["Amlodipina","Felodipina","Isradipina","Nicardipina","Nifedipina","Nifedipina OROS","Nimodipina","Nisoldipina","Lacidipina","Manidipina","Barnidipina","Lecardipina","Clevadipina","Verapamilo","Diltiazem"],ir:["Candesartan","Eprosartan","Irbesartan","Losartan","Olmesartan medoxomilo","Telmisartan","Valsartan"],block_beta:["Atenolol","Bisoprolol","Carvedilol","Metoprolol","Nebivolol","Torsemida"],arni:["Sacubitril / Valsartan"],fdc:[{header:"Calcioantagonistas y diuréticos"},{name:"Amlodipina + indapamida",group:"Group 1"},{name:"Amlodipina + hidroclorotiazida",group:"Group 1"},{divider:!0},{name:"IECAS + diuréticos"},{name:"IECAS + calcioantagonitas"},{name:"IECAS + betabloqueantes"},{name:"Betabloqueante + diurético"},{name:"Betabloqueante + calcioantagonista"},{name:"BRA + diurético + calcioantagonista "}],ant_mineralocorticoids:["Espironolactona","Esplerenona"]},secondary_effects:{iecas:["Tos","Edema","Angio neurótico"],bra:["Tos","Edema","Angio neurótico"],ca:["Cefalea","Edema"],diuretic:["Transtornos HE","Hiperglicemia","Bradicardia","Disfunción eréctil"],ir:["Tos","Edema","Angio neurótico"],block_beta:["Bradicardia","Disfunción eréctil","Broncoespasmo"],arni:[],ant_mineralocorticoids:[]},iecas:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},bra:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},ca:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},ir:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},diuretic:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},arni:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},ant_mineralocorticoids:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},fdc:{active:0,selected:[]},block_beta:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:"",has_secondary_effects:0,secondary_effects:""},block:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""}},antidiabetics:{treatments_list:{metformin:[],insulin:["Rápida (regular)","Intermedia: NPH"],a_insulin:["Aspart","Degludec","Detemir","Glargina","Glulisina","Lispro","NPA","NPL"],insulin_mixtures:["Rápida + NPH","Aspart + NPA","Lispro – NPL"],metformin:[],sulfonylureas:["Glibenclamida (gliburida)","Glipizida","Gliclazida","Gliclazida retard","Glimepirida","Glisentida"],glinidas:["Repaglinida"],pioglitazona:[],inh_dpp:["Sitagliptina","Vildagliptina","Saxagliptina","Linagliptina","Alogliptina"],i_slgt2:["Dapaglifozina","Canaglifozina","Empaglifozina"],gl:["Exenatide","Exenatide LAR","Lixisenatide","Liraglutide","Dulaglutide"],fdc:[{name:"Metformina + Sulfonilúreas"},{name:"Metformina + I DPP-4"}]},secondary_effects:{metformin:["Trastornos digestivos"],insulin:[],a_insulin:["Hipoglicemia"],sulfonylureas:["Hipoglicemia"],glinidas:["Hipoglicemia"],pioglitazona:[],inh_dpp:[],i_slgt2:[],gl:[]},metformin:{active:0,treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},insulin:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},a_insulin:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},insulin_mixtures:{selected:[]},sulfonylureas:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},glinidas:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},pioglitazona:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},inh_dpp:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},i_slgt2:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},gl:{treatment:"",frecuency:"",dosis:"",has_secondary_effects:0,secondary_effects:""},fdc:{active:0,selected:[]}},antithrombotics:{treatments_list:{antiplatelet_agents:["Aspirina","Clopidogrel","Prasugrel","Ticagrelor"],oral_anticoagulants:["Apixaban","Dabigatran","Rivaroxaban","Warfarina"]},secondary_effects:{antiplatelet_agents:["Alergias","Hemorragias digestivas","Hematomas"]},antiplatelet_agents:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},oral_anticoagulants:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""}},hypolipidemic:{treatments_list:{statins:["Atorvastatina","Lovastatina","Simvastatina","Pitavastatina","Pravastatina","Rosuvastatina "],ezt:[],fibratos:["Gembribrozil","Bezafibrato","Fenofibrato"],omega3:["EPA","EPA-DHA"],ipcsk9:[]},secondary_effects:{statins:["Dolores musculares"],ezt:["Dolores musculares"],fibratos:["Dolores musculares"],omega3:[],ipcsk9:[]},statins:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},ezt:{active:0,treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},fibratos:{active:0,treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},omega3:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},ipcsk9:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""}},polipildora:{treatments_list:{polipildora:[{name:"AAS/Atorvastatina/Ramipril",dosis_selected:"",dosis:["100/20/2.5mg","100/20/5mg","100/20/10mg"]},{name:"Amlodipino/Atorvastatina",dosis_selected:"",dosis:["2.5/20mg","2.5/40mg","5/10mg","5/20mg","5/40mg","10/10mg","10/20mg"]},{name:"Bisoprolol, Candesartan, Hidroclorotiazyd, Rosuvastatin, AAS",dosis_selected:"",dosis:["2.5mg/8mg/6.25mg/10mg/81mg"]}],polipildora_reason:["Controlar los factores de riesgo","Evitar eventos recurrentes","Disminuir polimedicación","Mejorar adherencia"]},active:0,reason:[],selected:[]}}}},defaultItem:{family_history:[],diseases:{hta:{active:0,controlled:0,detected_previously:1,diagnostic_date:""},dtm2:{active:0,controlled:0,detected_previously:1,diagnostic_date:""},pre_dtm2:{active:0,controlled:0,detected_previously:1,diagnostic_date:""},dyslipidemia:{active:0,controlled:0,detected_previously:1,diagnostic_date:"",treatment:""}},emergency_hta_history:0,emergency_diabetes_history:0,cardiovascular_diseases:{ischemic_cardiopathy:{active:0,revascularized:{active:0,surgery:{active:1,bridge:"",year:moment().format("YYYY-MM-DD")},percutaneous:{active:1,vessels:"",year:moment().format("YYYY-MM-DD"),stent:"",medicated:1}},functional_class_canada:"",sca:{active:0,year:moment().format("YYYY-MM-DD"),revascularized:1,surgery:1,bridge:"",percutaneous:1,stent:1,type:"",medicated:1,im:[{q:1,no_q:1,year:moment().format("YYYY-MM-DD"),localization:""}]},scai:{active:0,year:moment().format("YYYY-MM-DD")}},arritmia:{active:0,items:[{type:"",treatment:0,treatment_type:"",treatments:[""],dosis:"",daily_dosis:"",ablation:0,ablation_age:"",cdi_holder:0,cdi_age:""}]},heart_failure:{active:0,dx_age:moment().format("YYYY-MM-DD"),functional_class:"",treatment:{iecas:{active:0,treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},arni:{active:0},dioxin:{active:0},bra:{active:0,treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},diuretic:{active:0,treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},arn:{active:0},i_slgt2:{active:0,treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""}}},peripheral_artery_disease:{active:0,territory:""}},cronic_kidney_disease:{active:0,stadium:"",dialysis:0},cerebrovascular_disease:{active:0,items:[{year:moment().format("YYYY-MM-DD"),type:"Isquémico",ischemic_type:""}]},treatments:{antihypertensives:{treatments_list:{iecas:["Benazepril","Captopril","Cilazapril","Enalapril","Espirapril","Fosinopril","Lisinopril","Imidapril","Moexipril","Perindopril","Quinapril","Ramipril","Espirapril","Trandolapril","Zofenopril"],bra:["Candesartan","Eprosartan","Irbesartan","Losartan","Olmesartan medoxomilo","Telmisartan","Valsartan"],diuretic:[{header:"Tiazidas y similares"},{name:"Clorotiazida",group:"Group 1"},{name:"Clortalidona",group:"Group 1"},{name:"Hidroclorotiazida",group:"Group 1"},{name:"Metolazona",group:"Group 1"},{divider:!0},{header:"Asa"},{name:"Azetazolamida",group:"Group 2"},{name:"Bumetamida",group:"Group 2"},{name:"Furosemida",group:"Group 2"},{name:"Torsemida",group:"Group 2"},{divider:!0},{header:"Ahorradores de potasio"},{name:"Metolazona",group:"Group 3"},{name:"Espironolactona",group:"Group 3"},{name:"Triametereno",group:"Group 3"},{divider:!0},{header:"Otros"}],ca:["Amlodipina","Felodipina","Isradipina","Nicardipina","Nifedipina","Nifedipina OROS","Nimodipina","Nisoldipina","Lacidipina","Manidipina","Barnidipina","Lecardipina","Clevadipina","Verapamilo","Diltiazem"],ir:["Candesartan","Eprosartan","Irbesartan","Losartan","Olmesartan medoxomilo","Telmisartan","Valsartan"],
block_beta:["Atenolol","Bisoprolol","Carvedilol","Metoprolol","Nebivolol","Torsemida"],arni:["Sacubitril / Valsartan"],fdc:[{header:"Calcioantagonistas y diuréticos"},{name:"Amlodipina + indapamida",group:"Group 1"},{name:"Amlodipina + hidroclorotiazida",group:"Group 1"},{divider:!0},{name:"IECAS + diuréticos"},{name:"IECAS + calcioantagonitas"},{name:"IECAS + betabloqueantes"},{name:"Betabloqueante + diurético"},{name:"Betabloqueante + calcioantagonista"},{name:"BRA + diurético + calcioantagonista "}],ant_mineralocorticoids:["Espironolactona","Esplerenona"]},secondary_effects:{iecas:["Tos","Edema","Angio neurótico"],bra:["Tos","Edema","Angio neurótico"],ca:["Cefalea","Edema"],diuretic:["Transtornos HE","Hiperglicemia","Bradicardia","Disfunción eréctil"],ir:["Tos","Edema","Angio neurótico"],block_beta:["Bradicardia","Disfunción eréctil","Broncoespasmo"],arni:[],ant_mineralocorticoids:[]},iecas:{treatment:"",frecuency:"",dosis:"",has_secondary_effects:0,secondary_effects:""},bra:{treatment:"",frecuency:"",dosis:"",has_secondary_effects:0,secondary_effects:""},ca:{treatment:"",frecuency:"",dosis:"",has_secondary_effects:0,secondary_effects:""},ir:{treatment:"",frecuency:"",dosis:"",has_secondary_effects:0,secondary_effects:""},diuretic:{treatment:"",frecuency:"",dosis:"",has_secondary_effects:0,secondary_effects:""},arni:{treatment:"",frecuency:"",dosis:"",has_secondary_effects:0,secondary_effects:""},ant_mineralocorticoids:{treatment:"",frecuency:"",dosis:"",has_secondary_effects:0,secondary_effects:""},fdc:{active:0,selected:[]},block_beta:{treatment:"",frecuency:"",dosis:"",has_secondary_effects:0,secondary_effects:"",has_secondary_effects:0,secondary_effects:""},block:{treatment:"",frecuency:"",dosis:"",has_secondary_effects:0,secondary_effects:""}},antidiabetics:{treatments_list:{metformin:[],insulin:["Rápida (regular)","Intermedia: NPH"],a_insulin:["Aspart","Degludec","Detemir","Glargina","Glulisina","Lispro","NPA","NPL"],insulin_mixtures:["Rápida + NPH","Aspart + NPA","Lispro – NPL"],metformin:[],sulfonylureas:["Glibenclamida (gliburida)","Glipizida","Gliclazida","Gliclazida retard","Glimepirida","Glisentida"],glinidas:["Repaglinida"],pioglitazona:[],inh_dpp:["Sitagliptina","Vildagliptina","Saxagliptina","Linagliptina","Alogliptina"],i_slgt2:["Dapaglifozina","Canaglifozina","Empaglifozina"],gl:["Exenatide","Exenatide LAR","Lixisenatide","Liraglutide","Dulaglutide"],fdc:[{name:"Metformina + Sulfonilúreas"},{name:"Metformina + I DPP-4"}]},secondary_effects:{metformin:["Trastornos digestivos"],insulin:[],a_insulin:["Hipoglicemia"],sulfonylureas:["Hipoglicemia"],glinidas:["Hipoglicemia"],pioglitazona:[],inh_dpp:[],i_slgt2:[],gl:[]},metformin:{active:0,treatment:"",frecuency:"",dosis:"",has_secondary_effects:0,secondary_effects:""},insulin:{treatment:"",frecuency:"",dosis:"",has_secondary_effects:0,secondary_effects:""},a_insulin:{treatment:"",frecuency:"",dosis:"",has_secondary_effects:0,secondary_effects:""},insulin_mixtures:{selected:[]},sulfonylureas:{treatment:"",frecuency:"",dosis:"",has_secondary_effects:0,secondary_effects:""},glinidas:{treatment:"",frecuency:"",dosis:"",has_secondary_effects:0,secondary_effects:""},pioglitazona:{treatment:"",frecuency:"",dosis:"",has_secondary_effects:0,secondary_effects:""},inh_dpp:{treatment:"",frecuency:"",dosis:"",has_secondary_effects:0,secondary_effects:""},i_slgt2:{treatment:"",frecuency:"",dosis:"",has_secondary_effects:0,secondary_effects:""},gl:{treatment:"",frecuency:"",dosis:"",has_secondary_effects:0,secondary_effects:""},fdc:{active:0,selected:[]}},antithrombotics:{treatments_list:{antiplatelet_agents:["Aspirina","Clopidogrel","Prasugrel","Ticagrelor"],oral_anticoagulants:["Apixaban","Dabigatran","Rivaroxaban","Warfarina"]},secondary_effects:{antiplatelet_agents:["Alergias","Hemorragias digestivas","Hematomas"]},antiplatelet_agents:{treatment:"",frecuency:"",dosis:"",has_secondary_effects:0,secondary_effects:""},oral_anticoagulants:{treatment:"",frecuency:"",dosis:"",has_secondary_effects:0,secondary_effects:""}},hypolipidemic:{treatments_list:{statins:["Atorvastatina","Lovastatina","Simvastatina","Pitavastatina","Pravastatina","Rosuvastatina "],ezt:[],fibratos:["Gembribrozil","Bezafibrato","Fenofibrato"],omega3:["EPA","EPA-DHA"],ipcsk9:[]},secondary_effects:{statins:["Dolores musculares"],ezt:["Dolores musculares"],fibratos:["Dolores musculares"],omega3:[],ipcsk9:[]},statins:{treatment:"",frecuency:"",dosis:"",has_secondary_effects:0,secondary_effects:""},ezt:{active:0,treatment:"",frecuency:"",dosis:"",has_secondary_effects:0,secondary_effects:""},fibratos:{active:0,treatment:"",frecuency:"",dosis:"",has_secondary_effects:0,secondary_effects:""},omega3:{treatment:"",frecuency:"",dosis:"",has_secondary_effects:0,secondary_effects:""},ipcsk9:{treatment:"",frecuency:"",dosis:"",has_secondary_effects:0,secondary_effects:""}},polipildora:{treatments_list:{polipildora:[{name:"AAS/Atorvastatina/Ramipril",dosis_selected:"",dosis:["100/20/2.5mg","100/20/5mg","100/20/10mg"]},{name:"Amlodipino/Atorvastatina",dosis_selected:"",dosis:["2.5/20mg","2.5/40mg","5/10mg","5/20mg","5/40mg","10/10mg","10/20mg"]},{name:"Bisoprolol, Candesartan, Hidroclorotiazyd, Rosuvastatin, AAS",dosis_selected:"",dosis:["2.5mg/8mg/6.25mg/10mg/81mg"]}],polipildora_reason:["Controlar los factores de riesgo","Evitar eventos recurrentes","Disminuir polimedicación","Mejorar adherencia"]},active:0,reason:[],selected:[]}}}},patient_risk_factors:{loading:!1,diagnostic_loading:!1,risk_factors_loaded:!1,selectedForm:{calc_name:"",obj:{results:""}},detail_table_rf_selected:{nomenclature:"",calc_name:"FINDRISK",obj:findrisk_vars},headers:[{text:" ",align:"start",value:"name"},{text:"Diagnóstico",value:"diagnostic"},{text:"Tratamiento",value:"comment"}],risk_factor_headers:[{text:"Fecha",align:"start",value:"created_at"},{text:"Fórmula de Cálculo de Riesgo",align:"start",value:"name"},{text:"Resultado",value:"results"}],rf:{appointment_id:"",treatment_dialog:!1,treatment_view_dialog:!1,treatment_selected:{name:""},risk_factors:[{name:"HTA",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Dislipidemia",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Sobrepeso",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Obesidad",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Pre DMt2",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"DMt2",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Arritmia",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Cardiopatía Isquémica",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Insuficiencia Cardíaca",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Tabaquismo",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""}]},risk_factors_diagnostics:[],form_risk_factors:[{nomenclature:"",calc_name:"FINDRISK",obj:findrisk_vars},{nomenclature:"",calc_name:"Riesgo OMS/OPS",obj:oms_ops_vars},{nomenclature:"",calc_name:"Inter Heart",obj:inter_heart_vars},{nomenclature:"%",calc_name:"Evaluación del riesgo cardiovascular (10 años, Framingham 2008)",obj:heart_risk_framingham_vars}],risk_factors_list:{current_list:[],previous_list:[],items:[]},risk_factors_calc_list:[],defaultItems:{risk_factors:{appointment_id:"",treatment_dialog:!1,treatment_selected:{name:""},risk_factors:[{name:"HTA",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Dislipidemia",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Sobrepeso",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Obesidad",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Pre DMt2",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"DMt2",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Arritmia",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Cardiopatía Isquémica",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Insuficiencia Cardíaca",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Tabaquismo",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""}]}}},patient_plan:{loading:!1,treatment_edit_dialog:!1,treatment_view_dialog:!1,save_loading:!1,alreadySaved:!1,items:[],select:[{text:"Sí",value:"1"},{text:"No",value:"0"}],headers:[{text:"Fecha",value:"created_at"},{text:"Nutrición",align:"start",value:"nutrition"},{text:"Plan de ejercicio",value:"exercise_plan"},{text:"Exámenes paraclínicos",value:"clinics_exams"},{text:"Materiales",value:"materials"}],editedItem:{nutrition:"",exercise_plan:"",previous_treatments:"0",clinics_exams:[{name:"Laboratorio",value:"0"},{name:"Rayos X de Torax",value:"0"},{name:"Ecocardiograma",value:"0"},{name:"Duplex arterial",value:"0"},{name:"Angio-Tac coronaria",value:"0"}],materials:[],registered_at:moment().format("YYYY-MM-DD")},defaultItem:{nutrition:"",exercise_plan:"",previous_treatments:"0",clinics_exams:[{name:"Laboratorio",value:"0"},{name:"Rayos X de Torax",value:"0"},{name:"Ecocardiograma",value:"0"},{name:"Duplex arterial",value:"0"},{name:"Angio-Tac coronaria",value:"0"}],registered_at:moment().format("YYYY-MM-DD")}},genders:[{name:"Masculino",gender:"M"},{name:"Femenino",gender:"F"}],document_types:[{text:"DNI",value:"DNI"},{text:"RUT",value:"RUT"},{text:"Cédula",value:"cédula"},{text:"Pasaporte",value:"pasaporte"}],editedIndex:-1,editedViewIndex:-1,editedItem:{meta:{instagram:"",facebook:"",twitter:""}},defaultItem:{meta:{instagram:"",facebook:"",twitter:""},telegram:"0",whatsapp:"0",sms:"0"}},computed:{formTitle(){return-1===this.editedIndex?"Añadir nuevo paciente":"Editar ficha del paciente - N° de historia: "+this.editedItem.patient_id},AppointmentFormTitle(){const e=this.patient_appointments;return-1===e.editedIndex?"Añadir nueva cita":"Editar cita del paciente "},RecipesFormTitle(){const e=this.recipes;return-1===e.editedIndex?"Añadir nuevo récipe":"Editar récipe "},ReportsFormTitle(){const e=this.reports;return-1===e.editedIndex?"Añadir nuevo informe":"Editar informe "}},watch:{tab(){void 0!==this.$refs.edit_tabs&&this.$refs.edit_tabs.$el.scrollIntoView({behavior:"smooth"})},dialog(e){e||this.close()},dialogDelete(e){e||this.closeDelete()},appointmentDialog(e){e||this.closeAppointment()},appointmentDialogDelete(e){e||this.closeAppointmentDelete()},birthdate_modal(e){e&&this.$nextTick(()=>this.$refs.register_patient_bd.activePicker="YEAR")},ph_cd_heart_failure_dx_year_modal(e){e&&this.$nextTick(()=>this.$refs.cd_heart_failure_datepicker.activePicker="YEAR")},ph_cd_ischemic_cardiopathy_sca_year_modal(e){e&&this.$nextTick(()=>this.$refs.cd_ischemic_cardiopathy_sca_datepicker.activePicker="YEAR")},ph_cd_ischemic_cardiopathy_sca_im_year_modal(e){e&&this.$nextTick(()=>this.$refs.cd_ischemic_cardiopathy_sca_im_datepicker[this.ref_index].activePicker="YEAR")},ph_cd_ischemic_cardiopathy_sca_ua_year_modal(e){e&&this.$nextTick(()=>this.$refs.cd_ischemic_cardiopathy_sca_ua_datepicker[this.ref_index].activePicker="YEAR")},ph_cd_ischemic_cardiopathy_scai_ua_year_modal(e){e&&this.$nextTick(()=>this.$refs.cd_ischemic_cardiopathy_sca_ua_datepicker[this.ref_index].activePicker="YEAR")},ph_cd_ischemic_cardiopathy_scai_ua_year_modal(e){e&&this.$nextTick(()=>this.$refs.cd_ischemic_cardiopathy_scai_ua_datepicker.activePicker="YEAR")},smoking_start_year_modal(e){e&&this.$nextTick(()=>this.$refs.smoking_start_year_datepicker.activePicker="YEAR")},smoking_quit_year_modal(e){e&&this.$nextTick(()=>this.$refs.smoking_quit_year_datepicker.activePicker="YEAR")},ph_cd_ischemic_cardiopathy_surgery_year_modal(e){e&&this.$nextTick(()=>this.$refs.cd_ischemic_cardiopathy_surgery_year_datepicker.activePicker="YEAR")},ph_cd_ischemic_cardiopathy_percutaneous_year_modal(e){e&&this.$nextTick(()=>this.$refs.cd_ischemic_cardiopathy_percutaneous_year_datepicker.activePicker="YEAR")},cv_disease_year_modal(e){e&&this.$nextTick(()=>this.$refs.cv_disease_year_datepicker[this.ref_index].activePicker="YEAR")},arritmia_year_modal(e){e&&this.$nextTick(()=>this.$refs.arritmia_year_datepicker[this.ref_index].activePicker="YEAR")}},created(){this.initialize()},mounted(){},methods:{initialize(){var e=api_url+"patients/get",t=this;t.$http.get(e).then(e=>{e.body.forEach(e=>{Array.isArray(e.meta)&&(e.meta={})}),t.patients=e.body,t.comparison.patients=e.body,t.comparison.patients_filtered=e.body,t.initializeMaterialTemplates()},e=>{}).then(a=>{e+="-external",t.comparison.external_loading=!0,t.$http.get(e).then(e=>{t.comparison.external_loading=!1,t.comparison.external_patients=e.body,t.comparison.external_patients_filtered=e.body},e=>{t.comparison.external_loading=!1})})},initializeMaterialTemplates(){var e=this;url=api_url+"material-templates/get",e.templates_loading=!0,e.$http.get(url).then(t=>{e.templates_loading=!1,t.body.length>0&&(e.templates=t.body,e.filtered_templates=t.body)},t=>{e.templates_loading=!1})},initializeRecipes(){var e=this,t=api_url+"recipes/get/"+e.editedItem.patient_id;e.recipes.items=[],e.$http.get(t).then(t=>{t.body.forEach((t,a)=>{item=t,item.diagnostics=JSON.parse(t.diagnostics),item.instructions=JSON.parse(t.instructions),e.recipes.items.push(item)})},e=>{})},initializeReports(){var e=this,t=api_url+"reports/get/"+e.editedItem.patient_id;e.reports.items=[],e.$http.get(t).then(t=>{t.body.forEach(t=>{e.reports.items.push(t)})},e=>{})},initializeExams(){var e=this,t=api_url+"medical-exams/get-exams-list";e.$http.get(t).then(t=>{e.patient_laboratory_exams.exams=t.body},e=>{})},initializeExamsFiles(){var e=this,t=api_url+"medical-exams/get-exam-files/"+e.editedItem.patient_id;e.$http.get(t).then(t=>{e.patient_laboratory_exams.exam_files=t.body,e.views.patient_laboratory_exams.exam_files=t.body},e=>{})},initializeAppointments(e){var t=this;if(t.general_save=!1,t.getDoctors(),0==t.patient_appointments.appointments.length){t.patient_appointments.current_appointment={},t.patient_appointments.previous_appointment={};var a=api_url+"appointments/get/"+t.editedItem.patient_id;t.$http.get(a).then(a=>{if(t.patient_appointments.appointments=a.body,a.body.length>0){var i=t.patient_appointments,r=void 0!==e?i.appointments.find(t=>t.appointment_id==e):{},n=i.appointments.length,s=Object.keys(r).length>0?r:i.appointments[n-1];if(s.patient_id=t.editedItem.patient_id,n>1){var o=Object.keys(r).length>0&&0!==i.appointments.indexOf(r)?i.appointments[i.appointments.indexOf(r)-1]:i.appointments[n-2];o.patient_id=t.editedItem.patient_id,t.patient_appointments.previous_appointment=o}t.patient_appointments.current_appointment=void 0!==e?i.appointments.find(t=>t.appointment_id==e):s}},e=>{}).then(()=>{t.initializeHistory()})}},initializeComparisonAppointments(){var e=this,t=e.comparison.appointments;t.loading=!0,t.current_patient={},t.patient_to_compare={};var a=api_url+"appointments/get/comparison",i={current_patient_id:e.comparison.patient_selected.patient_id,patient_to_compare_id:e.comparison.patient_to_compare.patient_id};e.$http.post(a,i).then(a=>{a.body.hasOwnProperty("current_patient_appointments")&&a.body.hasOwnProperty("patient_to_compare_appointments")&&(t.current_patient=a.body.current_patient_appointments.length>1?a.body.current_patient_appointments[a.body.current_patient_appointments.length-1]:a.body.current_patient_appointments[0],t.current_patient.patient_id=e.comparison.patient_selected.patient_id,t.patient_to_compare=a.body.patient_to_compare_appointments.length>1?a.body.patient_to_compare_appointments[a.body.patient_to_compare_appointments.length-1]:a.body.patient_to_compare_appointments[0],t.patient_to_compare.patient_id=e.comparison.patient_to_compare.patient_id,e.initializeComparisonHistory()),t.loading=!1},e=>{t.loading=!1})},openExternalAppointmentForm(e){var t=this;t.general_save=!1,t.getDoctors(),t.editedIndex=t.patients.indexOf(e),t.editedItem=Object.assign({},e),t.patient_appointments.editedItem=Object.assign({},t.patient_appointments.defaultItem),t.patient_appointments.outside_dialog=!0},initializeAnthropometry(e=!1){var t=this;t.general_save=!1;var a=api_url+"anthropometry/get",i={patient_id:t.editedItem.patient_id,appointment_id:t.patient_appointments.current_appointment.appointment_id};t.$http.post(a,i).then(a=>{t.patient_anthropometry.editedItem=a.body.hasOwnProperty("current_anthropometry")&&a.body.current_anthropometry.hasOwnProperty("appointment_id")?a.body.current_anthropometry:Object.assign({},t.patient_anthropometry.defaultItem),a.body.antropometry_history.forEach(e=>{e.created_at=t.patient_appointments.appointments.find(t=>t.appointment_id==e.appointment_id).appointment_date}),t.patient_anthropometry.history=a.body.antropometry_history,e&&(t.reports.editedItem.meta.anthropometry.item=t.patient_anthropometry.editedItem)},e=>{})},initializeComparisonAnthropometry(e=!1){var t=this,a=t.comparison.anthropometry;if(e){a.average_loading=!0;var i=api_url+"anthropometry/get/comparison-average",r=[],n=[];t.comparison.patients_filtered.forEach(e=>{r.push(e.patient_id)}),t.comparison.external_patients_filtered.forEach(e=>{n.push(e.patient_id)});var s={patient_ids:r,external_patient_ids:n};t.$http.post(i,s).then(e=>{e.body.hasOwnProperty("current_patient_items")&&e.body.hasOwnProperty("patient_to_compare_items")&&(a.current_patient=e.body.current_patient_items.length>1?e.body.current_patient_items[e.body.current_patient_items.length-1]:e.body.current_patient_items[0],a.patient_to_compare=e.body.patient_to_compare_items.length>1?e.body.patient_to_compare_items[e.body.patient_to_compare_items.length-1]:e.body.patient_to_compare_items[0]),a.average_loading=!1},e=>{a.average_loading=!1})}else{a.loading=!0;i=api_url+"anthropometry/get/comparison",s={current_patient_id:t.comparison.patient_selected.patient_id,patient_to_compare_id:t.comparison.patient_to_compare.patient_id};t.$http.post(i,s).then(e=>{e.body.hasOwnProperty("current_patient_items")&&e.body.hasOwnProperty("patient_to_compare_items")&&(a.current_patient=e.body.current_patient_items.length>1?e.body.current_patient_items[e.body.current_patient_items.length-1]:e.body.current_patient_items[0],a.patient_to_compare=e.body.patient_to_compare_items.length>1?e.body.patient_to_compare_items[e.body.patient_to_compare_items.length-1]:e.body.patient_to_compare_items[0]),a.loading=!1},e=>{a.loading=!1})}},setAnthropometryVars(){var e=this,t=e.patient_anthropometry,a=api_url+"anthropometry/get",i={patient_id:e.editedItem.patient_id,appointment_id:e.patient_appointments.current_appointment.appointment_id};e.$http.post(a,i).then(a=>{t.editedItem=a.body.hasOwnProperty("current_anthropometry")&&a.body.current_anthropometry.hasOwnProperty("appointment_id")?a.body.current_anthropometry:Object.assign({},t.defaultItem),e.patient_risk_factors.selectedForm.obj.vars.weight=t.editedItem.weight,e.patient_risk_factors.selectedForm.obj.vars.weight_suffix=t.editedItem.weight_suffix,e.patient_risk_factors.selectedForm.obj.vars.height=t.editedItem.height,e.patient_risk_factors.selectedForm.obj.vars.height_suffix=t.editedItem.height_suffix,e.patient_risk_factors.selectedForm.obj.vars.perimeter=t.editedItem.abdominal_waist,e.patient_risk_factors.selectedForm.obj.vars.perimeter_suffix=t.editedItem.abdominal_waist_suffix,e.patient_risk_factors.selectedForm.obj.vars.bmi=e.getBMI(e.patient_risk_factors.selectedForm.obj.vars.weight,e.patient_risk_factors.selectedForm.obj.vars.height,e.patient_risk_factors.selectedForm.obj.vars.weight_suffix,e.patient_risk_factors.selectedForm.obj.vars.height_suffix).split(" ")[0]},e=>{})},initializeHistory(){var e=this,t=e.patient_history;e.general_save=!1,t.form.history_content=Object.assign({},t.defaultItem);var a=api_url+"history/get/"+e.editedItem.patient_id;e.$http.get(a).then(a=>{if(a.body.length>0){var i=[];a.body.forEach(a=>{var r={appointment_id:a.appointment_id,history_content:JSON.parse(a.history_content),created_at:a.created_at,updated_at:a.updated_at};i.push(r),parseInt(r.appointment_id)==parseInt(e.patient_appointments.current_appointment.appointment_id)&&(t.form.history_content=r.history_content)}),t.items=i}},e=>{})},initializeComparisonHistory(){var e=this,t=e.comparison.history;t.loading=!0,t.current_patient={},t.patient_to_compare={};var a=api_url+"history/get/comparison",i={current_patient_id:e.comparison.patient_selected.patient_id,patient_to_compare_id:e.comparison.patient_to_compare.patient_id};e.$http.post(a,i).then(e=>{e.body.hasOwnProperty("current_patient_items")&&e.body.hasOwnProperty("patient_to_compare_items")&&(t.current_patient=e.body.current_patient_items.length>1?e.body.current_patient_items[e.body.current_patient_items.length-1]:e.body.current_patient_items[0],void 0!==t.current_patient&&(t.current_patient.history_content=JSON.parse(t.current_patient.history_content)),t.patient_to_compare=e.body.patient_to_compare_items.length>1?e.body.patient_to_compare_items[e.body.patient_to_compare_items.length-1]:e.body.patient_to_compare_items[0],void 0!==t.patient_to_compare&&(t.patient_to_compare.history_content=JSON.parse(t.patient_to_compare.history_content))),t.loading=!1},e=>{t.loading=!1})},initializePhysicalExams(e=!1){var t=this,a=t.patient_physical_exam;a.content=Object.assign({},a.defaultItem),a.loading=!0;var i=api_url+"patient-physical-exams/get/"+t.editedItem.patient_id;t.$http.get(i).then(i=>{if(a.loading=!1,i.body.length>0){var r=[];i.body.forEach(e=>{var i={appointment_id:e.appointment_id,content:JSON.parse(e.content),created_at:e.created_at,updated_at:e.updated_at};r.push(i),parseInt(i.appointment_id)==parseInt(t.patient_appointments.current_appointment.appointment_id)&&(a.content=i.content)}),a.items=r}e&&(t.reports.editedItem.meta.physical_exam.item=a.content)},e=>{})},initializeComparisonPhysicalExams(){var e=this,t=e.comparison.physical_exams;t.loading=!0,t.current_patient={},t.patient_to_compare={};var a=api_url+"patient-physical-exams/get/comparison",i={current_patient_id:e.comparison.patient_selected.patient_id,patient_to_compare_id:e.comparison.patient_to_compare.patient_id};e.$http.post(a,i).then(e=>{e.body.hasOwnProperty("current_patient_items")&&e.body.hasOwnProperty("patient_to_compare_items")&&(t.current_patient=e.body.current_patient_items.length>1?e.body.current_patient_items[e.body.current_patient_items.length-1]:e.body.current_patient_items[0],t.current_patient.content=JSON.parse(t.current_patient.content),t.patient_to_compare=e.body.patient_to_compare_items.length>1?e.body.patient_to_compare_items[e.body.patient_to_compare_items.length-1]:e.body.patient_to_compare_items[0],t.patient_to_compare.content=JSON.parse(t.patient_to_compare.content)),t.loading=!1},e=>{t.loading=!1})},initializeElectroCardiograms(e=!1){var t=this,a=t.patient_electro_cardiogram;a.content=Object.assign({},a.defaultItem),a.loading=!0;var i=api_url+"patient-electro-cardiograms/get/"+t.editedItem.patient_id;t.$http.get(i).then(i=>{if(a.loading=!1,i.body.length>0){var r=[];i.body.forEach(e=>{var i={appointment_id:e.appointment_id,content:JSON.parse(e.content),created_at:e.created_at,updated_at:e.updated_at};r.push(i),parseInt(i.appointment_id)==parseInt(t.patient_appointments.current_appointment.appointment_id)&&(a.content=i.content)}),a.items=r}e&&(t.reports.editedItem.meta.electro_cardiogram.item=a.content)},e=>{})},initializeComparisonElectroCardiogram(){var e=this,t=e.comparison.electro_cardiogram;t.loading=!0,t.current_patient={},t.patient_to_compare={};var a=api_url+"patient-electro-cardiograms/get/comparison",i={current_patient_id:e.comparison.patient_selected.patient_id,patient_to_compare_id:e.comparison.patient_to_compare.patient_id};e.$http.post(a,i).then(e=>{e.body.hasOwnProperty("current_patient_items")&&e.body.hasOwnProperty("patient_to_compare_items")&&(t.current_patient=e.body.current_patient_items.length>1?e.body.current_patient_items[e.body.current_patient_items.length-1]:e.body.current_patient_items[0],t.current_patient.content=JSON.parse(t.current_patient.content),t.patient_to_compare=e.body.patient_to_compare_items.length>1?e.body.patient_to_compare_items[e.body.patient_to_compare_items.length-1]:e.body.patient_to_compare_items[0],t.patient_to_compare.content=JSON.parse(t.patient_to_compare.content)),t.loading=!1},e=>{t.loading=!1})},initializeEchocardiograms(e=!1){var t=this,a=t.patient_echocardiogram;a.content=a.defaultItem,a.loading=!0;var i=api_url+"patient-echocardiograms/get/"+t.editedItem.patient_id;t.$http.get(i).then(i=>{if(i.body.length>0){var r=[];i.body.forEach(e=>{var i={appointment_id:e.appointment_id,content:e.content,created_at:e.created_at,updated_at:e.updated_at};r.push(i),parseInt(i.appointment_id)==parseInt(t.patient_appointments.current_appointment.appointment_id)&&(a.content=i.content)}),a.items=r,e&&(t.reports.editedItem.meta.echocardiogram.item=a.content)}},e=>{})},initializeComparisonEchocardiograms(){var e=this,t=e.comparison.echocardiogram;t.loading=!0,t.current_patient={},t.patient_to_compare={};var a=api_url+"patient-echocardiograms/get/comparison",i={current_patient_id:e.comparison.patient_selected.patient_id,patient_to_compare_id:e.comparison.patient_to_compare.patient_id};e.$http.post(a,i).then(e=>{e.body.hasOwnProperty("current_patient_items")&&e.body.hasOwnProperty("patient_to_compare_items")&&(t.current_patient=e.body.current_patient_items.length>1?e.body.current_patient_items[e.body.current_patient_items.length-1]:e.body.current_patient_items[0],t.patient_to_compare=e.body.patient_to_compare_items.length>1?e.body.patient_to_compare_items[e.body.patient_to_compare_items.length-1]:e.body.patient_to_compare_items[0]),t.loading=!1},e=>{t.loading=!1})},initializeLifeStyle(){var e=this,t=e.patient_life_style;t.loading=!0,t.items=[],t.editedItem=Object.assign({},t.defaultItem);var a=api_url+"patient-life-style/get/"+e.editedItem.patient_id;e.$http.get(a).then(a=>{if(t.loading=!1,a.body.length>0){var i=[];a.body.forEach((a,r)=>{a.exercise=JSON.parse(a.exercise),a.smoking=JSON.parse(a.smoking),a.sedentary_material=JSON.parse(a.sedentary_material),a.created_at=e.patient_appointments.appointments.find(e=>e.appointment_id==a.appointment_id).appointment_date,i.push(a),parseInt(a.appointment_id)==parseInt(e.patient_appointments.current_appointment.appointment_id)&&(t.editedItem=a)}),t.editedItem.hasOwnProperty("appointment_id")||(t.editedItem=Object.assign({},t.items[t.items.length-1]),t.editedItem.appointment_id=e.patient_appointments.current_appointment.appointment_id),t.items=i}},e=>{t.loading=!1})},initializePlans(){var e=this,t=e.patient_plan;e.alreadySaved=!1,t.loading=!0,t.save_loading=!0,t.editedItem=Object.assign({},t.defaultItem);var a=api_url+"patient-plans/get/"+e.editedItem.patient_id;e.$http.get(a).then(a=>{if(t.save_loading=!1,t.loading=!1,a.body.length>0){var i=[];a.body.forEach((a,r)=>{a.clinics_exams=JSON.parse(a.clinics_exams),a.materials=JSON.parse(a.materials),i.push(a),parseInt(a.appointment_id)==parseInt(e.patient_appointments.current_appointment.appointment_id)&&(t.editedItem=a)}),t.editedItem.hasOwnProperty("appointment_id")||(t.editedItem=Object.assign({},t.items[t.items.length-1]),t.editedItem.appointment_id=e.patient_appointments.current_appointment.appointment_id),t.items=i}},e=>{t.loading=!1,t.save_loading=!1})},initializeFactorsRisk(e){var t=this,a=t.patient_risk_factors;a.loading=!0;var i={patient_id:t.editedItem.patient_id,current_appointment:t.patient_appointments.current_appointment.appointment_id,previous_appointment:t.patient_appointments.previous_appointment.appointment_id};if(e){a.risk_factors_list.current_list=[],a.risk_factors_list.previous_list=[],a.risk_factors_list.items=[],a.risk_factors_loaded=!0;var r=api_url+"patient-risk-factors/get/";t.$http.post(r,i).then(e=>{e.body.hasOwnProperty("current_list")&&(e.body.current_list.forEach(e=>{e.created_at=t.patient_appointments.appointments.find(t=>t.appointment_id==e.appointment_id).appointment_date}),a.risk_factors_list.current_list=e.body.current_list),e.body.hasOwnProperty("previous_list")&&(e.body.previous_list.forEach(e=>{e.created_at=t.patient_appointments.appointments.find(t=>t.appointment_id==e.appointment_id).appointment_date}),a.risk_factors_list.previous_list=e.body.previous_list),e.body.hasOwnProperty("items")&&(e.body.items.forEach(e=>{e.created_at=t.patient_appointments.appointments.find(t=>t.appointment_id==e.appointment_id).appointment_date}),a.risk_factors_list.items=e.body.items),a.risk_factors_loaded=!1},e=>{})}a.selectedForm={calc_name:"",obj:{results:""}};r=api_url+"patient-risk-factors-diagnostic/get/";a.risk_factors=Object.assign({},a.defaultItems.risk_factors),a.risk_factors_diagnostics=[],t.$http.post(r,i).then(e=>{if(e.body.hasOwnProperty("current_risk_factors_diagnostics")&&e.body.current_risk_factors_diagnostics.hasOwnProperty("risk_factors")){e.body.current_risk_factors_diagnostics.risk_factors=JSON.parse(e.body.current_risk_factors_diagnostics.risk_factors);var r=e.body.current_risk_factors_diagnostics;r.patient_id=i.patient_id,r.appointment_id=i.current_appointment,a.rf.appointment_id=r.appointment_id,a.rf.risk_factors=r.risk_factors,a.rf.created_at=r.created_at,a.rf.updated_at=r.updated_at}else{var n=t.patient_history.form.history_content;a.rf.risk_factors.forEach(e=>{"HTA"==e.name?e.diagnostic=parseInt(n.diseases.hta.active)?"Sí":"No":"Dislipidemia"==e.name?e.diagnostic=parseInt(n.diseases.dyslipidemia.active)?"Sí":"No":"Pre DMt2"==e.name?e.diagnostic=parseInt(n.diseases.pre_dtm2.active)?"Sí":"No":"DMt2"==e.name?e.diagnostic=parseInt(n.diseases.dtm2.active)?"Sí":"No":"Cardiopatía Isquémica"==e.name?e.diagnostic=parseInt(n.cardiovascular_diseases.ischemic_cardiopathy.sca.active)?"Sí":"No":"Arritmia"==e.name?e.diagnostic=""!=n.cardiovascular_diseases.arritmia.type?"Sí":"No":"Insuficiencia Cardíaca"==e.name?e.diagnostic=parseInt(n.cardiovascular_diseases.heart_failure.active)?"Sí":"No":e.diagnostic="No"})}if(e.body.hasOwnProperty("risk_factors_diagnostics")&&e.body.risk_factors_diagnostics.length>0){var s=[];e.body.risk_factors_diagnostics.forEach(e=>{var t=e;t.risk_factors=JSON.parse(t.risk_factors),s.push(t)}),a.risk_factors_diagnostics=s}a.loading=!1},e=>{})},initializeComparisonFactorsRisk(e){var t=this,a=t.comparison.diagnostics;a.loading=!0,a.rf_loading=!0,a.items.current_patient=[],a.items.patient_to_compare=[],a.risk_factors.current_patient=[],a.risk_factors.patient_to_compare=[];var i={current_patient_id:t.comparison.patient_selected.patient_id,patient_to_compare_id:t.comparison.patient_to_compare.patient_id};if(e){t.patient_risk_factors.rf_loading=!0;var r=api_url+"patient-risk-factors/get/comparison";t.$http.post(r,i).then(e=>{if(e.body.hasOwnProperty("current_patient_items")&&e.body.current_patient_items.length>1||e.body.hasOwnProperty("patient_to_compare_items")&&e.body.patient_to_compare_items.length>1){var i=[],r=[];t.patient_risk_factors.form_risk_factors.forEach(t=>{var a=e.body.current_patient_items.filter(e=>e.name==t.calc_name),n=e.body.patient_to_compare_items.filter(e=>e.name==t.calc_name);a.length>0&&i.push(a.length>=2?a[a.length-1]:a[0]),n.length>0&&r.push(n.length>=2?n[n.length-1]:n[0])}),a.risk_factors.current_patient=i,a.risk_factors.patient_to_compare=r}a.rf_loading=!1},e=>{a.rf_loading=!1})}r=api_url+"patient-risk-factors-diagnostic/get/comparison";t.$http.post(r,i).then(e=>{if(e.body.hasOwnProperty("current_patient_items")&&e.body.hasOwnProperty("patient_to_compare_items")){var t=e.body.current_patient_items.length>1?e.body.current_patient_items[e.body.current_patient_items.length-1]:e.body.current_patient_items[0];a.items.current_patient=void 0===t?[]:JSON.parse(t.risk_factors),dx_patient_to_compare=e.body.patient_to_compare_items.length>1?e.body.patient_to_compare_items[e.body.patient_to_compare_items.length-1]:e.body.patient_to_compare_items[0],a.items.patient_to_compare=void 0===dx_patient_to_compare?[]:JSON.parse(dx_patient_to_compare.risk_factors)}a.loading=!1},e=>{})},initializeVitalSigns(e=!1){
var t=this,a=t.patient_vital_signs;a.takes=a.defaultItem,a.temperature=35,a.sat=75,t.general_save=!1;var i=api_url+"vital-signals/get/"+t.editedItem.patient_id;t.$http.get(i).then(i=>{if(a.records=[],i.body.length>0){var r=[];a.records=i.body.forEach(i=>{var n={appointment_id:i.appointment_id,sitting:JSON.parse(i.sitting),lying_down:JSON.parse(i.lying_down),standing:JSON.parse(i.standing),takes:JSON.parse(i.takes),created_at:t.patient_appointments.appointments.find(e=>e.appointment_id==i.appointment_id).appointment_date,updated_at:i.updated_at};if(r.push(n),parseInt(n.appointment_id)==parseInt(t.patient_appointments.current_appointment.appointment_id)&&(a.takes=n.takes,a.temperature=n.sitting.temperature,a.sat=n.sitting.sat,a.appointment_id=n.appointment_id,e)){var s={takes:n.takes,temperature:n.sitting.temperature,sat:n.sitting.sat};t.reports.editedItem.meta.vital_signs=s}}),a.records=r}},e=>{})},initializeComparisonVitalSigns(){var e=this,t=e.comparison.vital_signs;t.loading=!0,t.current_patient={},t.patient_to_compare={};var a=api_url+"vital-signals/get/comparison",i={current_patient_id:e.comparison.patient_selected.patient_id,patient_to_compare_id:e.comparison.patient_to_compare.patient_id};e.$http.post(a,i).then(e=>{e.body.hasOwnProperty("current_patient_items")&&e.body.hasOwnProperty("patient_to_compare_items")&&(t.current_patient=e.body.current_patient_items.length>1?e.body.current_patient_items[e.body.current_patient_items.length-1]:e.body.current_patient_items[0],t.current_patient.takes=JSON.parse(t.current_patient.takes),t.current_patient.sitting=JSON.parse(t.current_patient.sitting),t.current_patient.lying_down=JSON.parse(t.current_patient.lying_down),t.current_patient.standing=JSON.parse(t.current_patient.standing),t.current_patient.sat=JSON.parse(t.current_patient.standing.sat),t.current_patient.temperature=JSON.parse(t.current_patient.standing.temperature),t.patient_to_compare=e.body.patient_to_compare_items.length>1?e.body.patient_to_compare_items[e.body.patient_to_compare_items.length-1]:e.body.patient_to_compare_items[0],t.patient_to_compare.takes=JSON.parse(t.patient_to_compare.takes),t.patient_to_compare.sitting=JSON.parse(t.patient_to_compare.sitting),t.patient_to_compare.lying_down=JSON.parse(t.patient_to_compare.lying_down),t.patient_to_compare.standing=JSON.parse(t.patient_to_compare.standing),t.patient_to_compare.sat=JSON.parse(t.patient_to_compare.standing.sat),t.patient_to_compare.temperature=JSON.parse(t.patient_to_compare.standing.temperature)),t.loading=!1},e=>{t.loading=!1})},loadGeneralStatistics(){var e=this,t=0,a=0,i=0,r=0,n=e.patients.filter(e=>"F"==e.gender);n.forEach(t=>{a+=1,i+=e.getTimeDiff(t.birthdate)});var s=e.patients.filter(e=>"M"==e.gender);s.forEach(a=>{t+=1,r+=e.getTimeDiff(a.birthdate)}),a>0&&(e.statistics.female.age_average=Math.round(i/a)),t>0&&(e.statistics.male.age_average=Math.round(r/t)),e.statistics.male.total_patients=s.length,e.statistics.female.total_patients=n.length},loadPatientsEntryStatistics(){var e=this;e.statistics.chart.loading=!0;for(var t=0;t<8;t++)e.statistics.chart.weekly_data.labels[t]=moment(e.statistics.chart.weekly_data.current_day).subtract(7-t,"days").format("MM-DD");e.statistics.chart.weekly_data.labels.forEach((t,a)=>{var i=e.patients.filter(e=>e.entry_date==moment().format("YYYY-")+t);e.statistics.chart.weekly_data.datasets[0].data[a]=i.length,e.statistics.chart.weekly_data.datasets[1].data[a]=i.filter(e=>"M"==e.gender).length,e.statistics.chart.weekly_data.datasets[2].data[a]=i.filter(e=>"F"==e.gender).length}),e.statistics.chart.monthly_data.months.forEach((t,a)=>{var i=e.patients.filter(e=>e.entry_date.includes(moment().format("YYYY-")+t));e.statistics.chart.monthly_data.datasets[0].data[a]=i.length,e.statistics.chart.monthly_data.datasets[1].data[a]=i.filter(e=>"M"==e.gender).length,e.statistics.chart.monthly_data.datasets[2].data[a]=i.filter(e=>"F"==e.gender).length}),e.statistics.chart.loading=!1,void 0!==e.$refs.monthly_chart&&e.$refs.monthly_chart.renderChart(e.statistics.chart.monthly_data),void 0!==e.$refs.weekly_chart&&e.$refs.weekly_chart.renderChart(e.statistics.chart.weekly_data)},loadAnthropometryStatistics(){var e=this,t=e.statistics.diseases.obesity,a=0,i=0,r=0,n=0;t.total=0,e.statistics.anthropometry.loading=!0;var s=api_url+"anthropometry/get-by-list";e.$http.post(s,e.patients).then(s=>{s.body.forEach(s=>{var o="lb"==s.weight_suffix?parseFloat(o/2.205).toFixed(2):parseFloat(s.weight).toFixed(2),p="in"==s.height_suffix?parseFloat(p/2.54).toFixed(2):parseFloat(s.height).toFixed(2),d="in"==s.abdominal_waist_suffix?parseFloat(d/2.54).toFixed(2):parseFloat(s.abdominal_waist).toFixed(2);(o>0||p>0)&&(a+=1,e.getBMI(o,p,"kg","cm").replace(" kg/m2","")>=30&&t.total++,i+=parseFloat(o),r+=parseFloat(p),n+=parseFloat(d))}),e.statistics.anthropometry.items=s.body,a>0&&(e.statistics.anthropometry.weight=parseFloat(i/a),e.statistics.anthropometry.height=parseFloat(r/a),e.statistics.anthropometry.abdominal_waist=parseFloat(n/a),e.statistics.anthropometry.bmi=e.getBMI(e.statistics.anthropometry.weight,e.statistics.anthropometry.height,"kg","cm").replace(" kg/m2",""),e.statistics.anthropometry.cs=e.getCS(e.statistics.anthropometry.weight,e.statistics.anthropometry.height,"kg","cm").replace(" m2","")),e.statistics.anthropometry.loading=!1},t=>{e.statistics.anthropometry.loading=!1})},loadLifeStyleStatistics(){var e=this,t=e.statistics.life_style,a=0,i=0;t.loading=!0;var r=api_url+"patient-life-style/get-by-list";e.$http.post(r,e.patients).then(e=>{e.body.forEach(e=>{e.exercise=JSON.parse(e.exercise),e.smoking=JSON.parse(e.smoking),parseInt(e.smoking.active)?t.smoking.active++:t.smoking.inactive++,parseInt(e.alcohol_consumption)?t.alcohol_consumption.active++:t.alcohol_consumption.inactive++,parseInt(e.sedentary)?t.sedentary.active++:t.sedentary.inactive++,e.exercise.type.includes("Aeróbico")&&t.exercises.aerobics++,e.exercise.type.includes("Resistencia")&&t.exercises.resistance++,!parseInt(e.sendetary)&&parseInt(e.exercise_weekly_minutes)>0&&(a+=1,i+=parseInt(e.exercise_weekly_minutes))}),a>0&&(t.exercises.time_weekly_avg=Math.round(i/a)),t.loading=!1},e=>{t.loading=!1})},loadDiseasesStatistics(){var e=this,t={controlled:0,no_controlled:0},a={controlled:0,no_controlled:0},i={controlled:0,no_controlled:0};e.statistics.diseases.loading=!0;var r=api_url+"history/get-by-list";e.$http.post(r,e.patients).then(r=>{r.body.forEach(e=>{e.history_content=JSON.parse(e.history_content).diseases;var r=e.history_content.hta,n=e.history_content.dyslipidemia,s=e.history_content.dtm2;r.active&&(r.controlled?t.controlled=t.controlled+1:t.no_controlled=t.no_controlled+1),n.active&&(n.controlled?a.controlled=a.controlled+1:a.no_controlled=a.no_controlled+1),s.active&&(s.controlled?i.controlled=i.controlled+1:i.no_controlled=i.no_controlled+1)}),e.statistics.diseases.hta=t,e.statistics.diseases.dyslipidemia=a,e.statistics.diseases.dmt2=i,e.statistics.diseases.histories=r.body,e.statistics.diseases.loading=!1},t=>{e.statistics.diseases.loading=!1})},loadLaboratoryExamsStatistics(){var e=this;e.statistics.laboratory_exam.loading=!0;var t={patients:e.patients,exams:e.statistics.laboratory_exam.items},a=api_url+"medical-exams/get-exams-by-patient-list";e.$http.post(a,t).then(t=>{e.statistics.laboratory_exam.items.forEach(e=>{var a=t.body.filter(t=>t.name==e.name);e.items=a.length,a.forEach(t=>{e.total=e.total+parseInt(t.results)}),e.items>0&&(e.total=parseInt(e.total/a.length))}),e.statistics.laboratory_exam.loading=!1},t=>{e.statistics.laboratory_exam.loading=!1})},initializeBasicStatistics(){this.loadPatientsEntryStatistics(),this.loadGeneralStatistics(),this.loadAnthropometryStatistics(),this.loadLifeStyleStatistics(),this.loadDiseasesStatistics(),this.loadLaboratoryExamsStatistics()},loadDiagnosticsToRecipe(){var e=this;if(-1==e.recipes.editedIndex){var t=[],a=[{name:"HTA",key:"antihypertensives"},{name:"Cardiopatía Isquémica",key:"antithrombotics"},{name:"Insuficiencia Cardíaca",key:"antihypertensives"},{name:"Dislipidemia",key:"hypolipidemic"},{name:"DMt2",key:"antidiabetics"},{name:"Pre DMt2",key:"antidiabetics"}],i=[{name:"antihypertensives",imported:!1},{name:"antithrombotics",imported:!1},{name:"hypolipidemic",imported:!1},{name:"antidiabetics",imported:!1}];e.patient_risk_factors.rf.risk_factors.forEach(r=>{if("Sí"==r.diagnostic){t.push({diagnostic:r.name,treatment_goal:""});var n=a.find(e=>e.name==r.name);if(void 0!==n){var s=e.patient_history.form.history_content.treatments[n.key];treatment_imported=i.find(e=>e.name==n.key),treatment_imported_index=i.indexOf(treatment_imported),treatment_imported.imported||(Object.entries(s).forEach(t=>{"metformin"==t[0]&&t[1].active&&(t[1].treatment="Metformina"),"ezt"==t[0]&&t[1].active&&(t[1].treatment="EZT"),t[1].hasOwnProperty("treatment")&&""!==t[1].treatment&&e.recipes.editedItem.instructions.push({dosis:t[1].dosis,observations:"",schedule:`${t[1].frecuency} dosis diarias`,treatment:t[1].treatment})}),i[treatment_imported_index].imported=!0)}}}),e.recipes.editedItem.diagnostics=t}},loadDiagnosticsToReport(){var e=this;if(-1==e.reports.editedIndex){var t=[];e.patient_risk_factors.rf.risk_factors.forEach(e=>{"Sí"==e.diagnostic&&t.push(e.name)}),e.reports.editedItem.meta.diagnostics=t}},loadPlanToReport(){var e=this,t=e.patient_plan,a=api_url+"patient-plans/get/"+e.editedItem.patient_id;e.$http.get(a).then(a=>{if(t.save_loading=!1,t.loading=!1,a.body.length>0){var i=[];a.body.forEach((a,r)=>{a.clinics_exams=JSON.parse(a.clinics_exams),a.materials=JSON.parse(a.materials),i.push(a),parseInt(a.appointment_id)==parseInt(e.patient_appointments.current_appointment.appointment_id)&&(t.editedItem=a)}),t.items=i}e.reports.editedItem.meta.plan=t.editedItem},e=>{t.loading=!1,t.save_loading=!1})},loadTreatmentsToReport(){var e=this;if(e.recipes.items.length<1){var t=api_url+"recipes/get/"+e.editedItem.patient_id;e.recipes.items=[],e.$http.get(t).then(t=>{if(t.body.forEach((t,a)=>{item=t,item.diagnostics=JSON.parse(t.diagnostics),item.instructions=JSON.parse(t.instructions),e.recipes.items.push(item)}),e.recipes.items.length>0){var a=e.recipes.items[e.recipes.items.length-1];a.instructions.forEach(t=>{var a={treatment:t.treatment,dosis:t.dosis,interval:t.schedule};e.reports.editedItem.meta.treatments.push(a)})}},e=>{})}else{var a=e.recipes.items[e.recipes.items.length-1];a.instructions.forEach(t=>{var a={treatment:t.treatment,dosis:t.dosis,interval:t.schedule};e.reports.editedItem.meta.treatments.push(a)})}},loadLaboratoryExamsToReport(){var e=this,t=api_url+"medical-exams/get-exams-appointment-results/"+e.patient_appointments.current_appointment.appointment_id;e.$http.get(t).then(t=>{e.reports.editedItem.meta.laboratory_exam.items=t.body},e=>{})},loadExtrasToReport(){this.loadDiagnosticsToReport(),this.loadTreatmentsToReport(),this.loadPlanToReport(),this.initializeAnthropometry(!0),this.initializePhysicalExams(!0),this.initializeEchocardiograms(!0),this.initializeElectroCardiograms(!0),this.initializeVitalSigns(!0),this.loadLaboratoryExamsToReport()},getCurrentFactorRisk(){var e=this,t=e.patient_risk_factors;t.risk_factors_calc_list=[];var a={name:t.selectedForm.calc_name,patient_id:e.editedItem.patient_id,appointment_id:e.patient_appointments.current_appointment.appointment_id};t.selectedForm.obj.results=0,t.selectedForm.hasOwnProperty("appointment_id")&&delete t.selectedForm.appointment_id;var i=api_url+"patient-risk-factors/get-current-risk-factor/";e.$http.post(i,a).then(e=>{if(Array.isArray(e.body.current_rf)&&e.body.current_rf.length>0){var a=e.body.current_rf[0];t.selectedForm.obj.vars=Object.assign({},JSON.parse(a.vars)),t.selectedForm.patient_id=a.patient_id,t.selectedForm.appointment_id=a.appointment_id,t.selectedForm.obj.results=a.results,t.selectedForm.obj.hasOwnProperty("normalize")&&t.selectedForm.obj.normalize()}Array.isArray(e.body.risk_factors)&&e.body.risk_factors.length>0&&(t.risk_factors_calc_list=e.body.risk_factors)},e=>{})},editRecipeItem(e){var t=this;t.recipes.editedIndex=t.recipes.items.indexOf(e),t.recipes.editedItem=Object.assign({},e),t.recipes.dialog=!0},editReportItem(e){var t=this;t.reports.editedIndex=t.reports.items.indexOf(e),t.reports.editedItem=Object.assign({},e),t.reports.dialog=!0},editItem(e){var t=this;t.general_save=!0,t.editedIndex=t.patients.indexOf(e),t.editedItem=Object.assign({},e),t.dialog=!0},showItem(e){var t=this;t.editedItem=Object.assign({},e),t.editedViewIndex=t.patients.indexOf(e),t.view_dialog=!0},editAppointmentItem(e){var t=this.patient_appointments;t.editedIndex=t.appointments.indexOf(e),t.editedItem=Object.assign({},e),t.dialog=!0},deleteItem(e){this.editedIndex=this.patients.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteAppointmentItem(e){var t=this.patient_appointments;t.editedIndex=t.appointments.indexOf(e),t.editedItem=Object.assign({},e),t.dialogDelete=!0},deleteExamItem(e){var t=this.patient_laboratory_exams;t.editedIndex=t.exam_results.indexOf(e),t.editedItem=Object.assign({},e),t.dialogDelete=!0},deleteExamFileItem(e){var t=this.patient_laboratory_exams;t.dialogFileDelete=!0,t.editedFileIndex=t.exam_files.indexOf(e),t.editedFileItem=Object.assign({},e)},deleteRecipeItem(e){var t=this.recipes;t.dialogDelete=!0,t.editedIndex=t.items.indexOf(e),t.editedItem=Object.assign({},e)},deleteReportItem(e){var t=this.reports;t.dialogDelete=!0,t.editedIndex=t.items.indexOf(e),t.editedItem=Object.assign({},e)},deleteItemConfirm(){var e=this,t=api_url+"patients/delete";e.$http.post(t,e.editedItem).then(t=>{e.loading=!1,"success"==t.body.status&&e.patients.splice(e.editedIndex,1),e.closeDelete(),activateAlert(t.body.message,t.body.status)},e=>{})},deleteRecipeItemConfirm(){var e=this,t=api_url+"recipes/delete";e.$http.post(t,e.recipes.editedItem).then(t=>{"success"==t.body.status&&(e.recipes.items.splice(e.recipes.editedIndex,1),e.closeRecipeDelete()),activateAlert(t.body.message,t.body.status)},e=>{})},deleteReportItemConfirm(){var e=this,t=api_url+"reports/delete";e.$http.post(t,e.reports.editedItem).then(t=>{"success"==t.body.status&&(e.reports.items.splice(e.reports.editedIndex,1),e.closeReportDelete()),activateAlert(t.body.message,t.body.status)},e=>{})},deleteAppointmentItemConfirm(){var e=this,t=e.patient_appointments,a=api_url+"appointments/delete";e.$http.post(a,{appointment_id:t.editedItem.appointment_id,patient_id:e.editedItem.patient_id}).then(a=>{e.loading=!1,"success"==a.body.status&&t.appointments.splice(t.editedIndex,1),activateAlert(a.body.message,a.body.status),e.closeAppointmentDelete()},t=>{e.closeAppointmentDelete()})},deleteExamItemConfirm(){var e=this,t=e.patient_laboratory_exams,a=api_url+"medical-exams/delete";t.editedItem.exam_name=t.selectedExam.name,t.editedItem.patient_id=e.editedItem.patient_id,e.$http.post(a,t.editedItem).then(a=>{"success"==a.body.status&&t.exam_results.splice(t.editedIndex,1),e.closeExamDelete(),activateAlert(a.body.message,a.body.status)},t=>{e.closeExamDelete()})},deleteExamFileItemConfirm(){var e=this,t=e.patient_laboratory_exams,a=api_url+"medical-exams/delete-file";t.editedFileItem.patient_id=e.editedItem.patient_id,e.$http.post(a,t.editedFileItem).then(a=>{"success"==a.body.status&&t.exam_files.splice(t.editedFileIndex,1),e.closeFileExamDelete(),activateAlert(a.body.message,a.body.status)},t=>{e.closeFileExamDelete()})},close(e=!0){this.dialog=!1,e&&this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},closeView(){this.view_dialog=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},closeAppointment(){var e=this.patient_appointments;e.dialog=!1,this.$nextTick(()=>{e.editedItem=Object.assign({},this.defaultItem),e.editedIndex=-1})},closeRecipe(){var e=this.recipes;e.dialog=!1,this.$nextTick(()=>{e.editedItem=Object.assign({},this.defaultItem),e.editedIndex=-1})},closeReport(){var e=this.reports;e.dialog=!1,this.$nextTick(()=>{e.editedItem=Object.assign({},this.defaultItem),e.editedIndex=-1})},closeExam(){var e=this.patient_laboratory_exams;this.$nextTick(()=>{e.defaultItem.exam_date=e.editedItem.exam_date,e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1})},closeFileExam(){var e=this.patient_laboratory_exams;this.$nextTick(()=>{e.defaultItem.exam_date=e.editedFileItem.exam_date,e.editedFileItem=Object.assign({},e.defaultItem),e.editedFileIndex=-1})},closeDelete(){this.dialogDelete=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},closeRecipeDelete(){this.recipes.dialogDelete=!1,this.$nextTick(()=>{this.recipes.editedItem=Object.assign({},this.defaultItem),this.recipes.editedIndex=-1})},closeReportDelete(){this.reports.dialogDelete=!1,this.$nextTick(()=>{this.reports.editedItem=Object.assign({},this.reports.defaultItem),this.reports.editedIndex=-1})},closeAppointmentDelete(){var e=this.patient_appointments;e.dialogDelete=!1,this.$nextTick(()=>{e.editedItem=Object.assign({},this.defaultItem),e.editedIndex=-1})},closeExamDelete(){var e=this.patient_laboratory_exams;e.dialogDelete=!1,this.$nextTick(()=>{e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1})},closeFileExamDelete(){var e=this.patient_laboratory_exams;this.$nextTick(()=>{e.editedFileItem=Object.assign({},e.defaultItem),e.editedFileIndex=-1}),e.dialogFileDelete=!1},save(){var e=this;if(e.loading=!0,e.editedIndex>-1){var t=api_url+"patients/update";e.$http.post(t,e.editedItem).then(t=>{e.loading=!1,"success"==t.body.status&&(Object.assign(e.patients[e.editedIndex],e.editedItem),e.tab="tab-2",e.initializeAppointments()),activateAlert(t.body.message,t.body.status)},e=>{})}else{t=api_url+"patients/create";e.$http.post(t,e.editedItem).then(t=>{e.loading=!1,"success"==t.body.status&&(e.editedItem.patient_id=t.body.data.patient_id,e.editedItem.full_name=e.editedItem.first_name+" "+e.editedItem.last_name,e.patients.push(e.editedItem),e.close(!1),e.editItem(e.editedItem)),e.upload_button=!1,activateAlert(t.body.message,t.body.status)},t=>{e.loading=!1})}},saveAppointment(){var e=this,t=e.patient_appointments;if(t.editedItem.patient_id=e.editedItem.patient_id,t.editedItem.full_name=e.getDoctorFullName(t.editedItem.user_id),e.loading=!0,t.editedIndex>-1){var a=api_url+"appointments/update";e.$http.post(a,t.editedItem).then(a=>{e.loading=!1,"success"==a.body.status&&Object.assign(t.appointments[t.editedIndex],t.editedItem),activateAlert(a.body.message,a.body.status),e.closeAppointment()},t=>{e.loading=!1,e.closeAppointment()})}else{a=api_url+"appointments/create";e.$http.post(a,t.editedItem).then(a=>{e.loading=!1,"success"==a.body.status&&(t.editedItem.appointment_id=a.body.data.appointment_id),t.editedItem.appointment_finished=0,t.appointments.push(t.editedItem),1==t.appointments.length?t.current_appointment=Object.assign({},t.editedItem):(t.current_appointment=Object.assign({},t.editedItem),t.previous_appointment=t.appointments[t.appointments.length-2]),activateAlert(a.body.message,a.body.status),e.closeAppointment()},t=>{e.loading=!1,e.closeAppointment()})}},finishAppointment(){var e=this,t=e.patient_appointments;e.finish_loading=!0;var a=api_url+"appointments/finish";e.$http.post(a,t.current_appointment).then(a=>{e.finish_loading=!1,"success"==a.body.status&&(e.patient_plan.alreadySaved=!1),t.current_appointment.appointment_finished=1,activateAlert(a.body.message,a.body.status)},t=>{e.finish_loading=!1})},finishAppointmentAndCreateNext(){var e=this,t=e.patient_appointments;e.finish_loading=!0;var a=api_url+"appointments/finish";e.$http.post(a,t.current_appointment).then(a=>{e.finish_loading=!1,"success"==a.body.status&&(e.patient_plan.alreadySaved=!1),t.current_appointment.appointment_finished=1,e.finishOptionsDialog=!1,e.tab="tab-2",t.editedItem={},t.dialog=!0,activateAlert(a.body.message,a.body.status)},t=>{e.finish_loading=!1})},saveAnthropometry(){var e=this,t=e.patient_anthropometry;e.loading=!0;var a=api_url+"anthropometry/create",i=t.editedItem;i.appointment_id=i.hasOwnProperty("appointment_id")?i.appointment_id:e.patient_appointments.current_appointment.appointment_id,i.patient_id=e.editedItem.patient_id,i.hasOwnProperty("created_at")&&(a=api_url+"anthropometry/update"),e.$http.post(a,i).then(a=>{e.loading=!1,"success"==a.body.status&&(t.editedItem.hasOwnProperty("created_at")||(t.editedItem.created_at=moment().format("YYYY-MM-DD")),e.tab="tab-5"),activateAlert(a.body.message,a.body.status)},t=>{e.loading=!1})},saveHistory(e=!0){var t=this,a=t.patient_history;a.loading=!0;var i=api_url+"history/update";a.form.patient_id=t.editedItem.patient_id,a.form.appointment_id=t.patient_appointments.current_appointment.appointment_id,t.$http.post(i,a.form).then(i=>{a.loading=!1,e?"success"==i.body.status&&(t.tab="tab-4",t.initializeAnthropometry()):(t.patient_risk_factors.rf.treatment_dialog=!1,"success"==i.body.status&&(i.body.message="Tratamientos actualizados")),activateAlert(i.body.message,i.body.status)},e=>{a.loading=!1})},saveFactorRisk(){var e=this,t=e.patient_risk_factors;t.loading=!0;var a=api_url+"patient-risk-factors/update",i={appointment_id:t.selectedForm.obj.hasOwnProperty.appointment_id?t.selectedForm.obj.appointment_id:e.patient_appointments.current_appointment.appointment_id,patient_id:e.editedItem.patient_id,name:t.selectedForm.calc_name,results:t.selectedForm.obj.results,nomenclature:t.selectedForm.obj.nomenclature,vars:t.selectedForm.obj.vars};e.$http.post(a,i).then(e=>{t.loading=!1,activateAlert(e.body.message,e.body.status)},e=>{t.loading=!1})},saveFactorRiskDiagnostic(){var e=this;e.patient_risk_factors.diagnostic_loading=!0;var t=api_url+"patient-risk-factors-diagnostic/update";data={patient_id:e.editedItem.patient_id,risk_factors:e.patient_risk_factors.rf.risk_factors,appointment_id:e.patient_appointments.current_appointment.appointment_id},e.$http.post(t,data).then(t=>{e.patient_risk_factors.diagnostic_loading=!1,activateAlert(t.body.message,t.body.status)},t=>{e.patient_history.loading=!1})},saveExam(e,t){var a=this,i=a.patient_laboratory_exams,r=api_url+"medical-exams/create";i.editedItem.appointment_id=a.patient_appointments.current_appointment.appointment_id,i.editedItem.patient_id=a.editedItem.patient_id,i.editedItem.exam_name=i.selectedExam.name,i.editedItem.exam_id=i.selectedExam.exam_id,e&&(i.editedItem.vars=t),a.$http.post(r,i.editedItem).then(e=>{"success"==e.body.status&&(i.editedItem.patient_exam_id=e.body.data.patient_exam_id),i.exam_results.push(i.editedItem),activateAlert(e.body.message,e.body.status),a.closeExam()},e=>{a.closeExam()})},savePhysicalExam(){var e=this,t=e.patient_physical_exam,a={},i=api_url+"patient-physical-exams/update";t.loading=!0,a.content=t.content,a.appointment_id=e.patient_appointments.current_appointment.appointment_id,a.patient_id=e.editedItem.patient_id,e.$http.post(i,a).then(a=>{t.loading=!1,"success"==a.body.status&&(e.tab="tab-7",e.initializeElectroCardiograms()),activateAlert(a.body.message,a.body.status)},e=>{t.loading=!1,activateAlert("Error inesperado, intente de nuevo","error")})},saveElectroCardiogram(){var e=this,t=e.patient_electro_cardiogram,a={content:t.content,appointment_id:e.patient_appointments.current_appointment.appointment_id,patient_id:e.editedItem.patient_id},i=api_url+"patient-electro-cardiograms/update";t.loading=!0,e.$http.post(i,a).then(a=>{t.loading=!1,"success"==a.body.status&&(e.tab="tab-8",e.initializeEchocardiograms()),activateAlert(a.body.message,a.body.status)},e=>{t.loading=!1,activateAlert("Error inesperado, intente de nuevo","error")})},saveEchocardiogram(){var e=this,t=e.patient_echocardiogram,a={appointment_id:e.patient_appointments.current_appointment.appointment_id,patient_id:e.editedItem.patient_id,content:t.content},i=api_url+"patient-echocardiograms/update";t.loading=!0,e.$http.post(i,a).then(a=>{t.loading=!1,"success"==a.body.status&&(e.tab="tab-9",e.initializeExams(),e.initializeExamsFiles()),activateAlert(a.body.message,a.body.status)},e=>{t.loading=!1,activateAlert("Error inesperado, intente de nuevo","error")})},saveLifeStyle(){var e=this,t=e.patient_life_style,a=api_url+"patient-life-style/update";t.save_loading=!0,t.editedItem.patient_id=e.editedItem.patient_id,t.editedItem.appointment_id=e.patient_appointments.current_appointment.appointment_id,e.$http.post(a,t.editedItem).then(a=>{t.save_loading=!1,"success"==a.body.status&&(e.tab="tab-12",e.initializeFactorsRisk(),e.initializePlans()),activateAlert(a.body.message,a.body.status)},e=>{t.save_loading=!1,activateAlert("Error inesperado, intente de nuevo","error")})},savePlan(){var e=this,t=e.patient_plan,a=api_url+"patient-plans/create";t.save_loading=!0,t.editedItem.patient_id=e.editedItem.patient_id,t.editedItem.appointment_id=e.patient_appointments.current_appointment.appointment_id,e.$http.post(a,t.editedItem).then(a=>{t.save_loading=!1,"success"==a.body.status&&(t.alreadySaved=!0,e.finishOptionsDialog=!0),activateAlert(a.body.message,a.body.status)},e=>{t.save_loading=!1,activateAlert("Error inesperado, intente de nuevo","error")})},saveFileExam(){var e=this,t=e.patient_laboratory_exams;t.add_file_loading=!0;var a=api_url+"medical-exams/create-file";let i=new FormData;i.append("file_result",t.editedFileItem.file_result),i.append("exam_date",t.editedFileItem.exam_date),i.append("patient_id",e.editedItem.patient_id),e.$http.post(a,i).then(a=>{"success"==a.body.status&&(t.editedFileItem.patient_exam_file_id=a.body.data.patient_exam_file_id,t.editedFileItem.file_result=a.body.data.file_result,t.exam_files.push(t.editedFileItem)),activateAlert(a.body.message,a.body.status),t.add_file_loading=!1,e.closeFileExam()},a=>{t.add_file_loading=!1,e.closeFileExam()})},saveRecipe(){var e=this,t=e.recipes;t.add_loading=!0;let a=t.editedItem;if(a.patient_id=e.editedItem.patient_id,t.editedIndex>-1){var i=api_url+"recipes/update";e.$http.post(i,a).then(a=>{activateAlert(a.body.message,a.body.status),t.add_loading=!1,"success"==a.body.status&&(Object.assign(t.items[t.editedIndex],t.editedItem),e.closeRecipe())},a=>{t.add_loading=!1,e.closeRecipe()})}else{i=api_url+"recipes/create";e.$http.post(i,a).then(a=>{activateAlert(a.body.message,a.body.status),t.add_loading=!1,"success"==a.body.status&&(t.editedItem.recipe_id=a.body.data.recipe_id,t.editedItem.registered_at=moment().format("YYYY-MM-DD"),t.items.push(t.editedItem),e.closeRecipe())},a=>{t.add_loading=!1,e.closeRecipe()})}},saveReport(){var e=this,t=e.reports;t.add_loading=!0;let a=t.editedItem;if(a.patient_id=e.editedItem.patient_id,t.editedIndex>-1){var i=api_url+"reports/update";e.$http.post(i,a).then(a=>{activateAlert(a.body.message,a.body.status),t.add_loading=!1,"success"==a.body.status&&(Object.assign(t.items[t.editedIndex],t.editedItem),e.closeReport())},a=>{t.add_loading=!1,e.closeReport()})}else{i=api_url+"reports/create";e.$http.post(i,a).then(a=>{activateAlert(a.body.message,a.body.status),t.add_loading=!1,"success"==a.body.status&&(t.editedItem.report_id=a.body.data.report_id,t.editedItem.registered_at=moment().format("YYYY-MM-DD"),t.items.push(t.editedItem),e.closeReport())},a=>{t.add_loading=!1,e.closeReport()})}},downloadRecipe(e){var t=this;t.recipes;let a=Object.assign({},e);a.patient=t.editedItem,a.patient.age=moment().diff(a.patient.birthdate,"years");var i=api_url+"recipes/download";t.$http.post(i,a).then(e=>{if("success"==e.body.status){var t=e.body.data,i=document.createElement("a");i.href=t.content,document.body.append(i),i.download="recipe-"+a.appointment_date+".pdf",i.click(),i.remove()}},e=>{})},downloadReport(e){var t=this;t.reports;let a=Object.assign({},e);a.meta.anthropometry.item.bmi,a.meta.anthropometry.item.cs="N/A",parseFloat(a.meta.anthropometry.item.weight)>0&&parseFloat(a.meta.anthropometry.item.height)>0&&(a.meta.anthropometry.item.bmi=t.getBMI(a.meta.anthropometry.item.weight,a.meta.anthropometry.item.height,a.meta.anthropometry.item.weight_suffix,a.meta.anthropometry.item.height_suffix).replace("kg/m2",""),a.meta.anthropometry.item.cs=t.getCS(a.meta.anthropometry.item.weight,a.meta.anthropometry.item.height,a.meta.anthropometry.item.weight_suffix,a.meta.anthropometry.item.height_suffix).replace("m2",""));var i=0,r=0,n=0,s=0,o=0,p=0,d=0;a.meta.vital_signs.takes.forEach(e=>{p+=(e.pa_left_arm1_average+e.pa_right_arm1_average)/2,d+=(e.pa_left_arm2_average+e.pa_right_arm2_average)/2,0!=parseInt(e.frc)&&(r+=1,n+=parseInt(e.frc)),0!=parseInt(e.breathing_rate)&&(s++,o+=parseInt(e.breathing_rate))}),o=s>1?o/s:o,n=n>1?n/r:n,p/=3,d/=3,i=`${p} / ${d}`,a.meta.vital_signs.ta_average=i,a.meta.vital_signs.breathing_rate=o,a.meta.vital_signs.frc=n,a.patient=t.editedItem,a.patient.age=moment().diff(a.patient.birthdate,"years");var _=api_url+"reports/download";t.$http.post(_,a).then(e=>{if("success"==e.body.status){var t=e.body.data,i=document.createElement("a");i.href=t.content,document.body.append(i),i.download="informe-"+a.appointment_date+".pdf",i.click(),i.remove()}},e=>{})},calcVitalSigns(){var e=this,t={sitting:{pa_suffix:"mmHg",br_suffix:"rpm",t_suffix:"°C",frc_suffix:"lat x min",frc:e.patient_vital_signs.takes[0].frc,pa_right_arm1:e.patient_vital_signs.takes[0].pa_right_arm1_average,pa_right_arm2:e.patient_vital_signs.takes[0].pa_right_arm2_average,pa_left_arm1:e.patient_vital_signs.takes[0].pa_left_arm1_average,pa_left_arm2:e.patient_vital_signs.takes[0].pa_left_arm2_average,breathing_rate:e.patient_vital_signs.takes[0].breathing_rate,temperature:e.patient_vital_signs.temperature,sat:e.patient_vital_signs.sat},lying_down:{pa_suffix:"mmHg",br_suffix:"rpm",t_suffix:"°C",frc_suffix:"lat x min",frc:e.patient_vital_signs.takes[1].frc,pa_right_arm1:e.patient_vital_signs.takes[1].pa_right_arm1_average,pa_right_arm2:e.patient_vital_signs.takes[1].pa_right_arm2_average,pa_left_arm1:e.patient_vital_signs.takes[1].pa_left_arm1_average,pa_left_arm2:e.patient_vital_signs.takes[1].pa_left_arm2_average,breathing_rate:e.patient_vital_signs.takes[1].breathing_rate,temperature:e.patient_vital_signs.temperature,sat:e.patient_vital_signs.sat},standing:{pa_suffix:"mmHg",br_suffix:"rpm",t_suffix:"°C",frc_suffix:"lat x min",frc:e.patient_vital_signs.takes[0].frc,pa_right_arm1:e.patient_vital_signs.takes[0].pa_right_arm1_average,pa_right_arm2:e.patient_vital_signs.takes[2].pa_right_arm2_average,pa_left_arm1:e.patient_vital_signs.takes[2].pa_left_arm1_average,pa_left_arm2:e.patient_vital_signs.takes[2].pa_left_arm2_average,breathing_rate:e.patient_vital_signs.takes[2].breathing_rate,temperature:e.patient_vital_signs.temperature,sat:e.patient_vital_signs.sat}},a=api_url+"vital-signals/update";t.patient_id=e.editedItem.patient_id,t.appointment_id=e.patient_appointments.current_appointment.appointment_id,t.takes=e.patient_vital_signs.takes,e.$http.post(a,t).then(a=>{activateAlert(a.body.message,a.body.status),"success"==a.body.status&&(e.patient_vital_signs.results[0]=t,e.patient_vital_signs.show_results=!0)},e=>{})},getDoctors(){var e=this,t=api_url+"members/get-doctors";0==e.patient_appointments.doctors.length&&(e.patient_appointments.select=!0,e.$http.get(t).then(t=>{e.patient_appointments.select=!1,e.patient_appointments.doctors=t.body},t=>{e.patient_appointments.select=!1}))},getDoctorFullName(e){var t=this.patient_appointments,a=t.doctors.filter(t=>t.user_id==e);return a[0].full_name},getRiskFactorData(e){var t=this.patient_risk_factors.risk_factors_list.items,a=t.filter(t=>t.name==e);return a},filterExamsByName(e){var t=this.patient_laboratory_exams.exams.find(t=>t.name==e);return t},showExamInfo(e){switch(this.showExamResults(e),e.name){case"Colesterol LDL":var t=this,a=api_url+"medical-exams/get",i={exam_id:t.filterExamsByName("Colesterol Total").exam_id,patient_id:t.editedItem.patient_id},r={exam_id:t.filterExamsByName("Colesterol HDL").exam_id,patient_id:t.editedItem.patient_id},n={exam_id:t.filterExamsByName("Triglicerídos").exam_id,patient_id:t.editedItem.patient_id};t.$http.post(a,i).then(e=>{t.patient_laboratory_exams.formulas.cholesterol_ldl.vars.total_cholesterol=e.body.length>0?e.body[e.body.length-1].results:0},e=>{}),
t.$http.post(a,r).then(e=>{t.patient_laboratory_exams.formulas.cholesterol_ldl.vars.c_HDL=e.body.length>0?e.body[e.body.length-1].results:0},e=>{}),t.$http.post(a,n).then(e=>{t.patient_laboratory_exams.formulas.cholesterol_ldl.vars.triglyceride_level=e.body.length>0?e.body[e.body.length-1].results:0},e=>{});break;case"Colesterol No HDL":t=this,a=api_url+"medical-exams/get",i={exam_id:t.filterExamsByName("Colesterol Total").exam_id,patient_id:t.editedItem.patient_id};var s={exam_id:t.filterExamsByName("Colesterol No HDL").exam_id,patient_id:t.editedItem.patient_id};t.$http.post(a,i).then(e=>{t.patient_laboratory_exams.formulas.cholesterol_no_hdl.vars.total_cholesterol=e.body.length>0?e.body[e.body.length-1].results:0},e=>{}),t.$http.post(a,s).then(e=>{t.patient_laboratory_exams.formulas.cholesterol_no_hdl.vars.c_HDL=e.body.length>0?e.body[e.body.length-1].results:0},e=>{})}},showExamResults(e){var t=this,a=t.patient_laboratory_exams;a.laboratory_exam=!0,a.selectedExam=e;var i=api_url+"medical-exams/get",r={exam_id:e.exam_id,patient_id:this.editedItem.patient_id};t.$http.post(i,r).then(e=>{a.exam_results=e.body},e=>{})},showComparisonExamResults(e){var t=this,a=t.comparison.laboratory_exams;a.loading=!0,a.selectedExam=e,a.examsListed=!0,a.current_patient=[],a.patient_to_compare=[];var i=api_url+"medical-exams/get/comparison",r={exam_id:e.exam_id,current_patient_id:t.comparison.patient_selected.patient_id,patient_to_compare_id:t.comparison.patient_to_compare.patient_id};t.$http.post(i,r).then(e=>{if(e.body.hasOwnProperty("current_patient_items")&&e.body.hasOwnProperty("patient_to_compare_items")){var t=e.body.current_patient_items.length>1?e.body.current_patient_items[e.body.current_patient_items.length-1]:e.body.current_patient_items[0];a.current_patient.push(t);var i=e.body.patient_to_compare_items.length>1?e.body.patient_to_compare_items[e.body.patient_to_compare_items.length-1]:e.body.patient_to_compare_items[0];a.patient_to_compare.push(i)}a.loading=!1},e=>{a.loading=!1})},showFileExamResults(e){var t=this,a=t.patient_laboratory_exams;a.laboratory_exam=!0,a.selectedExam=e;var i=api_url+"medical-exams/get-exam-files",r={exam_id:e.exam_id,patient_id:this.editedItem.patient_id};t.$http.post(i,r).then(e=>{a.exam_files=e.body},e=>{})},assignGeneralVars(){var e=this,t=e.patient_risk_factors;""!=t.selectedForm.calc_name&&e.getCurrentFactorRisk(),t.detail_table_rf_selected=Object.assign({},t.selectedForm),e.setAnthropometryVars(),t.selectedForm.obj.vars.age=moment(e.editedItem.birthdate,"YYYY-MM-DD").fromNow().split(" ")[1],t.selectedForm.obj.vars.gender=e.editedItem.gender},getBMI(e,t,a,i){if(0!=t&&0!=e){e="lb"==a?e/2.205:e,t="in"==i?2.54*t:t,t=Math.pow(t/100,2);var r=Math.round(10*e/t)/10;return NaN!=typeof r&&(r+=" kg/m2"),r}return""},getCS(e,t,a,i){if(0!=t&&0!=e){e="lb"==a?e/2.205:e,t="in"==i?2.54*t:t;var r=3600,n=Math.pow(t*e/r,.5),s=Math.round(100*n)/100;return NaN!=typeof s&&(s+=" m2"),s}return""},getVitalSignalsAverage(e,t){var a=0;if(sitting=e.sitting,lying_down=e.lying_down,standing=e.standing,"left"==t){0==parseInt(sitting.pa_left_arm1)&&0==parseInt(sitting.pa_left_arm2)||a++,0==parseInt(lying_down.pa_left_arm1)&&0==parseInt(lying_down.pa_left_arm2)||a++,0==parseInt(standing.pa_left_arm1)&&0==parseInt(standing.pa_left_arm2)||a++;var i=Math.round((parseInt(sitting.pa_left_arm1)+parseInt(lying_down.pa_left_arm1)+parseInt(standing.pa_left_arm1))/a),r=Math.round((parseInt(sitting.pa_left_arm2)+parseInt(lying_down.pa_left_arm2)+parseInt(standing.pa_left_arm2))/a),n=i-r,s=Math.round(r- -(i-r)/a);return{pulse_pressure:n,pam:s}}if("right"==t){0==parseInt(sitting.pa_right_arm1)&&0==parseInt(sitting.pa_right_arm2)||a++,0==parseInt(lying_down.pa_right_arm1)&&0==parseInt(lying_down.pa_right_arm2)||a++,0==parseInt(standing.pa_right_arm1)&&0==parseInt(standing.pa_right_arm2)||a++;i=Math.round((parseInt(sitting.pa_right_arm1)+parseInt(lying_down.pa_right_arm1)+parseInt(standing.pa_right_arm1))/a),r=Math.round((parseInt(sitting.pa_right_arm2)+parseInt(lying_down.pa_right_arm2)+parseInt(standing.pa_right_arm2))/a),n=i-r,s=Math.round(r- -(i-r)/a);return{pulse_pressure:n,pam:s}}},getAverage(e,t,a){var i=this,r=0,n=0;return e.forEach(e=>{if(0==parseInt(e)||null==typeof e||""==e)return!1;r++;var t=parseInt(e);n+=t}),r>0&&(n=Math.round(n/r)),i.patient_vital_signs.takes[t][a]=n,n},getFRCAverage(e){var t=0,a=0;return e.forEach(e=>{if(0==parseInt(e)||null==typeof e||""==e)return!1;t++;var i=parseInt(e);a+=i}),t>0&&(a=Math.round(a/t)),a},getSDverage(e){var t=0,a=0;return e.forEach(e=>{if(0==parseInt(e)||null==typeof e||""==e)return!1;t++;var i=parseInt(e);a+=i}),t>0&&(a=Math.round(a/t)),a},calcCholesterolLDL(){var e=this;if(!e.$refs.ple_formulas_cholesterol_ldl.validate())return!1;var t=e.patient_laboratory_exams.formulas.cholesterol_ldl;e.patient_laboratory_exams.formulas.cholesterol_ldl.results=parseInt(t.vars.total_cholesterol)-parseInt(t.vars.c_HDL),e.patient_laboratory_exams.editedItem.results=parseInt(t.vars.total_cholesterol)-parseInt(t.vars.c_HDL)-parseInt(t.vars.triglyceride_level/5)},calcCholesterolNoHDL(){var e=this,t=e.patient_laboratory_exams.formulas.cholesterol_no_hdl;e.patient_laboratory_exams.formulas.cholesterol_ldl.results=parseInt(t.vars.total_cholesterol)-parseInt(t.vars.c_HDL),e.patient_laboratory_exams.editedItem.results=parseInt(t.vars.total_cholesterol)-parseInt(t.vars.c_HDL)},calcQTC(){var e=this,t=e.patient_electro_cardiogram.content,a=t.qt,i=t.fc;t.rr=60/parseInt(i),t.rr=parseFloat(t.rr),t.qtrau=656/(1+parseInt(i)/100),t.qtrau=parseInt(t.qtrau),t.qtbaz=parseInt(a)/Math.sqrt(parseFloat(t.rr)),t.qtbaz=parseInt(t.qtbaz),t.qtfra=parseInt(a)+.154*(1-parseFloat(t.rr)),t.qtfra=parseInt(t.qtfra),t.qtfri=parseInt(a)/Math.pow(parseFloat(t.rr),1/3),t.qtfri=parseInt(t.qtfri),t.qtcal=parseInt(a)/Math.pow(parseFloat(t.rr)*parseFloat(t.rr),.2),t.qtcal=parseInt(t.qtcal)},fagerstromTest(){var e=this,t=e.patient_life_style.calc.fagerstrom,a=t.vars,i=a.input1+a.input2+a.input3+a.input4+a.input5+a.input6;return t.result=i,i},getFagerStromScoreDescription(e){var t=this,a=e?parseInt(t.patient_life_style.calc.fagerstrom.result):parseInt(t.patient_life_style.editedItem.smoking.fagerstrom_test),i="";return i=""==a?"":a>=0&&a<=2?"Dependencia MUY BAJA":a>=3&&a<=4?"Dependencia BAJA":5==a?"Dependencia MODERADA":a>=6&&a<=7?"Dependencia ALTA":a>=8&&a<=10?"Dependencia ALTA":"",i},pregnancyAlert(e){var t=this,a=e,i="",r=a.find(e=>e.includes("BRA")||e.includes("IECAS"));return i=null!=r&&r.length>0&&"F"==t.editedItem.gender,i},gfrCkdEpiFx(){var e=this,t=e.editedItem,a=t.gender,i=e.patient_laboratory_exams.formulas.filt_glom,r="M"==a?1:1.018,n="M"==a?-.411:-.329,s="M"==a?.9:.7,o=i.vars.serum_creatinine,p=i.vars.race,d=parseFloat(moment().diff(t.birthdate,"years")),_=141*Math.pow(Math.min(o/s,1),n)*Math.pow(Math.max(o/s,1),-1.209)*Math.pow(.993,d)*r*p;return e.patient_laboratory_exams.formulas.filt_glom.results=_.toFixed(2),e.patient_laboratory_exams.editedItem.results=_.toFixed(2),_.toFixed(2)},gfrRrmdFx(){var e=this,t=e.editedItem,a=t.gender,i=e.patient_laboratory_exams.formulas.egfr_mdr_ckdepi,r="M"==a?1:.742,n=i.vars.serum_creatinine,s=i.vars.race,o=parseFloat(moment().diff(t.birthdate,"years"));Math.pow(n,-1.154),Math.pow(o,-.203);var p=175*Math.pow(n,-1.154)*Math.pow(o,-.203)*r*s;return e.patient_laboratory_exams.formulas.egfr_mdr_ckdepi.results=p.toFixed(2),e.patient_laboratory_exams.editedItem.results=p.toFixed(2),p.toFixed(2)},assignGFRVars(e){var t=this.patient_laboratory_exams.formulas,a=this.patient_laboratory_exams.formulas.egfr_mdr_ckdepi.vars;"CKD-EPI"==e&&(t.filt_glom.vars.serum_creatinine=a.serum_creatinine,t.filt_glom.vars.race=1.21==a.race?1.159:1)},prevImage(e){const t=e.target.files[0],a=new FileReader;a.readAsDataURL(t),a.onload=(e=>{this.editedItem.avatar=t,this.previewImage=e.target.result,this.upload_button=!0})},uploadImage(e){var t=this;let a=new FormData;var i=api_url+"patients/update-avatar";t.image_loading=!0,t.image_loading=!0,a.append("patient_id",t.editedItem.patient_id),a.append("avatar",t.editedItem.avatar),t.$http.post(i,a).then(e=>{t.image_loading=!1,"success"==e.body.status&&(t.upload_button=!1,t.editedItem.avatar=e.body.data.avatar),activateAlert(e.body.message,e.body.status)},e=>{})},diagnosticDateCheck(e){if(!e.detected_previously){if("Menos de un año"==e.diagnostic_date||"Entre 1 y 2 años"==e.diagnostic_date||"3 a 4 años"==e.diagnostic_date||"4 a 5 años"==e.diagnostic_date||"Más de 5 años"==e.diagnostic_date||"Más de 10 años"==e.diagnostic_date)return e.diagnostic_date=moment().format("YYYY[-]MM[-]DD"),!0;e.diagnostic_date=""==e.diagnostic_date?moment().format("YYYY[-]MM[-]DD"):e.diagnostic_date}},fromNow:e=>moment(e).format("LL"),getCurrentDate:e=>moment().format("YYYY-MM-DD"),addItemToArray(e,t){""==e&&null==typeof e||t.push(e)},addObjectToArray(e,t){""==e&&null==typeof e||t.push({name:e,group:"Group 4"})},getClinicExamsActive(e){var t=e.filter((e,t)=>parseInt(e.value));return t},getTimeDiff:e=>moment().diff(e,"years"),getOnlyYear:e=>""==e?"":moment(e).format("YYYY"),displayOnlyYear:e=>e.substring(0,4),resetPatientInformation(){this.patient_appointments.appointments=[]},searchFRTreatment(e){var t=this,a=t.patient_risk_factors;if(a.rf.hasOwnProperty("created_at")&&a.risk_factors_diagnostics.length>1){var i=a.risk_factors_diagnostics.length,r=a.rf.hasOwnProperty("created_at")?i-2:i-1,n=a.risk_factors_diagnostics[r].risk_factors.find(t=>t.name==e);return void 0!==n&&"Sí"==n.diagnostic&&"Sí"==n.has_treatment?n.comment:""}return""},hasPreviousFRTreatment(e){var t=this,a=t.patient_risk_factors;if(!t.patient_appointments.previous_appointment.hasOwnProperty("appointment_id"))return!1;if(a.risk_factors_diagnostics.length>1){var i=a.risk_factors_diagnostics.length,r=a.rf.hasOwnProperty("created_at")?i-2:i-1,n=a.risk_factors_diagnostics[r].risk_factors.find(t=>t.name==e);return void 0!==n&&"Sí"==n.diagnostic&&"Sí"==n.has_treatment}},previousFRTreatmentDescription(e,t,a=!1){var i=this,r=i.patient_risk_factors;if(r.rf.hasOwnProperty("created_at")&&r.risk_factors_diagnostics.length>1){var n=r.risk_factors_diagnostics.length,s=r.risk_factors_diagnostics[n-2].risk_factors.find(t=>t.name==e);return void 0!==s&&"Sí"==s.diagnostic&&"Sí"==s.has_treatment&&s.comment!=t&&""!=t?a?"Previo: "+s.comment:"Tratamiento cambiado de "+s.comment+" a "+t:""}n=r.risk_factors_diagnostics.length;return void 0!==r.risk_factors_diagnostics[n-1]?(s=r.risk_factors_diagnostics[n-1].risk_factors.find(t=>t.name==e),void 0!==s&&"Sí"==s.diagnostic&&"Sí"==s.has_treatment&&s.comment!=t&&""!=t?a?"Previo: "+s.comment:"Tratamiento cambiado de "+s.comment+" a "+t:""):""},getPercentDifference(e,t,a=!1){var i=this,r=i.patient_appointments;switch(t=void 0===t?{}:t,e){case"anthropometry":if(a){var n=i.comparison.anthropometry;if(n.current_patient.hasOwnProperty("patient_id")&&n.patient_to_compare.hasOwnProperty("patient_id")){var s=t.patient_to_compare?n.patient_to_compare:n.current_patient,o=t.patient_to_compare?n.current_patient:n.patient_to_compare,p=parseInt(s.abdominal_waist),d=parseInt(s.height),_=parseInt(s.weight),c=parseFloat(i.getBMI(_,d,s.weight_suffix,s.height_suffix).replace(" kg/m2","")),m=parseFloat(i.getCS(_,d,s.weight_suffix,s.height_suffix).replace(" m2","")),l=parseInt(o.abdominal_waist),u=parseInt(o.height),h=parseInt(o.weight),g=parseFloat(i.getBMI(h,u,o.weight_suffix,o.height_suffix).replace(" kg/m2","")),f=parseFloat(i.getCS(h,u,o.weight_suffix,o.height_suffix).replace(" m2","")),y={numeric:_-h,percent:(_-h)/h*100},v={numeric:d-u,percent:(d-u)/u*100},b={numeric:p-l,percent:(p-l)/l*100},x={numeric:c-g,percent:(c-g)/g*100},I={numeric:m-f,percent:(m-f)/f*100};return{weight:y,height:v,abdominal_waist:b,bmi:x,cs:I}}return{}}n=i.patient_anthropometry;var k={weight:0,height:0,abdominal_waist:0,bmi:0,cs:0};if(n.history.length>1){var w=void 0!==t&&t.hasOwnProperty("anthropometry")?t.anthropometry:n.editedItem,A=r.appointments.indexOf(r.appointments.find(e=>e.appointment_id==w.appointment_id)),O=r.appointments[A-1];if(null==O)return k;var D=n.history.find(e=>e.appointment_id==O.appointment_id),F=n.history.indexOf(w);if(D=null==D?n.history[F-1]:D,void 0!==D&&D.hasOwnProperty("appointment_id")){t.hasOwnProperty("anthropometry");p=parseInt(w.abdominal_waist),d=parseInt(w.height),_=parseInt(w.weight),c=parseFloat(i.getBMI(_,d,n.editedItem.weight_suffix,n.editedItem.height_suffix).replace(" kg/m2","")),m=parseFloat(i.getCS(_,d,n.editedItem.weight_suffix,n.editedItem.height_suffix).replace(" m2","")),l=parseInt(D.abdominal_waist),u=parseInt(D.height),h=parseInt(D.weight),g=parseFloat(i.getBMI(h,u,D.weight_suffix,D.height_suffix).replace(" kg/m2","")),f=parseFloat(i.getCS(h,u,D.weight_suffix,D.height_suffix).replace(" m2","")),y={numeric:_-h,percent:(_-h)/h*100},v={numeric:d-u,percent:(d-u)/u*100},b={numeric:p-l,percent:(p-l)/l*100},x={numeric:c-g,percent:(c-g)/g*100},I={numeric:m-f,percent:(m-f)/f*100};return{weight:y,height:v,abdominal_waist:b,bmi:x,cs:I}}return k}return k;case"vital-signals":if(a){n=i.comparison.vital_signs;if(n.current_patient.hasOwnProperty("patient_id")&&n.patient_to_compare.hasOwnProperty("patient_id")){s=t.patient_to_compare?n.patient_to_compare:n.current_patient,o=t.patient_to_compare?n.current_patient:n.patient_to_compare;var E=parseInt(s.sat),M=parseInt(s.sat),P=parseInt(o.lying_down.temperature),N=parseInt(o.lying_down.sat),S={numeric:E-P,percent:(E-P)/P*100},z={numeric:M-N,percent:(M-N)/N*100};if(J={},t.hasOwnProperty("index")){var q=s.takes[t.index],C=o.takes[t.index],Y=parseInt(q.breathing_rate),T=parseInt(q.frc),$=parseInt(C.breathing_rate),R=parseInt(C.frc),j={};if(t.hasOwnProperty("arm")){var L=parseInt(q[t.arm]),H=parseInt(C[t.arm]);j={numeric:L-H,percent:(L-H)/H*100}}var B={numeric:Y-$,percent:(Y-$)/$*100},G={numeric:T-R,percent:(T-R)/R*100};J={br:B,frc:G,arm:j}}return{temperature:S,sat:z,take:J}}return{}}n=i.patient_vital_signs;var J={br:{numeric:0,percent:0},frc:{numeric:0,percent:0},arm:{numeric:0,percent:0}},V={pam:{left:{numeric:0,percent:0},right:{numeric:0,percent:0}},pulse_pressure:{left:{numeric:0,percent:0},right:{numeric:0,percent:0}},br:{numeric:0,percent:0},frc:{numeric:0,percent:0}};if(n.records.length>0){var Q=t.hasOwnProperty("vital_signals")?t.vital_signals:{appointment_id:n.appointment_id,takes:n.takes},U=void 0===Q.appointment_id?null:n.records.indexOf(n.records.find(e=>e.appointment_id==Q.appointment_id)),K=null!=U?n.records[U-1]:n.records[n.records.length-1];if(void 0!==K&&Q.appointment_id!=K.appointment_id){E=void 0===Q.temperature?parseInt(Q.temperature):parseInt(Q.lying_down.temperature),M=void 0===Q.sat?parseInt(Q.sat):parseInt(Q.lying_down.sat),P=parseInt(K.lying_down.temperature),N=parseInt(K.lying_down.sat),S={numeric:E-P,percent:(E-P)/P*100},z={numeric:M-N,percent:(M-N)/N*100};if(t.hasOwnProperty("method")&&"average"==t.method){var Z=i.getVitalSignalsAverage(Q,"left").pam,W=i.getVitalSignalsAverage(K,"left").pam,X=i.getVitalSignalsAverage(Q,"right").pam,ee=i.getVitalSignalsAverage(K,"right").pam,te=i.getFRCAverage([Q.takes[0].frc,Q.takes[1].frc,Q.takes[2].frc]),ae=i.getFRCAverage([Q.standing.frc,Q.sitting.frc,Q.lying_down.frc]),ie=i.getFRCAverage([Q.takes[0].breathing_rate,Q.takes[1].breathing_rate,Q.takes[2].breathing_rate]),re=i.getFRCAverage([Q.standing.breathing_rate,Q.sitting.breathing_rate,Q.lying_down.breathing_rate]),ne=i.getVitalSignalsAverage(Q,"left").pulse_pressure,se=i.getVitalSignalsAverage(K,"left").pulse_pressure,oe=i.getVitalSignalsAverage(Q,"right").pulse_pressure,pe=i.getVitalSignalsAverage(K,"right").pulse_pressure,de=Z-W,_e=X-ee,ce=ie-re,me=te-ae,le=ne-se,ue=oe-pe,he={numeric:de,percentage:de/W*100},ge={numeric:_e,percentage:_e/ee*100},fe={numeric:ce,percentage:ce/re*100},ye={numeric:me,percentage:me/ae*100},ve={numeric:le,percentage:le/se*100},be={numeric:ue,percentage:ue/pe*100};return{temperature:S,sat:z,take:J,averages:{pam:{left:he,right:ge},pulse_pressure:{left:ve,right:be},br:fe,frc:ye}}}if(t.hasOwnProperty("index")){q=Q.takes[t.index],C=K.takes[t.index],Y=parseInt(q.breathing_rate),T=parseInt(q.frc),$=parseInt(C.breathing_rate),R=parseInt(C.frc),j={};if(t.hasOwnProperty("arm")){L=parseInt(q[t.arm]),H=parseInt(C[t.arm]);j={numeric:L-H,percent:(L-H)/H*100}}B={numeric:Y-$,percent:(Y-$)/$*100},G={numeric:T-R,percent:(T-R)/R*100};J={br:B,frc:G,arm:j}}return{temperature:S,sat:z,take:J,averages:V}}return{temperature:{numeric:0,percent:0},sat:{numeric:0,percent:0},take:J,averages:V}}return{temperature:{numeric:0,percent:0},sat:{numeric:0,percent:0},take:J,averages:V};case"physical-exam":if(a){n=i.comparison.physical_exams;if(n.current_patient.hasOwnProperty("patient_id")&&n.patient_to_compare.hasOwnProperty("patient_id")){s=t.patient_to_compare?n.patient_to_compare:n.current_patient,o=t.patient_to_compare?n.current_patient:n.patient_to_compare;var xe=parseInt(s.content.pvy.swivel_stop),Ie=parseInt(s.content.edema.range),ke=parseInt(o.content.pvy.swivel_stop),we=parseInt(o.content.edema.range),Ae={},Oe={mid:{},mii:{},symmetrical_range:{}};if(t.hasOwnProperty("soplo")){var De=t.soplo,Fe=o.content.auscultation.soplo.items[t.i];if(void 0!==Fe){var Ee=parseInt(De.intensity_foco),Me=parseInt(Fe.intensity_foco),Pe=Ee-Me,Ne={numeric:Pe,percent:Pe/(-1==Math.sign(Pe)?Ee:Me)*100};Ae=Ne}else Ae={numeric:0,percent:0}}if(t.hasOwnProperty("pp")){var Se=parseInt(s.content.peripheral_pulses.mii),ze=parseInt(s.content.peripheral_pulses.mid),qe=parseInt(s.content.peripheral_pulses.symmetrical_range),Ce=parseInt(o.content.peripheral_pulses.mii),Ye=parseInt(o.content.peripheral_pulses.mid),Te=parseInt(o.content.peripheral_pulses.symmetrical_range),$e=Se-Ce,Re=ze-Ye,je=qe-Te,Le={numeric:$e,percent:$e/(-1==Math.sign($e)?Se:Ce)*100},He={numeric:Re,percent:Re/(-1==Math.sign(Re)?ze:Ye)*100},Be={numeric:je,percent:je/(-1==Math.sign(je)?qe:Te)*100};Oe={mid:He,mii:Le,symmetrical_range:Be}}var Ge=xe-ke,Je=Ie-we,Ve={numeric:Ge,percent:Ge/(-1==Math.sign(Ge)?xe:ke)*100},Qe={numeric:Je,percent:Je/(-1==Math.sign(Je)?Ie:we)*100};return{pvy:{swivel_stop:Ve},auscultation:{soplo:Ae},pp:Oe,edema:Qe}}return{}}n=i.patient_physical_exam;if(r.previous_appointment.hasOwnProperty("appointment_id")){var Ue=n.items[n.items.length-2];if(Ue.hasOwnProperty("appointment_id")){xe=parseInt(n.content.pvy.swivel_stop),Ie=parseInt(n.content.edema.range),ke=parseInt(Ue.content.pvy.swivel_stop),we=parseInt(Ue.content.edema.range),Ae={},Oe={mid:{},mii:{},symmetrical_range:{}};if(t.hasOwnProperty("soplo")){Ee=parseInt(t.soplo.intensity_foco),Me=parseInt(Ue.content.auscultation.soplo.items[t.i].intensity_foco),Ne={numeric:Ee-Me,percent:(Ee-Me)/Me*100};Ae=Ne}if(t.hasOwnProperty("pp")){Se=parseInt(n.content.peripheral_pulses.mii),ze=parseInt(n.content.peripheral_pulses.mid),qe=parseInt(n.content.peripheral_pulses.symmetrical_range),Ce=parseInt(Ue.content.peripheral_pulses.mii),Ye=parseInt(Ue.content.peripheral_pulses.mid),Te=parseInt(Ue.content.peripheral_pulses.symmetrical_range),Le={numeric:Se-Ce,percent:(Se-Ce)/Ce*100},He={numeric:ze-Ye,percent:(ze-Ye)/Ye*100},Be={numeric:qe-Te,percent:(qe-Te)/Te*100};Oe={mid:He,mii:Le,symmetrical_range:Be}}Ve={numeric:xe-ke,percent:(xe-ke)/ke*100},Qe={numeric:Ie-we,percent:(Ie-we)/we*100};return{pvy:{swivel_stop:Ve},auscultation:{soplo:Ae},pp:Oe,edema:Qe}}return{}}return{};case"electro-cardiogram":if(a){n=i.comparison.electro_cardiogram;if(n.current_patient.hasOwnProperty("patient_id")){s=t.patient_to_compare?n.patient_to_compare:n.current_patient,o=t.patient_to_compare?n.current_patient:n.patient_to_compare;var Ke=parseInt(s.content.frecuency),Ze=parseInt(s.content.pr),We=parseInt(s.content.axes.qtc),Xe=parseInt(s.content.axes.p),et=parseInt(s.content.axes.qrs),tt=parseInt(s.content.axes.t),at=parseInt(o.content.frecuency),it=parseInt(o.content.pr),rt=parseInt(o.content.axes.qtc),nt=parseInt(o.content.axes.p),st=parseInt(o.content.axes.qrs),ot=parseInt(o.content.axes.t),pt={qtba:{},qtcal:{},qtfra:{},qtfri:{},qtrau:{},rr:{}};if(t.hasOwnProperty("qtc_calc")){var dt=parseInt(s.content.qtbaz),_t=parseInt(s.content.qtcal),ct=parseInt(s.content.qtfra),mt=parseInt(s.content.qtfri),lt=parseInt(s.content.qtrau),ut=parseFloat(s.content.rr),ht=parseInt(o.content.qtbaz),gt=parseInt(o.content.qtcal),ft=parseInt(o.content.qtfra),yt=parseInt(o.content.qtfri),vt=parseInt(o.content.qtrau),bt=parseFloat(o.content.rr);qtbaz_numeric_difference=dt-ht,qtcal_numeric_difference=_t-gt,qtfra_numeric_difference=ct-ft,qtfri_numeric_difference=mt-yt,qtrau_numeric_difference=lt-vt,rr_numeric_difference=ut-bt;var xt={numeric:qtbaz_numeric_difference,percent:qtbaz_numeric_difference/(-1==Math.sign(qtbaz_numeric_difference)?dt:ht)*100},It={numeric:qtbaz_numeric_difference,percent:qtbaz_numeric_difference/(-1==Math.sign(qtbaz_numeric_difference)?_t:gt)*100},kt={numeric:qtfra_numeric_difference,percent:qtfra_numeric_difference/(-1==Math.sign(qtbaz_numeric_difference)?ct:ft)*100},wt={numeric:qtfri_numeric_difference,percent:qtfri_numeric_difference/(-1==Math.sign(qtfri_numeric_difference)?mt:yt)*100},At={numeric:qtrau_numeric_difference,percent:qtrau_numeric_difference/(-1==Math.sign(qtrau_numeric_difference)?lt:vt)*100},Ot={numeric:rr_numeric_difference,percent:rr_numeric_difference/(-1==Math.sign(rr_numeric_difference)?ut:bt)*100};pt={qtcal:It,qtbaz:xt,qtfra:kt,qtfri:wt,qtrau:At,rr:Ot}}frecuency_numeric_difference=Ke-at,pr_numeric_difference=Ze-it,qtc_numeric_difference=We-rt,axes_p_numeric_difference=Xe-nt,axes_qrs_numeric_difference=et-st,axes_t_numeric_difference=tt-ot;var Dt={numeric:frecuency_numeric_difference,percent:frecuency_numeric_difference/(-1==Math.sign(frecuency_numeric_difference)?Ke:at)*100},Ft={numeric:pr_numeric_difference,percent:pr_numeric_difference/(-1==Math.sign(pr_numeric_difference)?Ze:it)*100},Et={numeric:qtc_numeric_difference,percent:qtc_numeric_difference/(-1==Math.sign(pr_numeric_difference)?Ze:it)*100},Mt={numeric:axes_p_numeric_difference,percent:axes_p_numeric_difference/(-1==Math.sign(axes_p_numeric_difference)?Xe:nt)*100},Pt={numeric:axes_qrs_numeric_difference,percent:axes_qrs_numeric_difference/(-1==Math.sign(pr_numeric_difference)?et:st)*100},Nt={numeric:axes_t_numeric_difference,percent:axes_t_numeric_difference/(-1==Math.sign(axes_t_numeric_difference)?tt:ot)*100};return{frecuency:Dt,qtc_r:pt,pr:Ft,qtc:Et,axes:{p:Mt,qrs:Pt,t:Nt}}}return{}}n=i.patient_electro_cardiogram;if(r.previous_appointment.hasOwnProperty("appointment_id")){Ue=n.items[n.items.length-2];if(Ue.hasOwnProperty("appointment_id")){Ke=parseInt(n.content.frecuency),Ze=parseInt(n.content.pr),We=parseInt(n.content.axes.qtc),Xe=parseInt(n.content.axes.p),et=parseInt(n.content.axes.qrs),tt=parseInt(n.content.axes.t),at=parseInt(Ue.content.frecuency),it=parseInt(Ue.content.pr),rt=parseInt(Ue.content.axes.qtc),nt=parseInt(Ue.content.axes.p),st=parseInt(Ue.content.axes.qrs),ot=parseInt(Ue.content.axes.t),pt={qtba:{},qtcal:{},qtfra:{},qtfri:{},qtrau:{},rr:{}};if(t.hasOwnProperty("qtc_calc")){dt=parseInt(n.content.qtbaz),_t=parseInt(n.content.qtcal),ct=parseInt(n.content.qtfra),mt=parseInt(n.content.qtfri),lt=parseInt(n.content.qtrau),ut=parseFloat(n.content.rr),ht=parseInt(Ue.content.qtbaz),gt=parseInt(Ue.content.qtcal),ft=parseInt(Ue.content.qtfra),yt=parseInt(Ue.content.qtfri),vt=parseInt(Ue.content.qtrau),bt=parseFloat(Ue.content.rr),xt={numeric:dt-ht,percent:(dt-ht)/ht*100},It={numeric:_t-gt,percent:(_t-gt)/gt*100},kt={numeric:ct-ft,percent:(ct-ft)/ft*100},wt={numeric:mt-yt,percent:(mt-yt)/yt*100},At={numeric:lt-vt,percent:(lt-vt)/vt*100},Ot={numeric:ut-bt,percent:(ut-bt)/bt*100};pt={qtcal:It,qtbaz:xt,qtfra:kt,qtfri:wt,qtrau:At,rr:Ot}}Dt={numeric:Ke-at,percent:(Ke-at)/at*100},Ft={numeric:Ze-it,percent:(Ze-it)/it*100},Et={numeric:We-rt,percent:(We-rt)/rt*100},Mt={numeric:Xe-nt,percent:(Xe-nt)/nt*100},Pt={numeric:et-st,percent:(et-st)/st*100},Nt={numeric:tt-ot,percent:(tt-ot)/ot*100};return{frecuency:Dt,qtc_r:pt,pr:Ft,qtc:Et,axes:{p:Mt,qrs:Pt,t:Nt}}}return{}}return{};case"history":var St={numeric:0,percent:0};if(a){n=i.comparison.history;var zt={dosis:St,daily_dosis:St};if(void 0!==n.current_patient||void 0!==n.patient_to_compare){s=t.patient_to_compare?n.patient_to_compare:n.current_patient,o=t.patient_to_compare?n.current_patient:n.patient_to_compare;if(void 0!==s&&void 0!==o){if(t.hasOwnProperty("dosis")){var qt=""!=s.history_content.treatments[t.treatment.group][t.treatment.treatment].dosis?parseInt(s.history_content.treatments[t.treatment.group][t.treatment.treatment].dosis):0,Ct=""!=o.history_content.treatments[t.treatment.group][t.treatment.treatment].dosis?parseFloat(o.history_content.treatments[t.treatment.group][t.treatment.treatment].dosis):0,Yt=qt-Ct,Tt={numeric:Yt,percent:Yt/(-1==Math.sign(Yt)?qt:Ct)*100};zt.dosis=Tt}else if(t.hasOwnProperty("daily_dosis")){var $t=parseInt(s.history_content.treatments[t.treatment.group][t.treatment.treatment].daily_dosis),Rt=parseFloat(o.history_content.treatments[t.treatment.group][t.treatment.treatment].daily_dosis),jt=$t-Rt,Lt={numeric:jt,percent:jt/(-1==Math.sign(jt)?$t:Rt)*100};zt.daily_dosis=Lt}return zt}return{dosis:St,daily_dosis:St}}return{dosis:St,daily_dosis:St}}if(r.previous_appointment.hasOwnProperty("appointment_id")){n=i.patient_history;var Ht=n.items.find(e=>e.appointment_id==r.previous_appointment.appointment_id);zt={dosis:St,daily_dosis:St};if(Ht.hasOwnProperty("appointment_id")){if(t.hasOwnProperty("dosis")){qt=""!=n.form.history_content.treatments[t.treatment.group][t.treatment.treatment].dosis?parseInt(n.form.history_content.treatments[t.treatment.group][t.treatment.treatment].dosis):0,Ct=""!=Ht.history_content.treatments[t.treatment.group][t.treatment.treatment].dosis?parseFloat(Ht.history_content.treatments[t.treatment.group][t.treatment.treatment].dosis):0,Tt={numeric:qt-Ct,percent:(qt-Ct)/Ct*100};zt.dosis=Tt}else if(t.hasOwnProperty("daily_dosis")){$t=parseInt(n.form.history_content.treatments[t.treatment.group][t.treatment.treatment].daily_dosis),Rt=parseFloat(Ht.history_content.treatments[t.treatment.group][t.treatment.treatment].daily_dosis),Lt={numeric:$t-Rt,percent:($t-Rt)/Rt*100};zt.daily_dosis=Lt}return zt}return{dosis:St,daily_dosis:St}}break;case"laboratory-exam":if(a){n=i.comparison.laboratory_exams,St={numeric:0,percent:0};if(null!=n.current_patient[0]&&n.current_patient[0].hasOwnProperty("patient_id")&&null!=n.patient_to_compare[0]&&n.patient_to_compare[0].hasOwnProperty("patient_id")){s=t.patient_to_compare?n.patient_to_compare[0]:n.current_patient[0],o=t.patient_to_compare?n.current_patient[0]:n.patient_to_compare[0],zt={exam:St};var Bt=parseInt(s.results),Gt=parseFloat(o.results),Jt=Bt-Gt,Vt={numeric:Jt,percent:Jt/(-1==Math.sign(Jt)?Bt:Gt)*100};return zt.exam=Vt,zt}return{exam:St}}n=i.patient_laboratory_exams,St={numeric:0,percent:0};if(r.previous_appointment.hasOwnProperty("appointment_id")){var Qt=n.exam_results.indexOf(t.item),Ut=n.exam_results[Qt],Kt=n.exam_results[Qt-1];zt={exam:St};if(void 0!==Kt&&Kt.hasOwnProperty("appointment_id")){Bt=parseInt(Ut.results),Gt=parseFloat(Kt.results),Vt={numeric:Bt-Gt,percent:(Bt-Gt)/Gt*100};return zt.exam=Vt,zt}return{exam:St}}return{exam:St};case"risk-factor-calc-list":St={numeric:0,percent:0};if(a){n=i.comparison.diagnostics.risk_factors,zt={dosis:St,daily_dosis:St};if(n.current_patient.length>0||n.patient_to_compare.length>0){s=t.patient_to_compare?n.patient_to_compare:n.current_patient,o=t.patient_to_compare?n.current_patient:n.patient_to_compare;if(void 0!==s&&void 0!==o){var Zt=t.item,Wt=o.find(e=>e.name==Zt.name);zt={calc:St};if(void 0!==Wt&&Wt.hasOwnProperty("appointment_id")){Bt=parseFloat(Zt.results),Gt=parseFloat(Wt.results);var Xt=Bt-Gt,ea={numeric:Xt,percent:Xt/(-1==Math.sign(Xt)?Bt:Gt)*100};return zt.calc=ea,zt}return{calc:St}}return{dosis:St,daily_dosis:St}}return{dosis:St,daily_dosis:St}}n=i.patient_risk_factors;if(n.risk_factors_list.items.length>1){Zt=t.item;var ta=r.appointments.indexOf(r.appointments.find(e=>e.appointment_id==Zt.appointment_id)),aa=r.appointments[ta-1];if(console.log(Zt,aa),null==aa)return{calc:St};Wt=n.risk_factors_list.items.find(e=>e.appointment_id==aa.appointment_id&&e.name==Zt.name);var ia=n.risk_factors_list.items.indexOf(n.risk_factors_list.items.find(e=>e.appointment_id==Zt.appointment_id));Wt=null==Wt?ia?n.items[ia-1]:void 0:Wt;zt={calc:St};if(void 0!==Wt&&Wt.hasOwnProperty("appointment_id")){Bt=parseFloat(Zt.results),Gt=parseFloat(Wt.results);var ra=Bt-Gt;ea={numeric:ra,percent:ra/Gt*100};return zt.calc=ea,zt}return{calc:St}}return{calc:St};case"risk-factor-calc":n=i.patient_risk_factors,St={numeric:0,percent:0};if(r.previous_appointment.hasOwnProperty("appointment_id")){Zt=n.selectedForm,Wt=n.risk_factors_calc_list.find(e=>e.appointment_id==r.previous_appointment.appointment_id),zt={calc:St};if(void 0!==Wt&&Wt.hasOwnProperty("appointment_id")){Bt=parseFloat(Zt.obj.results),Gt=parseFloat(Wt.results),ea={numeric:Bt-Gt,percent:(Bt-Gt)/Gt*100};return zt.calc=ea,zt}return{calc:St}}return{calc:St};case"life-style":if(a){n=i.comparison.anthropometry;if(n.current_patient.hasOwnProperty("patient_id")&&n.patient_to_compare.hasOwnProperty("patient_id")){s=t.patient_to_compare?n.patient_to_compare:n.current_patient,o=t.patient_to_compare?n.current_patient:n.patient_to_compare,p=parseInt(s.abdominal_waist),d=parseInt(s.height),_=parseInt(s.weight),c=parseFloat(i.getBMI(_,d,s.weight_suffix,s.height_suffix).replace(" kg/m2","")),m=parseFloat(i.getCS(_,d,s.weight_suffix,s.height_suffix).replace(" m2","")),l=parseInt(o.abdominal_waist),u=parseInt(o.height),h=parseInt(o.weight),g=parseFloat(i.getBMI(h,u,o.weight_suffix,o.height_suffix).replace(" kg/m2","")),f=parseFloat(i.getCS(h,u,o.weight_suffix,o.height_suffix).replace(" m2","")),y={numeric:_-h,percent:(_-h)/h*100},v={numeric:d-u,percent:(d-u)/u*100},b={numeric:p-l,percent:(p-l)/l*100},x={numeric:c-g,percent:(c-g)/g*100},I={numeric:m-f,percent:(m-f)/f*100};return{weight:y,height:v,abdominal_waist:b,bmi:x,cs:I}}return{}}n=i.patient_life_style,k={exercise_weekly_minutes:{numeric:0,apercentage:0},smoking:{cigarettes_per_day:{numeric:0,apercentage:0}}};if(n.items.length>1){var na=void 0!==t&&t.hasOwnProperty("life_style")?t.life_style:n.editedItem;A=r.appointments.indexOf(r.appointments.find(e=>e.appointment_id==na.appointment_id)),O=r.appointments[A-1];if(null==O)return k;var sa=n.items.find(e=>e.appointment_id==O.appointment_id);F=n.items.indexOf(na);if(sa=null==sa?n.items[F-1]:sa,void 0!==sa&&sa.hasOwnProperty("appointment_id")){var oa=parseInt(na.exercise_weekly_minutes),pa=parseInt(na.smoking.cigarettes_per_day),da=parseInt(sa.exercise_weekly_minutes),_a=parseInt(sa.smoking.cigarettes_per_day),ca=oa-da,ma=pa-_a,la={numeric:ca,percent:ca/da*100},ua={numeric:ma,percent:ma/_a*100};return{exercise_weekly_minutes:la,smoking:{cigarettes_per_day:ua}}}return k}return k}},returnNumberSign(e){var t="";return 1==Math.sign(e)&&0!==e&&e!==1/0&&NaN!==e?t="+":-1==Math.sign(e)&&0!==e&&e!==1/0&&NaN!==e?t="":(t="",e=0),t+e},filterFollowUpsAppointments(e,t=!1){var a=this,i=a.patient_appointments;a.FollowUpAppointmentsDialog=!1;var r=i.appointments.indexOf(e);if(i.previous_appointment=r>0?i.appointments[r-1]:{},a.view_dialog)switch(a.view_tab){case"tab-view-3":a.initializeHistory();break;case"tab-view-4":a.initializeAnthropometry();break;case"tab-view-5":a.initializeVitalSigns();break;case"tab-view-6":a.initializePhysicalExams();break;case"tab-view-7":a.initializeElectroCardiograms();break;case"tab-view-8":a.initializeEchocardiograms();break;case"tab-view-9":a.initializeExams(),a.initializeExamsFiles();break;case"tab-view-10":a.initializeFactorsRisk(!0);break;case"tab-view-11":a.initializeLifeStyle();break;case"tab-view-12":a.initializePlans()}else switch(a.tab){case"tab-3":a.initializeHistory();break;case"tab-4":a.initializeAnthropometry();break;case"tab-5":a.initializeVitalSigns();break;case"tab-6":a.initializePhysicalExams();break;case"tab-7":a.initializeElectroCardiograms();break;case"tab-8":a.initializeEchocardiograms();break;case"tab-9":a.initializeExams(),a.initializeExamsFiles();break
;case"tab-10":a.initializeFactorsRisk(a.view_dialog);break;case"tab-11":a.initializeLifeStyle();break;case"tab-12":a.initializeFactorsRisk(),a.initializePlans()}},searchTemplate(){return this.filtered_templates=this.templates.filter(e=>e.material_name.toLowerCase().includes(this.template_search.toLowerCase()))},getTelephoneInput(e,t){this.editedItem.telephone=t.number.international}}});