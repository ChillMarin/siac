moment.locale("es"),Vue.use(VueTelInputVuetify,{vuetify:vuetify}),Vue.component("line-chart",{extends:VueChartJs.Bar,mixins:VueChartJs.mixins.reactiveProp,props:["chartdata","options"],mounted(){this.renderChart(this.chartdata,{responsive:!0,maintainAspectRatio:!0})}});let vm=new Vue({vuetify:vuetify,el:"#siac-suite-container",data:{barAlert:!1,tab:null,view_tab:null,view_comparison_tab:null,view_dialog:!1,view_comparison_dialog:!1,ph_cd_heart_failure_dx_year_modal:!1,ph_cd_ischemic_cardiopathy_sca_year_modal:!1,ph_cd_ischemic_cardiopathy_sca_im_year_modal:!1,ph_cd_ischemic_cardiopathy_sca_ua_year_modal:!1,ph_cd_ischemic_cardiopathy_scai_ua_year_modal:!1,ph_cd_ischemic_cardiopathy_surgery_year_modal:!1,ph_cd_ischemic_cardiopathy_percutaneous_year_modal:!1,ph_polipildora_date_modal:!1,smoking_start_year_modal:!1,smoking_quit_year_modal:!1,cv_disease_year_modal:!1,arritmia_year_modal:!1,recipe_reports_dialog:!1,historic_records_dialog:!1,dialog:!1,dialogDelete:!1,finishOptionsDialog:!1,FollowUpAppointmentsDialog:!1,viewPatientsComparisonDialog:!1,viewPatientsAverageComparisonDialog:!1,viewPatientsStatisticsDialog:!1,ComparisonPatientsDialog:!1,general_save:!1,upload_button:!1,image_loading:!1,previewImage:"",barTimeout:1e3,barMessage:"",barType:"",empty_message:"No hay datos disponibles",birthdate_modal:"",entry_date_modal:"",birthdate_dialog:"",entry_date_dialog:"",appointment_date_dialog:"",appointment_time_dialog:"",exam_date_dialog:"",exam_file_date_dialog:"",menu:"",patients_search:"",template_search:"",ref_index:0,templates:[],filtered_templates:[],templates_loading:!1,comparison:{active:0,external_loading:!1,type_selected:1,types:[{text:"Pacientes de la misma unidad",value:1}],patients:[],external_patients:[],patients_filtered:[],external_patients_filtered:[],patient_selected:{},patient_to_compare:{},appointments:{loading:!1,current_patient:{},patient_to_compare:{}},history:{loading:!1,average_loading:!1,patients:[],external_patients:[],patients_filtered:[],external_patients_filtered:[],current_patient:{},patient_to_compare:{}},anthropometry:{loading:!1,average_loading:!1,patients:[],external_patients:[],patients_filtered:[],external_patients_filtered:[],current_patient:{},patient_to_compare:{}},physical_exams:{loading:!1,average_loading:!1,patients:[],external_patients:[],patients_filtered:[],external_patients_filtered:[],current_patient:{},patient_to_compare:{}},electro_cardiogram:{loading:!1,average_loading:!1,patients:[],external_patients:[],patients_filtered:[],external_patients_filtered:[],current_patient:{},patient_to_compare:{}},echocardiogram:{loading:!1,average_loading:!1,patients:[],external_patients:[],patients_filtered:[],external_patients_filtered:[],current_patient:{},patient_to_compare:{}},laboratory_exams:{loading:!1,average_loading:!1,patients:[],external_patients:[],patients_filtered:[],external_patients_filtered:[],examsListed:!1,selectedExam:{},current_patient:[],patient_to_compare:[]},diagnostics:{loading:!1,rf_loading:!1,average_loading:!1,patients:[],external_patients:[],patients_filtered:[],external_patients_filtered:[],items:{current_patient:[],patient_to_compare:[]},risk_factors:{current_patient:[],patient_to_compare:[]}},vital_signs:{loading:!1,average_loading:!1,patients:[],external_patients:[],patients_filtered:[],external_patients_filtered:[],current_patient:{},patient_to_compare:{}}},statistics:{male:{age_average:0,total_patients:0},female:{age_average:0,total_patients:0},anthropometry:{loading:!1,items:[],weight:0,height:0,abdominal_waist:0,cs:0,bmi:0},diseases:{loading:!1,histories:[],hta:{controlled:0,no_controlled:0},dmt2:{controlled:0,no_controlled:0},dyslipidemia:{controlled:0,no_controlled:0},smoking:0},laboratory_exam:{loading:!1,items:[{name:"Colesterol Total",nomenclature:"mg/dL",items:0,total:0},{name:"Triglicérídos",nomenclature:"mg/dL",items:0,total:0},{name:"Colesterol HDL",nomenclature:"mg/dL",items:0,total:0},{name:"Colesterol No HDL",nomenclature:"mg/dL",items:0,total:0},{name:"Glicemia en ayunas",nomenclature:"mg/dL",items:0,total:0},{name:"Glicemia postprandial",nomenclature:"mg/dL",items:0,total:0}]},chart:{loading:!1,monthly_data:{current_year:moment().format("YYYY"),months:["01","02","03","04","05","06","07","08","09","10","11","12"],labels:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],datasets:[{label:"Total",backgroundColor:vuetify.preset.theme.themes.light.secondary,data:[]},{label:"Hombres",backgroundColor:vuetify.preset.theme.themes.light.primary,data:[]},{label:"Mujeres",backgroundColor:"#e91e63",data:[]}]},weekly_data:{current_day:moment().format("YYYY-MM-DD"),labels:[],datasets:[{label:"Total",backgroundColor:vuetify.preset.theme.themes.light.secondary,data:[]},{label:"Hombres",backgroundColor:vuetify.preset.theme.themes.light.primary,data:[]},{label:"Mujeres",backgroundColor:"#e91e63",data:[]}]}}},patients:[],headers:[{text:"N° de historia",align:"start",value:"patient_id",width:"auto"},{text:"Nombre y Apellido",value:"full_name",width:"auto"},{text:"Teléfono",value:"telephone",width:"auto"},{text:"Email",value:"email",width:"auto"},{text:"Dirección",value:"address",width:"auto"},{text:"Acciones",value:"actions",align:"center",sortable:!1}],views:{patient_appointments:{headers:[{text:"Fecha de la cita",align:"start",value:"appointment_date"},{text:"Hora de la cita",value:"appointment_time"},{text:"Doctor",value:"full_name"},{text:"Tipo de cita",value:"appointment_type"},{text:"Motivo de la cita",value:"appointment_reason"}]},patient_anthropometry:{headers:[{text:"Fecha",align:"start",value:"created_at"},{text:"Peso",value:"weight"},{text:"Talla",value:"height"},{text:"Cintura Abdominal",value:"abdominal_waist"},{text:"Índice Masa Corporal",value:"bmi"},{text:"Superficie Corporal",value:"corporal_surface"}]},patient_laboratory_exams:{exam_headers:[{text:"Fecha del examen",align:"start",value:"exam_date",width:"auto"},{text:"Resultado",value:"results",width:"auto"}],exam_file_headers:[{text:"Fecha",align:"start",value:"exam_date",width:"auto"},{text:"Archivo",align:"center",value:"file_result",width:"auto"}]}},patient_appointments:{finish_loading:!1,dialog:!1,outside_dialog:!1,dialogDelete:!1,date_modal:!1,time_modal:!1,select:!1,current_appointment:{},previous_appointment:{},types:[{text:"Primera vez"},{text:"Consulta de chequeo"}],doctors:[],headers:[{text:"Fecha de la cita",align:"start",value:"appointment_date"},{text:"Hora de la cita",value:"appointment_time"},{text:"Doctor",value:"full_name"},{text:"Tipo de cita",value:"appointment_type"},{text:"Motivo de la cita",value:"appointment_reason"},{text:"Acciones",value:"actions",align:"center",sortable:!1}],appointments:[],editedItem:{},defaultItem:{appointment_date:"",appointment_reason:"",appointment_time:"",appointment_type:""},editedIndex:-1},recipes:{dialog:!1,dialogDelete:!1,date_modal:!1,next_date_modal:!1,select:!1,headers:[{text:"Fecha de creación",align:"start",value:"registered_at"},{text:"Fecha de consulta",align:"start",value:"appointment_date"},{text:"Próxima cita",align:"start",value:"next_appointment"},{text:"Acciones",value:"actions",align:"center",sortable:!1}],diagnostic_headers:[{text:"Diagnóstico",align:"center",value:"diagnostic"},{text:"Metas de Tratamiento",align:"center",value:"treatment_goal"},{text:"",align:"start",value:"action"}],instruction_headers:[{text:"Tratamiento",align:"center",value:"treatment"},{text:"Dosis",align:"center",value:"dosis"},{text:"Horario",align:"center",value:"schedule"},{text:"Observaciones",align:"center",value:"observations"},{text:"",align:"start",value:"action"}],items:[],editedItem:{},defaultItem:{appointment_date:"",diagnostics:[],instructions:[],next_appointment:""},editedIndex:-1},reports:{dialog:!1,dialogDelete:!1,date_modal:!1,next_date_modal:!1,headers:[{text:"Fecha de creación",align:"start",value:"registered_at"},{text:"Fecha de consulta",align:"start",value:"appointment_date"},{text:"Acciones",value:"actions",align:"center",sortable:!1}],treatments:[{text:"Tratamiento",align:"center",value:"treatment"},{text:"Dosis",align:"center",value:"dosis"},{text:"Intervalo",align:"center",value:"interval"},{text:"",align:"start",value:"action"}],items:[],editedItem:{appointment_date:"",next_appointment:"",ecg:"",meta:{diagnostics:[],plan:{},treatments:[],anthropometry:{active:"1",item:{}},physical_exam:{active:"0"},echocardiogram:{active:"0",item:""},electro_cardiogram:{active:"0",item:{}},laboratory_exam:{active:"0",items:[]},vital_signs:{active:"1",items:{}}}},defaultItem:{appointment_date:"",next_appointment:"",ecg:"",meta:{diagnostics:[],plan:{},treatments:[],anthropometry:{active:"1",item:{}},physical_exam:{active:"0"},echocardiogram:{active:"0",item:""},electro_cardiogram:{active:"0",item:{}},laboratory_exam:{active:"0",items:[]},vital_signs:{active:"1",items:{}}}},editedIndex:-1},patient_anthropometry:{editedItem:{weight:"0",weight_suffix:"kg",height:"0",height_suffix:"cm",abdominal_waist:"0",abdominal_waist_suffix:"cm"},defaultItem:{weight:"0",weight_suffix:"kg",height:"0",height_suffix:"cm",abdominal_waist:"0",abdominal_waist_suffix:"cm"},editedIndex:-1,history:[]},patient_laboratory_exams:{add_file_loading:!1,laboratory_exam:!1,dialog:!1,dialogDelete:!1,dialogFileDelete:!1,modal:!1,file_modal:!1,formulas:{cholesterol_ldl:{form_valid:!1,rules:{required:[t=>!!t||"Este campo es requerido"]},vars:{total_cholesterol:0,c_HDL:0,triglyceride_level:0},results:0},cholesterol_no_hdl:{vars:{total_cholesterol:0,c_HDL:0},results:0},egfr_mdr_ckdepi:{vars:{race:1,serum_creatinine:0,metodology:"CKD-EPI"},results:0},filt_glom:{vars:{race:1,serum_creatinine:0},results:0}},headers:[{text:"Laboratorio",align:"start",value:"name",width:"auto"},{text:"Acción",value:"action",width:"auto"}],table_options:{disablePagination:!0,itemsPerPage:15,hideDefaultFooter:!0},exam_headers:[{text:"Fecha del examen",align:"start",value:"exam_date",width:"auto"},{text:"Resultado",value:"results",width:"auto"},{text:"Acción",value:"action",width:"auto"}],exam_files_headers:[{text:"Fecha",align:"start",value:"exam_date",width:"auto"},{text:"Archivo",value:"file_result",width:"auto"},{text:"Acción",value:"action",width:"auto"}],exam_files:[],exam_results:[],exams:[],editedItem:{exam_date:moment().format("YYYY-MM-DD"),results:""},editedFileItem:{exam_date:moment().format("YYYY-MM-DD")},defaultItem:{exam_date:moment().format("YYYY-MM-DD")},selectedExam:{},editedIndex:-1,editedFileIndex:-1},patient_vital_signs:{show_results:!1,temperature:35,sat:75,defaultItem:[{frc:30,breathing_rate:10,pa_left_arm1_average:"",pa_left_arm2_average:"",pa_right_arm1_average:"",pa_right_arm2_average:"",0:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""},1:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""},2:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""}},{frc:30,breathing_rate:10,pa_left_arm1_average:"",pa_left_arm2_average:"",pa_right_arm1_average:"",pa_right_arm2_average:"",0:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""},1:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""},2:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""}},{frc:30,breathing_rate:10,pa_left_arm1_average:"",pa_left_arm2_average:"",pa_right_arm1_average:"",pa_right_arm2_average:"",0:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""},1:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""},2:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""}}],takes:[{frc:30,breathing_rate:10,pa_left_arm1_average:"",pa_left_arm2_average:"",pa_right_arm1_average:"",pa_right_arm2_average:"",0:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""},1:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""},2:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""}},{frc:30,breathing_rate:10,pa_left_arm1_average:"",pa_left_arm2_average:"",pa_right_arm1_average:"",pa_right_arm2_average:"",0:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""},1:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""},2:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""}},{frc:30,breathing_rate:10,pa_left_arm1_average:"",pa_left_arm2_average:"",pa_right_arm1_average:"",pa_right_arm2_average:"",0:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""},1:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""},2:{pa_right_arm1:"",pa_right_arm2:"",pa_left_arm1:"",pa_left_arm2:""}}],headers:[{text:"Fecha",align:"center",value:"created_at",width:"auto"},{text:"",align:"center",value:"heart_frecuency",width:"auto"},{text:"Frecuencia Cardiaca",align:"center",value:"frc",width:"auto"},{text:"Presión Arterial del Brazo Derecho",align:"center",value:"pa_right",width:"auto"},{text:"Presión Arterial del Brazo Izquierdo",align:"center",value:"pa_left",width:"auto"},{text:"Frecuencia respiratoria",align:"center",value:"breathing_rate",width:"auto"},{text:"Temperatura (°C)",align:"center",value:"temperature",width:"auto"},{text:"SAT (%)",align:"center",value:"sat",width:"auto"}],headers_result:[{text:" ",align:"center",value:"heart_frecuency",width:"auto"},{text:"Frecuencia cardíaca",align:"center",value:"frc",width:"auto"},{text:"Presión Arterial del Brazo Derecho",align:"center",value:"pa_right",width:"auto"},{text:"Presión Arterial del Brazo Izquierdo",align:"center",value:"pa_left",width:"auto"},{text:"Frecuencia respiratoria",align:"center",value:"breathing_rate",width:"auto"},{text:"Temperatura (°C)",align:"center",value:"temperature",width:"auto"},{text:"SAT O (%)",align:"center",value:"sat",width:"auto"}],results:[],records:[]},patient_echocardiogram:{loading:!1,content:"",item:[],defaultItem:""},patient_physical_exam:{loading:!1,options:{general_aspect:["Bueno","Regular","Mal"],soplo:["Sistólico","Diastólico","Continuo"],select:[{text:"Sí",value:1},{text:"No",value:0}]},items:[],content:{general_aspect:"",apex:{is_palpated:1,displaced:0,characteristic:"Normokinético"},pvy:{morphology_breastx:1,cvy:1,swivel_stop:1,other:""},carotid_beats:{symmetrical:1,homochroto:1,normal_amplitude:1},auscultation:{rhythmic_heart_sounds:1,regular:1,unfolded_r1:1,r1_type:"",unfolded_r2:1,r2_type:"",unfolded_r3:1,unfolded_r4:1,gallop_rhythm:0,soplo:{active:1,foco_options:["Aórtico","Mitral","Tricuspideo","Pulmonar"],items:[{type:"",foco:"",intensity_foco:""}]}},peripheral_pulses:{symmetrical:1,symmetrical_range:1,mid:"",mii:""},edema:{active:0,range:""}},defaultItem:{general_aspect:"",pvy:{morphology_breastx:1,cvy:1,swivel_stop:1,other:""},apex:{is_palpated:1,displaced:0,characteristic:"Normokinético"},carotid_beats:{symmetrical:1,homochroto:1,normal_amplitude:1},auscultation:{rhythmic_heart_sounds:1,regular:1,unfolded_r1:1,unfolded_r2:1,unfolded_r3:1,unfolded_r4:1,gallop_rhythm:0,soplo:{active:1,foco_options:["Aórtico","Mitral","Tricuspideo","Pulmonar"],items:[{type:"",foco:"",intensity_foco:""}]}},peripheral_pulses:{symmetrical:1,symmetrical_range:1,mid:"",mii:""},edema:{active:0,range:""}}},patient_life_style:{loading:!1,calc:{fagerstrom:{form_dialog:0,vars:{input1:0,input2:0,input3:0,input4:0,input5:0,input6:0},options:{input1:[{text:"Hasta 5 minutos",value:3},{text:"De 6 a 30 minutos",value:2},{text:"De 31 a 60 minutos",value:1},{text:"Más de 60 minutos",value:0}],input3:[{text:"El primero de la mañana",value:1},{text:"Cualquier otro",value:0}],input4:[{text:"31 o más cigarrillos",value:3},{text:"Entre 21 y 30 cigarrillos/día",value:2},{text:"Entre 11 y 20 cigarrillos/día",value:1},{text:"Menos de 10 cigarrillos/día",value:0}]},result:0}},options:{select:[{text:"Sí",value:"1"},{text:"No",value:"0"}],smoking_select:[{text:"Sí",value:1},{text:"No",value:0}],exercises:{type:["Aeróbico","Resistencia"],aerobic:["Caminar","Correr","Trotar","Nadar","Bailar","Ciclismo","Yoga","Tenis"],resistance:["Pesas","Funcionales","Abdominales"]},alcohol_consumption:["1","2 a 3","Más de 4"]},items:[],editedItem:{physical_exercise:"0",exercise_weekly_minutes:30,exercise:{type:"Aeróbico",exercises:[]},smoking:{active:0,did_smoke:0,start_year:"",quit_year:"",cigarettes_per_day:"",fagerstrom_test:"",no_smoking_frecuency:0,last_time:"",how_many_times:"",smoking_wish:0,short_advice:{done:0,material:{material_id:"",material_name:"",source:"",type:""}}},alcohol_consumption:"0",alcohol_daily_consumption:0},defaultItem:{physical_exercise:"0",exercise_weekly_minutes:30,exercise:{type:"Aeróbico",exercises:[]},smoking:{active:0,did_smoke:0,start_year:"",quit_year:"",cigarettes_per_day:"",fagerstrom_test:"",no_smoking_frecuency:0,last_time:"",how_many_times:"",smoking_wish:0,short_advice:{done:0,material:{material_id:"",material_name:"",source:"",type:""}}},alcohol_consumption:"0",alcohol_daily_consumption:0}},patient_electro_cardiogram:{loading:!1,form_dialog:!1,valid:!1,qtc_edit_results_menu:!1,qtc_view_results_menu:!1,options:{rhythm:["Sinusal","No sinusal"],qtc_list:[{text:"RR",value:"rr"},{text:"QTc (Rautaharju)",value:"qtrau"},{text:"QTc (Bazett)",value:"qtbaz"},{text:"QTc (Framingham)",value:"qtfra"},{text:"QTc (Friderica)",value:"qtfri"},{text:"QTC (Call)",value:"qtcal"}]},rules:{frecuency:[t=>t&&t>=30&&t<=300||"Debe estar en un rango entre 30 y 300"],pr:[t=>t&&t>=90&&t<=240||"Debe estar en un rango entre 90 y 240"],qrs:[t=>t&&t>=60&&t<=200||"Debe estar en un rango entre 60 y 200"]},content:{rhythm:"Sinusal",arritmia_type:"",frecuency:30,pr:"",axes:{p:"",qrs:"",t:""},detail:"",qtc:"",qt:"",fc:"",rr:"",qtrau:"",qtbaz:"",qtfra:"",qtfri:"",qtcal:"",qtc_formula_selected:{text:"RR",value:"rr"},diagnostic:"No"},items:[],defaultItem:{rhythm:"Sinusal",arritmia_type:"",frecuency:30,pr:"",axes:{p:"",qrs:"",t:""},detail:"",qtc:"",qt:"",fc:"",rr:"",qtrau:"",qtbaz:"",qtfra:"",qtfri:"",qtcal:"",qtc_formula_selected:{text:"RR",value:"rr"},diagnostic:"No"}},patient_history:{loading:!1,modals:{ischemic_cardiopathy:{current:1}},options:{treatment_frecuency:[1,2,3,"+3"],ischemic_cardiopathy:{chronic_crown_syndrome:["","Angina inestable"],general_select:[1,2,3,"+ de 3"],functional_class_canada:[1,2,3,4]},arritmia:{type:["","FA","ESV","Otra"],anticoagulated_type:["Antagonistas Vitamina K","ACOD"],general_select:[" ",1,2,3,"+ de 3"],functional_class_canada:[1,2,3,4]},peripheral_artery_disease:{territory:["Miembros inferiores","Carotidea"]},electro_cardiogram:{rhythm:["Sinusal","No sinusal"]},family:["Padre","Madre","Hermano","Hermana"],diseases:["HTA","DMt2","Dislipidemia","Enfermedad arterial coronaria precoz (hombres < 55, mujeres < 65)","Muerte súbita","Hipercolesterolemia familiar homocigótica"]},select:[{text:"Sí",value:1},{text:"No",value:0}],interval_times:[{text:"Menos de un año",value:"Menos de un año"},{text:"Entre 1 y 2 años",value:"Entre 1 y 2 años"},{text:"3 a 4 años",value:"3 a 4 años"},{text:"4 a 5 años",value:"4 a 5 años"},{text:"Más de 5 años",value:"Más de 5 años"},{text:"Más de 10 años",value:"Más de 10 años"}],items:[],form:{history_content:{family_history:[],diseases:{hta:{treatments_list:{iecas:["Benazepril","Captopril","Cilazapril","Enalapril","Espirapril","Fosinopril","Lisinopril","Imidapril","Moexipril","Perindopril","Quinapril","Ramipril","Espirapril","Trandolapril","Zofenopril"],bra:["Candesartan","Eprosartan","Irbesartan","Losartan","Olmesartan medoxomilo","Telmisartan","Valsartan"],diuretic:[{header:"Tiazidas y similares"},{name:"Clorotiazida",group:"Group 1"},{name:"Clortalidona",group:"Group 1"},{name:"Hidroclorotiazida",group:"Group 1"},{name:"Metolazona",group:"Group 1"},{divider:!0},{header:"Asa"},{name:"Azetazolamida",group:"Group 2"},{name:"Bumetamida",group:"Group 2"},{name:"Furosemida",group:"Group 2"},{name:"Torsemida",group:"Group 2"},{divider:!0},{header:"Ahorradores de potasio"},{name:"Metolazona",group:"Group 3"},{name:"Espironolactona",group:"Group 3"},{name:"Triametereno",group:"Group 3"},{divider:!0},{header:"Otros"}],fdc:[{header:"Calcioantagonistas y diuréticos"},{name:"Amlodipina + indapamida",group:"Group 1"},{name:"Amlodipina + hidroclorotiazida",group:"Group 1"},{divider:!0},{name:"IECAS + diuréticos"},{name:"IECAS + calcioantagonitas"},{name:"IECAS + betabloqueantes"},{name:"Betabloqueante + diurético"},{name:"Betabloqueante + calcioantagonista"},{name:"BRA + diurético + calcioantagonista "}],ca:["Amlodipina","Felodipina","Isradipina","Nicardipina","Nifedipina","Nifedipina OROS","Nimodipina","Nisoldipina","Lacidipina","Manidipina","Barnidipina","Lecardipina","Clevadipina","Verapamilo","Diltiazem"],ir:["Candesartan","Eprosartan","Irbesartan","Losartan","Olmesartan medoxomilo","Telmisartan","Valsartan"],block_beta:["Atenolol","Bisoprolol","Carvedilol","Metoprolol","Nebivolol","Torsemida"],arni:["Sacubitril / Valsartan"],ant_mineralocorticoids:["Espironolactona","Esplerenona"]},secondary_effects:{iecas:["Tos","Edema","Angio neurótico"],bra:["Tos","Edema","Angio neurótico"],ca:["Cefalea","Edema"],diuretic:["Transtornos HE","Hiperglicemia","Bradicardia","Disfunción eréctil"],ir:["Tos","Edema","Angio neurótico"],block_beta:["Bradicardia","Disfunción eréctil","Broncoespasmo"],arni:[],ant_mineralocorticoids:[]},active:0,controlled:0,detected_previously:1,diagnostic_date:"",iecas:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},bra:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},ca:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},ir:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},diuretic:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},arni:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},ant_mineralocorticoids:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},fdc:{active:0,selected:[]},block_beta:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:"",has_secondary_effects:0,secondary_effects:""},block:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""}},dtm2:{treatments_list:{metformin:[],insulin:["Rápida (regular)","Intermedia: NPH"],a_insulin:["Aspart","Degludec","Detemir","Glargina","Glulisina","Lispro","NPA","NPL"],antiplatelet_agents:["Aspirina","Clopidogrel","Prasugrel","Ticagrelor"],oral_anticoagulants:["Apixaban","Dabigatran","Rivaroxaban","Warfarina"],insulin_mixtures:["Rápida + NPH","Aspart + NPA","Lispro – NPL"],metformin:[],sulfonylureas:["Glibenclamida (gliburida)","Glipizida","Gliclazida","Gliclazida retard","Glimepirida","Glisentida"],glinidas:["Repaglinida"],pioglitazona:[],inh_dpp:["Sitagliptina","Vildagliptina","Saxagliptina","Linagliptina","Alogliptina"],i_slgt2:["Dapaglifozina","Canaglifozina","Empaglifozina"],gl:["Exenatide","Exenatide LAR","Lixisenatide","Liraglutide","Dulaglutide"],fdc:[{name:"Metformina + Sulfonilúreas"},{name:"Metformina + I DPP-4"}]},active:0,controlled:0,detected_previously:1,diagnostic_date:"",secondary_effects:{metformin:["Trastornos digestivos"],insulin:[],a_insulin:["Hipoglicemia"],sulfonylureas:["Hipoglicemia"],glinidas:["Hipoglicemia"],pioglitazona:[],inh_dpp:[],i_slgt2:[],gl:[],antiplatelet_agents:["Alergias","Hemorragias digestivas","Hematomas"],oral_anticoagulants:[]},metformin:{active:0,treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},insulin:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},a_insulin:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},antiplatelet_agents:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},oral_anticoagulants:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},insulin_mixtures:{selected:[]},sulfonylureas:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},glinidas:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},pioglitazona:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},inh_dpp:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},i_slgt2:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},gl:{treatment:"",frecuency:"",dosis:"",daily_dosis:""},fdc:{active:0,selected:[]}},pre_dtm2:{active:0,controlled:0,detected_previously:1,diagnostic_date:""},dyslipidemia:{treatments_list:{statins:["Atorvastatina","Lovastatina","Simvastatina","Pitavastatina","Pravastatina","Rosuvastatina "],ezt:[],fibratos:["Gembribrozil","Bezafibrato","Fenofibrato"],polipildora:["Aspirina","Estatina","Betabloqueante","Diurético","IECA","BRA","Calcioantagonista","AAS/Estatina/IECA","AAS/Estatina/IECA/Diurético","Antagonistas del calcio/Estatina/IECA"],polipildora_reason:["Controlar los factores de riesgo","Evitar eventos recurrentes","Disminuir polimedicación","Mejorar adherencia"],omega3:["EPA","EPA-DHA"],ipcsk9:[]},active:0,controlled:0,detected_previously:1,diagnostic_date:"",treatment:"",secondary_effects:{statins:["Dolores musculares"],ezt:["Dolores musculares"],fibratos:["Dolores musculares"],omega3:[],ipcsk9:[]},statins:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},ezt:{active:0,treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},fibratos:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},omega3:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},ipcsk9:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},polipildora:{active:0,date:moment().format("YYYY-MM-DD"),reason:"",selected:[]}}},emergency_hta_history:0,emergency_diabetes_history:0,cardiovascular_diseases:{ischemic_cardiopathy:{active:0,revascularized:{active:0,surgery:{active:1,bridge:"",year:moment().format("YYYY-MM-DD")},percutaneous:{active:1,vessels:"",year:moment().format("YYYY-MM-DD"),stent:"",medicated:1}},functional_class_canada:"",sca:{active:0,year:moment().format("YYYY-MM-DD"),im:[{q:1,no_q:1,year:moment().format("YYYY-MM-DD"),localization:""}]},scai:{active:0,year:moment().format("YYYY-MM-DD")}},arritmia:{active:0,items:[{type:"",treatment:0,treatment_type:"",treatments:[""],dosis:"",daily_dosis:"",ablation:0,ablation_age:"",cdi_holder:0,cdi_age:""}]},heart_failure:{active:0,dx_age:moment().format("YYYY-MM-DD"),functional_class:"",treatment:{iecas:{active:0,treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},arni:{active:0},dioxin:{active:0},bra:{active:0,treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},diuretic:{active:0,treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},arn:{active:0},i_slgt2:{active:0,treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""}}},peripheral_artery_disease:{active:0,territory:""}},antiplatelet:{active:0,treatments:{aspirin:{active:0,dosis:""},clopidogrel:{active:0,dosis:""},ticagrelor:{active:0,dosis:""},prasugel:{active:0,dosis:""}}},cronic_kidney_disease:{active:0,stadium:"",dialysis:0},cerebrovascular_disease:{active:0,items:[{year:moment().format("YYYY-MM-DD"),type:"Isquémico",ischemic_type:""}]}}},defaultItem:{family_history:[],diseases:{hta:{treatments_list:{iecas:["Benazepril","Captopril","Cilazapril","Enalapril","Espirapril","Fosinopril","Lisinopril","Imidapril","Moexipril","Perindopril","Quinapril","Ramipril","Espirapril","Trandolapril","Zofenopril"],bra:["Candesartan","Eprosartan","Irbesartan","Losartan","Olmesartan medoxomilo","Telmisartan","Valsartan"],diuretic:[{header:"Tiazidas y similares"},{name:"Clorotiazida",group:"Group 1"},{name:"Clortalidona",group:"Group 1"},{name:"Hidroclorotiazida",group:"Group 1"},{name:"Metolazona",group:"Group 1"},{divider:!0},{header:"Asa"},{name:"Azetazolamida",group:"Group 2"},{name:"Bumetamida",group:"Group 2"},{name:"Furosemida",group:"Group 2"},{name:"Torsemida",group:"Group 2"},{divider:!0},{header:"Ahorradores de potasio"},{name:"Metolazona",group:"Group 3"},{name:"Espironolactona",group:"Group 3"},{name:"Triametereno",group:"Group 3"},{divider:!0},{header:"Otros"}],fdc:[{header:"Calcioantagonistas y diuréticos"},{name:"Amlodipina + indapamida",group:"Group 1"},{name:"Amlodipina + hidroclorotiazida",group:"Group 1"},{divider:!0},{name:"IECAS + diuréticos"},{name:"IECAS + calcioantagonitas"},{name:"IECAS + betabloqueantes"},{name:"Betabloqueante + diurético"},{name:"Betabloqueante + calcioantagonista"},{name:"BRA + diurético + calcioantagonista "}],ca:["Amlodipina","Felodipina","Isradipina","Nicardipina","Nifedipina","Nifedipina OROS","Nimodipina","Nisoldipina","Lacidipina","Manidipina","Barnidipina","Lecardipina","Clevadipina","Verapamilo","Diltiazem"],ir:["Candesartan","Eprosartan","Irbesartan","Losartan","Olmesartan medoxomilo","Telmisartan","Valsartan"],block_beta:["Atenolol","Bisoprolol","Carvedilol","Metoprolol","Nebivolol","Torsemida"],arni:["Sacubitril / Valsartan"],ant_mineralocorticoids:["Espironolactona","Esplerenona"]},secondary_effects:{iecas:["Tos","Edema","Angio neurótico"],bra:["Tos","Edema","Angio neurótico"],ca:["Cefalea","Edema"],diuretic:["Transtornos HE","Hiperglicemia","Bradicardia","Disfunción eréctil"],ir:["Tos","Edema","Angio neurótico"],block_beta:["Bradicardia","Disfunción eréctil","Broncoespasmo"],arni:[],ant_mineralocorticoids:[]},active:0,controlled:0,detected_previously:1,diagnostic_date:"",iecas:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},bra:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},ca:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},ir:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},diuretic:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},arni:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},ant_mineralocorticoids:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},fdc:{active:0,selected:[]},block_beta:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:"",has_secondary_effects:0,secondary_effects:""},block:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""}},dtm2:{treatments_list:{metformin:[],insulin:["Rápida (regular)","Intermedia: NPH"],a_insulin:["Aspart","Degludec","Detemir","Glargina","Glulisina","Lispro","NPA","NPL"],antiplatelet_agents:["Aspirina","Clopidogrel","Prasugrel","Ticagrelor"],oral_anticoagulants:["Apixaban","Dabigatran","Rivaroxaban","Warfarina"],insulin_mixtures:["Rápida + NPH","Aspart + NPA","Lispro – NPL"],metformin:[],sulfonylureas:["Glibenclamida (gliburida)","Glipizida","Gliclazida","Gliclazida retard","Glimepirida","Glisentida"],glinidas:["Repaglinida"],pioglitazona:[],inh_dpp:["Sitagliptina","Vildagliptina","Saxagliptina","Linagliptina","Alogliptina"],i_slgt2:["Dapaglifozina","Canaglifozina","Empaglifozina"],gl:["Exenatide","Exenatide LAR","Lixisenatide","Liraglutide","Dulaglutide"],fdc:[{name:"Metformina + Sulfonilúreas"},{name:"Metformina + I DPP-4"}]},active:0,controlled:0,detected_previously:1,diagnostic_date:"",secondary_effects:{metformin:["Trastornos digestivos"],insulin:[],a_insulin:["Hipoglicemia"],sulfonylureas:["Hipoglicemia"],glinidas:["Hipoglicemia"],
pioglitazona:[],inh_dpp:[],i_slgt2:[],gl:[],antiplatelet_agents:["Alergias","Hemorragias digestivas","Hematomas"],oral_anticoagulants:[]},metformin:{active:0,treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},insulin:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},a_insulin:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},antiplatelet_agents:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},oral_anticoagulants:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},insulin_mixtures:{selected:[]},sulfonylureas:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},glinidas:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},pioglitazona:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},inh_dpp:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},i_slgt2:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},gl:{treatment:"",frecuency:"",dosis:"",daily_dosis:""},fdc:{active:0,selected:[]}},pre_dtm2:{active:0,controlled:0,detected_previously:1,diagnostic_date:""},dyslipidemia:{treatments_list:{statins:["Atorvastatina","Lovastatina","Simvastatina","Pitavastatina","Pravastatina","Rosuvastatina "],ezt:[],fibratos:["Gembribrozil","Bezafibrato","Fenofibrato"],polipildora:["Aspirina","Estatina","Betabloqueante","Diurético","IECA","BRA","Calcioantagonista","AAS/Estatina/IECA","AAS/Estatina/IECA/Diurético","Antagonistas del calcio/Estatina/IECA"],polipildora_reason:["Controlar los factores de riesgo","Evitar eventos recurrentes","Disminuir polimedicación","Mejorar adherencia"],omega3:["EPA","EPA-DHA"],ipcsk9:[]},active:0,controlled:0,detected_previously:1,diagnostic_date:"",treatment:"",secondary_effects:{statins:["Dolores musculares"],ezt:["Dolores musculares"],fibratos:["Dolores musculares"],omega3:[],ipcsk9:[]},statins:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},ezt:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},fibratos:{active:0,treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},omega3:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},ipcsk9:{treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},polipildora:{active:0,date:moment().format("YYYY-MM-DD"),reason:[],selected:[]}}},emergency_hta_history:0,emergency_diabetes_history:0,cardiovascular_diseases:{ischemic_cardiopathy:{active:0,revascularized:{active:0,surgery:{active:1,bridge:"",year:moment().format("YYYY-MM-DD")},percutaneous:{active:1,vessels:"",year:moment().format("YYYY-MM-DD"),stent:"",medicated:1}},functional_class_canada:"",sca:{active:0,year:moment().format("YYYY-MM-DD"),revascularized:1,surgery:1,bridge:"",percutaneous:1,stent:1,type:"",medicated:1,im:[{q:1,no_q:1,year:moment().format("YYYY-MM-DD"),localization:""}]},scai:{active:0,year:moment().format("YYYY-MM-DD")}},arritmia:{active:0,items:[{type:"",treatment:0,treatment_type:"",treatments:[""],dosis:"",daily_dosis:"",ablation:0,ablation_age:"",cdi_holder:0,cdi_age:""}]},heart_failure:{active:0,dx_age:moment().format("YYYY-MM-DD"),functional_class:"",treatment:{iecas:{active:0,treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},arni:{active:0},dioxin:{active:0},bra:{active:0,treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},diuretic:{active:0,treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""},arn:{active:0},i_slgt2:{active:0,treatment:"",frecuency:"",dosis:"",daily_dosis:"",has_secondary_effects:0,secondary_effects:""}}},peripheral_artery_disease:{active:0,territory:""}},antiplatelet:{active:0,treatments:{aspirin:{active:0,dosis:""},clopidogrel:{active:0,dosis:""},ticagrelor:{active:0,dosis:""},prasugel:{active:0,dosis:""}}},cronic_kidney_disease:{active:0,stadium:"",dialysis:0},cerebrovascular_disease:{active:0,items:[{year:moment().format("YYYY-MM-DD"),type:"Isquémico",ischemic_type:""}]}}},patient_risk_factors:{loading:!1,diagnostic_loading:!1,risk_factors_loaded:!1,selectedForm:{calc_name:"",obj:{results:""}},headers:[{text:" ",align:"start",value:"name"},{text:"Diagnóstico",value:"diagnostic"},{text:"Tratamiento",value:"comment"}],risk_factor_headers:[{text:"Fórmula de Cálculo de Riesgo",align:"start",value:"name"},{text:"Resultado",value:"results"}],rf:{appointment_id:"",treatment_dialog:!1,treatment_view_dialog:!1,treatment_selected:{name:""},risk_factors:[{name:"HTA",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Dislipidemia",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Sobrepeso",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Obesidad",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Pre DMt2",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"DMt2",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Arritmia",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Cardiopatía Isquémica",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Insuficiencia Cardíaca",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Tabaquismo",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""}]},risk_factors_diagnostics:[],form_risk_factors:[{nomenclature:"",calc_name:"FINDRISK",obj:findrisk_vars},{nomenclature:"",calc_name:"Riesgo OMS/OPS",obj:oms_ops_vars},{nomenclature:"",calc_name:"Inter Heart",obj:inter_heart_vars},{nomenclature:"%",calc_name:"Evaluación del riesgo cardiovascular (10 años, Framingham 2008)",obj:heart_risk_framingham_vars}],risk_factors_list:{current_list:[],previous_list:[]},risk_factors_calc_list:[],defaultItems:{risk_factors:{appointment_id:"",treatment_dialog:!1,treatment_selected:{name:""},risk_factors:[{name:"HTA",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Dislipidemia",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Sobrepeso",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Obesidad",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Pre DMt2",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"DMt2",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Arritmia",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Cardiopatía Isquémica",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Insuficiencia Cardíaca",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""},{name:"Tabaquismo",diagnostic:"No",has_treatment:"No",same_treatment:"",comment:""}]}}},patient_plan:{loading:!1,treatment_edit_dialog:!1,treatment_view_dialog:!1,save_loading:!1,alreadySaved:!1,items:[],select:[{text:"Sí",value:"1"},{text:"No",value:"0"}],headers:[{text:"Fecha",value:"created_at"},{text:"Nutrición",align:"start",value:"nutrition"},{text:"Plan de ejercicio",value:"exercise_plan"},{text:"Exámenes paraclínicos",value:"clinics_exams"}],editedItem:{nutrition:"",exercise_plan:"",previous_treatments:"0",clinics_exams:[{name:"Laboratorio",value:"0"},{name:"Rayos X de Torax",value:"0"},{name:"Ecocardiograma",value:"0"},{name:"Duplex arterial",value:"0"},{name:"Angio-Tac coronaria",value:"0"}],registered_at:moment().format("YYYY-MM-DD")},defaultItem:{nutrition:"",exercise_plan:"",previous_treatments:"0",clinics_exams:[{name:"Laboratorio",value:"0"},{name:"Rayos X de Torax",value:"0"},{name:"Ecocardiograma",value:"0"},{name:"Duplex arterial",value:"0"},{name:"Angio-Tac coronaria",value:"0"}],registered_at:moment().format("YYYY-MM-DD")}},genders:[{name:"Masculino",gender:"M"},{name:"Femenino",gender:"F"}],document_types:[{text:"DNI",value:"DNI"},{text:"RUT",value:"RUT"},{text:"Cédula",value:"cédula"},{text:"Pasaporte",value:"pasaporte"}],editedIndex:-1,editedViewIndex:-1,editedItem:{meta:{instagram:"",facebook:"",twitter:""}},defaultItem:{meta:{instagram:"",facebook:"",twitter:""},telegram:"0",whatsapp:"0",sms:"0"}},computed:{formTitle(){return-1===this.editedIndex?"Añadir nuevo paciente":"Editar ficha del paciente - N° de historia: "+this.editedItem.patient_id},AppointmentFormTitle(){const t=this.patient_appointments;return-1===t.editedIndex?"Añadir nueva cita":"Editar cita del paciente "},RecipesFormTitle(){const t=this.recipes;return-1===t.editedIndex?"Añadir nuevo récipe":"Editar récipe "},ReportsFormTitle(){const t=this.reports;return-1===t.editedIndex?"Añadir nuevo informe":"Editar informe "}},watch:{tab(){void 0!==this.$refs.edit_tabs&&this.$refs.edit_tabs.$el.scrollIntoView({behavior:"smooth"})},dialog(t){t||this.close()},dialogDelete(t){t||this.closeDelete()},appointmentDialog(t){t||this.closeAppointment()},appointmentDialogDelete(t){t||this.closeAppointmentDelete()},birthdate_modal(t){t&&this.$nextTick(()=>this.$refs.register_patient_bd.activePicker="YEAR")},ph_cd_heart_failure_dx_year_modal(t){t&&this.$nextTick(()=>this.$refs.cd_heart_failure_datepicker.activePicker="YEAR")},ph_cd_ischemic_cardiopathy_sca_year_modal(t){t&&this.$nextTick(()=>this.$refs.cd_ischemic_cardiopathy_sca_datepicker.activePicker="YEAR")},ph_cd_ischemic_cardiopathy_sca_im_year_modal(t){t&&this.$nextTick(()=>this.$refs.cd_ischemic_cardiopathy_sca_im_datepicker[this.ref_index].activePicker="YEAR")},ph_cd_ischemic_cardiopathy_sca_ua_year_modal(t){t&&this.$nextTick(()=>this.$refs.cd_ischemic_cardiopathy_sca_ua_datepicker[this.ref_index].activePicker="YEAR")},ph_cd_ischemic_cardiopathy_scai_ua_year_modal(t){t&&this.$nextTick(()=>this.$refs.cd_ischemic_cardiopathy_sca_ua_datepicker[this.ref_index].activePicker="YEAR")},ph_cd_ischemic_cardiopathy_scai_ua_year_modal(t){t&&this.$nextTick(()=>this.$refs.cd_ischemic_cardiopathy_scai_ua_datepicker.activePicker="YEAR")},smoking_start_year_modal(t){t&&this.$nextTick(()=>this.$refs.smoking_start_year_datepicker.activePicker="YEAR")},smoking_quit_year_modal(t){t&&this.$nextTick(()=>this.$refs.smoking_quit_year_datepicker.activePicker="YEAR")},ph_cd_ischemic_cardiopathy_surgery_year_modal(t){t&&this.$nextTick(()=>this.$refs.cd_ischemic_cardiopathy_surgery_year_datepicker.activePicker="YEAR")},ph_cd_ischemic_cardiopathy_percutaneous_year_modal(t){t&&this.$nextTick(()=>this.$refs.cd_ischemic_cardiopathy_percutaneous_year_datepicker.activePicker="YEAR")},cv_disease_year_modal(t){t&&this.$nextTick(()=>this.$refs.cv_disease_year_datepicker[this.ref_index].activePicker="YEAR")},arritmia_year_modal(t){t&&this.$nextTick(()=>this.$refs.arritmia_year_datepicker[this.ref_index].activePicker="YEAR")}},created(){this.initialize()},mounted(){},methods:{initialize(){var t=api_url+"patients/get",e=this;e.$http.get(t).then(t=>{t.body.forEach(t=>{Array.isArray(t.meta)&&(t.meta={})}),e.patients=t.body,e.comparison.patients=t.body,e.comparison.patients_filtered=t.body,e.initializeMaterialTemplates()},t=>{}).then(a=>{t+="-external",e.comparison.external_loading=!0,e.$http.get(t).then(t=>{e.comparison.external_loading=!1,e.comparison.external_patients=t.body,e.comparison.external_patients_filtered=t.body},t=>{e.comparison.external_loading=!1})})},initializeMaterialTemplates(){var t=this;url=api_url+"material-templates/get",t.templates_loading=!0,t.$http.get(url).then(e=>{t.templates_loading=!1,e.body.length>0&&(t.templates=e.body,t.filtered_templates=e.body)},e=>{t.templates_loading=!1})},initializeRecipes(){var t=this,e=api_url+"recipes/get/"+t.editedItem.patient_id;t.recipes.items=[],t.$http.get(e).then(e=>{e.body.forEach((e,a)=>{item=e,item.diagnostics=JSON.parse(e.diagnostics),item.instructions=JSON.parse(e.instructions),t.recipes.items.push(item)})},t=>{})},initializeReports(){var t=this,e=api_url+"reports/get/"+t.editedItem.patient_id;t.reports.items=[],t.$http.get(e).then(e=>{e.body.forEach(e=>{t.reports.items.push(e)})},t=>{})},initializeExams(){var t=this,e=api_url+"medical-exams/get-exams-list";t.$http.get(e).then(e=>{t.patient_laboratory_exams.exams=e.body},t=>{})},initializeExamsFiles(){var t=this,e=api_url+"medical-exams/get-exam-files/"+t.editedItem.patient_id;t.$http.get(e).then(e=>{t.patient_laboratory_exams.exam_files=e.body,t.views.patient_laboratory_exams.exam_files=e.body},t=>{})},initializeAppointments(){var t=this;if(t.general_save=!1,t.getDoctors(),0==t.patient_appointments.appointments.length){t.patient_appointments.current_appointment={},t.patient_appointments.previous_appointment={};var e=api_url+"appointments/get/"+t.editedItem.patient_id;t.$http.get(e).then(e=>{if(t.patient_appointments.appointments=e.body,e.body.length>0){var a=t.patient_appointments,i=a.appointments.length,r=a.appointments[i-1];if(r.patient_id=t.editedItem.patient_id,i>1){var n=i>1?a.appointments[i-2]:{};n.patient_id=t.editedItem.patient_id,t.patient_appointments.previous_appointment=n}t.patient_appointments.current_appointment=r}},t=>{}).then(()=>{t.initializeHistory()})}},initializeComparisonAppointments(){var t=this,e=t.comparison.appointments;e.loading=!0,e.current_patient={},e.patient_to_compare={};var a=api_url+"appointments/get/comparison",i={current_patient_id:t.comparison.patient_selected.patient_id,patient_to_compare_id:t.comparison.patient_to_compare.patient_id};t.$http.post(a,i).then(a=>{a.body.hasOwnProperty("current_patient_appointments")&&a.body.hasOwnProperty("patient_to_compare_appointments")&&(e.current_patient=a.body.current_patient_appointments.length>1?a.body.current_patient_appointments[a.body.current_patient_appointments.length-1]:a.body.current_patient_appointments[0],e.current_patient.patient_id=t.comparison.patient_selected.patient_id,e.patient_to_compare=a.body.patient_to_compare_appointments.length>1?a.body.patient_to_compare_appointments[a.body.patient_to_compare_appointments.length-1]:a.body.patient_to_compare_appointments[0],e.patient_to_compare.patient_id=t.comparison.patient_to_compare.patient_id,t.initializeComparisonHistory()),e.loading=!1},t=>{e.loading=!1})},openExternalAppointmentForm(t){var e=this;e.general_save=!1,e.getDoctors(),e.editedIndex=e.patients.indexOf(t),e.editedItem=Object.assign({},t),e.patient_appointments.editedItem=Object.assign({},e.patient_appointments.defaultItem),e.patient_appointments.outside_dialog=!0},initializeAnthropometry(t=!1){var e=this;e.general_save=!1;var a=api_url+"anthropometry/get",i={patient_id:e.editedItem.patient_id,appointment_id:e.patient_appointments.current_appointment.appointment_id};e.$http.post(a,i).then(a=>{e.patient_anthropometry.editedItem=a.body.hasOwnProperty("current_anthropometry")&&a.body.current_anthropometry.hasOwnProperty("appointment_id")?a.body.current_anthropometry:Object.assign({},e.patient_anthropometry.defaultItem),e.patient_anthropometry.history=a.body.antropometry_history,t&&(e.reports.editedItem.meta.anthropometry.item=e.patient_anthropometry.editedItem)},t=>{})},initializeComparisonAnthropometry(t=!1){var e=this,a=e.comparison.anthropometry;if(t){a.average_loading=!0;var i=api_url+"anthropometry/get/comparison-average",r=[],n=[];e.comparison.patients_filtered.forEach(t=>{r.push(t.patient_id)}),e.comparison.external_patients_filtered.forEach(t=>{n.push(t.patient_id)});var s={patient_ids:r,external_patient_ids:n};e.$http.post(i,s).then(t=>{t.body.hasOwnProperty("current_patient_items")&&t.body.hasOwnProperty("patient_to_compare_items")&&(a.current_patient=t.body.current_patient_items.length>1?t.body.current_patient_items[t.body.current_patient_items.length-1]:t.body.current_patient_items[0],a.patient_to_compare=t.body.patient_to_compare_items.length>1?t.body.patient_to_compare_items[t.body.patient_to_compare_items.length-1]:t.body.patient_to_compare_items[0]),a.average_loading=!1},t=>{a.average_loading=!1})}else{a.loading=!0;i=api_url+"anthropometry/get/comparison",s={current_patient_id:e.comparison.patient_selected.patient_id,patient_to_compare_id:e.comparison.patient_to_compare.patient_id};e.$http.post(i,s).then(t=>{t.body.hasOwnProperty("current_patient_items")&&t.body.hasOwnProperty("patient_to_compare_items")&&(a.current_patient=t.body.current_patient_items.length>1?t.body.current_patient_items[t.body.current_patient_items.length-1]:t.body.current_patient_items[0],a.patient_to_compare=t.body.patient_to_compare_items.length>1?t.body.patient_to_compare_items[t.body.patient_to_compare_items.length-1]:t.body.patient_to_compare_items[0]),a.loading=!1},t=>{a.loading=!1})}},setAnthropometryVars(){var t=this,e=t.patient_anthropometry,a=api_url+"anthropometry/get",i={patient_id:t.editedItem.patient_id,appointment_id:t.patient_appointments.current_appointment.appointment_id};t.$http.post(a,i).then(a=>{e.editedItem=a.body.hasOwnProperty("current_anthropometry")&&a.body.current_anthropometry.hasOwnProperty("appointment_id")?a.body.current_anthropometry:Object.assign({},e.defaultItem),t.patient_risk_factors.selectedForm.obj.vars.weight=e.editedItem.weight,t.patient_risk_factors.selectedForm.obj.vars.weight_suffix=e.editedItem.weight_suffix,t.patient_risk_factors.selectedForm.obj.vars.height=e.editedItem.height,t.patient_risk_factors.selectedForm.obj.vars.height_suffix=e.editedItem.height_suffix,t.patient_risk_factors.selectedForm.obj.vars.perimeter=e.editedItem.abdominal_waist,t.patient_risk_factors.selectedForm.obj.vars.perimeter_suffix=e.editedItem.abdominal_waist_suffix,t.patient_risk_factors.selectedForm.obj.vars.bmi=t.getBMI(t.patient_risk_factors.selectedForm.obj.vars.weight,t.patient_risk_factors.selectedForm.obj.vars.height,t.patient_risk_factors.selectedForm.obj.vars.weight_suffix,t.patient_risk_factors.selectedForm.obj.vars.height_suffix).split(" ")[0]},t=>{})},initializeHistory(){var t=this,e=t.patient_history;t.general_save=!1,e.form.history_content=Object.assign({},e.defaultItem);var a=api_url+"history/get/"+t.editedItem.patient_id;t.$http.get(a).then(a=>{if(a.body.length>0){var i=[];a.body.forEach(a=>{var r={appointment_id:a.appointment_id,history_content:JSON.parse(a.history_content),created_at:a.created_at,updated_at:a.updated_at};i.push(r),parseInt(r.appointment_id)==parseInt(t.patient_appointments.current_appointment.appointment_id)&&(e.form.history_content=r.history_content)}),e.items=i}},t=>{})},initializeComparisonHistory(){var t=this,e=t.comparison.history;e.loading=!0,e.current_patient={},e.patient_to_compare={};var a=api_url+"history/get/comparison",i={current_patient_id:t.comparison.patient_selected.patient_id,patient_to_compare_id:t.comparison.patient_to_compare.patient_id};t.$http.post(a,i).then(t=>{t.body.hasOwnProperty("current_patient_items")&&t.body.hasOwnProperty("patient_to_compare_items")&&(e.current_patient=t.body.current_patient_items.length>1?t.body.current_patient_items[t.body.current_patient_items.length-1]:t.body.current_patient_items[0],void 0!==e.current_patient&&(e.current_patient.history_content=JSON.parse(e.current_patient.history_content)),e.patient_to_compare=t.body.patient_to_compare_items.length>1?t.body.patient_to_compare_items[t.body.patient_to_compare_items.length-1]:t.body.patient_to_compare_items[0],void 0!==e.patient_to_compare&&(e.patient_to_compare.history_content=JSON.parse(e.patient_to_compare.history_content))),e.loading=!1},t=>{e.loading=!1})},initializePhysicalExams(t=!1){var e=this,a=e.patient_physical_exam;a.content=Object.assign({},a.defaultItem),a.loading=!0;var i=api_url+"patient-physical-exams/get/"+e.editedItem.patient_id;e.$http.get(i).then(i=>{if(a.loading=!1,i.body.length>0){var r=[];i.body.forEach(t=>{var i={appointment_id:t.appointment_id,content:JSON.parse(t.content),created_at:t.created_at,updated_at:t.updated_at};r.push(i),parseInt(i.appointment_id)==parseInt(e.patient_appointments.current_appointment.appointment_id)&&(a.content=i.content)}),a.items=r}t&&(e.reports.editedItem.meta.physical_exam.item=a.content)},t=>{})},initializeComparisonPhysicalExams(){var t=this,e=t.comparison.physical_exams;e.loading=!0,e.current_patient={},e.patient_to_compare={};var a=api_url+"patient-physical-exams/get/comparison",i={current_patient_id:t.comparison.patient_selected.patient_id,patient_to_compare_id:t.comparison.patient_to_compare.patient_id};t.$http.post(a,i).then(t=>{t.body.hasOwnProperty("current_patient_items")&&t.body.hasOwnProperty("patient_to_compare_items")&&(e.current_patient=t.body.current_patient_items.length>1?t.body.current_patient_items[t.body.current_patient_items.length-1]:t.body.current_patient_items[0],e.current_patient.content=JSON.parse(e.current_patient.content),e.patient_to_compare=t.body.patient_to_compare_items.length>1?t.body.patient_to_compare_items[t.body.patient_to_compare_items.length-1]:t.body.patient_to_compare_items[0],e.patient_to_compare.content=JSON.parse(e.patient_to_compare.content)),e.loading=!1},t=>{e.loading=!1})},initializeElectroCardiograms(t=!1){var e=this,a=e.patient_electro_cardiogram;a.content=Object.assign({},a.defaultItem),a.loading=!0;var i=api_url+"patient-electro-cardiograms/get/"+e.editedItem.patient_id;e.$http.get(i).then(i=>{if(a.loading=!1,i.body.length>0){var r=[];i.body.forEach(t=>{var i={appointment_id:t.appointment_id,content:JSON.parse(t.content),created_at:t.created_at,updated_at:t.updated_at};r.push(i),parseInt(i.appointment_id)==parseInt(e.patient_appointments.current_appointment.appointment_id)&&(a.content=i.content)}),a.items=r}t&&(e.reports.editedItem.meta.electro_cardiogram.item=a.content)},t=>{})},initializeComparisonElectroCardiogram(){var t=this,e=t.comparison.electro_cardiogram;e.loading=!0,e.current_patient={},e.patient_to_compare={};var a=api_url+"patient-electro-cardiograms/get/comparison",i={current_patient_id:t.comparison.patient_selected.patient_id,patient_to_compare_id:t.comparison.patient_to_compare.patient_id};t.$http.post(a,i).then(t=>{t.body.hasOwnProperty("current_patient_items")&&t.body.hasOwnProperty("patient_to_compare_items")&&(e.current_patient=t.body.current_patient_items.length>1?t.body.current_patient_items[t.body.current_patient_items.length-1]:t.body.current_patient_items[0],e.current_patient.content=JSON.parse(e.current_patient.content),e.patient_to_compare=t.body.patient_to_compare_items.length>1?t.body.patient_to_compare_items[t.body.patient_to_compare_items.length-1]:t.body.patient_to_compare_items[0],e.patient_to_compare.content=JSON.parse(e.patient_to_compare.content)),e.loading=!1},t=>{e.loading=!1})},initializeEchocardiograms(t=!1){var e=this,a=e.patient_echocardiogram;a.content=a.defaultItem,a.loading=!0;var i=api_url+"patient-echocardiograms/get/"+e.editedItem.patient_id;e.$http.get(i).then(i=>{if(i.body.length>0){var r=[];i.body.forEach(t=>{var i={appointment_id:t.appointment_id,content:t.content,created_at:t.created_at,updated_at:t.updated_at};r.push(i),parseInt(i.appointment_id)==parseInt(e.patient_appointments.current_appointment.appointment_id)&&(a.content=i.content)}),a.items=r,t&&(e.reports.editedItem.meta.echocardiogram.item=a.content)}},t=>{})},initializeComparisonEchocardiograms(){var t=this,e=t.comparison.echocardiogram;e.loading=!0,e.current_patient={},e.patient_to_compare={};var a=api_url+"patient-echocardiograms/get/comparison",i={current_patient_id:t.comparison.patient_selected.patient_id,patient_to_compare_id:t.comparison.patient_to_compare.patient_id};t.$http.post(a,i).then(t=>{t.body.hasOwnProperty("current_patient_items")&&t.body.hasOwnProperty("patient_to_compare_items")&&(e.current_patient=t.body.current_patient_items.length>1?t.body.current_patient_items[t.body.current_patient_items.length-1]:t.body.current_patient_items[0],e.patient_to_compare=t.body.patient_to_compare_items.length>1?t.body.patient_to_compare_items[t.body.patient_to_compare_items.length-1]:t.body.patient_to_compare_items[0]),e.loading=!1},t=>{e.loading=!1})},initializeLifeStyle(){var t=this,e=t.patient_life_style;e.loading=!0,e.editedItem=Object.assign({},e.defaultItem);var a=api_url+"patient-life-style/get/"+t.editedItem.patient_id;t.$http.get(a).then(a=>{if(e.loading=!1,a.body.length>0){var i=[];a.body.forEach((a,r)=>{a.exercise=JSON.parse(a.exercise),a.smoking=JSON.parse(a.smoking),i.push(a),parseInt(a.appointment_id)==parseInt(t.patient_appointments.current_appointment.appointment_id)&&(e.editedItem=a)}),e.items=i}},t=>{e.loading=!1})},initializePlans(){var t=this,e=t.patient_plan;t.alreadySaved=!1,e.loading=!0,e.save_loading=!0,e.editedItem=Object.assign({},e.defaultItem);var a=api_url+"patient-plans/get/"+t.editedItem.patient_id;t.$http.get(a).then(a=>{if(e.save_loading=!1,e.loading=!1,a.body.length>0){var i=[];a.body.forEach((a,r)=>{a.clinics_exams=JSON.parse(a.clinics_exams),i.push(a),parseInt(a.appointment_id)==parseInt(t.patient_appointments.current_appointment.appointment_id)&&(e.editedItem=a)}),e.items=i}},t=>{e.loading=!1,e.save_loading=!1})},initializeFactorsRisk(t){var e=this;e.general_save=!1;var a={patient_id:e.editedItem.patient_id,current_appointment:e.patient_appointments.current_appointment.appointment_id,previous_appointment:e.patient_appointments.previous_appointment.appointment_id};if(t){e.patient_risk_factors.risk_factors_list.current_list=[],e.patient_risk_factors.risk_factors_list.previous_list=[],e.patient_risk_factors.risk_factors_loaded=!0;var i=api_url+"patient-risk-factors/get/";e.$http.post(i,a).then(t=>{e.patient_risk_factors.risk_factors_list.current_list=t.body.hasOwnProperty("current_list")?t.body.current_list:[],e.patient_risk_factors.risk_factors_list.previous_list=t.body.hasOwnProperty("previous_list")?t.body.previous_list:[],e.patient_risk_factors.risk_factors_loaded=!1},t=>{})}e.patient_risk_factors.selectedForm={calc_name:"",obj:{results:""}};i=api_url+"patient-risk-factors-diagnostic/get/";e.patient_risk_factors.risk_factors=Object.assign({},e.patient_risk_factors.defaultItems.risk_factors),e.patient_risk_factors.risk_factors_diagnostics=[],e.$http.post(i,a).then(t=>{if(t.body.hasOwnProperty("current_risk_factors_diagnostics")&&t.body.current_risk_factors_diagnostics.hasOwnProperty("risk_factors")){t.body.current_risk_factors_diagnostics.risk_factors=JSON.parse(t.body.current_risk_factors_diagnostics.risk_factors);var i=t.body.current_risk_factors_diagnostics;i.patient_id=a.patient_id,i.appointment_id=a.current_appointment,e.patient_risk_factors.rf.appointment_id=i.appointment_id,e.patient_risk_factors.rf.risk_factors=i.risk_factors,e.patient_risk_factors.rf.created_at=i.created_at,e.patient_risk_factors.rf.updated_at=i.updated_at}else{var r=e.patient_history.form.history_content;e.patient_risk_factors.rf.risk_factors.forEach(t=>{"HTA"==t.name?t.diagnostic=parseInt(r.diseases.hta.active)?"Sí":"No":"Dislipidemia"==t.name?t.diagnostic=parseInt(r.diseases.dyslipidemia.active)?"Sí":"No":"Pre DMt2"==t.name?t.diagnostic=parseInt(r.diseases.pre_dtm2.active)?"Sí":"No":"DMt2"==t.name?t.diagnostic=parseInt(r.diseases.dtm2.active)?"Sí":"No":"Tabaquismo"==t.name?t.diagnostic=parseInt(r.diseases.smoking.active)?"Sí":"No":"Cardiopatía Isquémica"==t.name?t.diagnostic=parseInt(r.cardiovascular_diseases.ischemic_cardiopathy.sca.active)?"Sí":"No":"Arritmia"==t.name?t.diagnostic=""!=r.cardiovascular_diseases.arritmia.type?"Sí":"No":"Insuficiencia Cardíaca"==t.name?t.diagnostic=parseInt(r.cardiovascular_diseases.heart_failure.active)?"Sí":"No":t.diagnostic="No"})}if(t.body.hasOwnProperty("risk_factors_diagnostics")&&t.body.risk_factors_diagnostics.length>0){var n=[];t.body.risk_factors_diagnostics.forEach(t=>{var e=t;e.risk_factors=JSON.parse(e.risk_factors),n.push(e)}),e.patient_risk_factors.risk_factors_diagnostics=n}},t=>{})},initializeComparisonFactorsRisk(t){var e=this,a=e.comparison.diagnostics;a.loading=!0,a.rf_loading=!0,a.items.current_patient=[],a.items.patient_to_compare=[],a.risk_factors.current_patient=[],a.risk_factors.patient_to_compare=[];var i={current_patient_id:e.comparison.patient_selected.patient_id,patient_to_compare_id:e.comparison.patient_to_compare.patient_id};if(t){e.patient_risk_factors.rf_loading=!0;var r=api_url+"patient-risk-factors/get/comparison";e.$http.post(r,i).then(t=>{if(t.body.hasOwnProperty("current_patient_items")&&t.body.current_patient_items.length>1||t.body.hasOwnProperty("patient_to_compare_items")&&t.body.patient_to_compare_items.length>1){var i=[],r=[];e.patient_risk_factors.form_risk_factors.forEach(e=>{var a=t.body.current_patient_items.filter(t=>t.name==e.calc_name),n=t.body.patient_to_compare_items.filter(t=>t.name==e.calc_name);console.log({rfc_results:a,rtfc_results:n}),a.length>0&&i.push(a.length>=2?a[a.length-1]:a[0]),n.length>0&&r.push(n.length>=2?n[n.length-1]:n[0])}),a.risk_factors.current_patient=i,a.risk_factors.patient_to_compare=r}a.rf_loading=!1},t=>{a.rf_loading=!1})}r=api_url+"patient-risk-factors-diagnostic/get/comparison";e.$http.post(r,i).then(t=>{if(t.body.hasOwnProperty("current_patient_items")&&t.body.hasOwnProperty("patient_to_compare_items")){var e=t.body.current_patient_items.length>1?t.body.current_patient_items[t.body.current_patient_items.length-1]:t.body.current_patient_items[0];a.items.current_patient=void 0===e?[]:JSON.parse(e.risk_factors),dx_patient_to_compare=t.body.patient_to_compare_items.length>1?t.body.patient_to_compare_items[t.body.patient_to_compare_items.length-1]:t.body.patient_to_compare_items[0],a.items.patient_to_compare=void 0===dx_patient_to_compare?[]:JSON.parse(dx_patient_to_compare.risk_factors)}a.loading=!1},t=>{})},initializeVitalSigns(t=!1){var e=this,a=e.patient_vital_signs;a.takes=a.defaultItem,a.temperature=35,a.sat=75,e.general_save=!1;var i=api_url+"vital-signals/get/"+e.editedItem.patient_id;e.$http.get(i).then(i=>{if(a.records=[],i.body.length>0){var r=[];a.records=i.body.forEach(i=>{var n={appointment_id:i.appointment_id,sitting:JSON.parse(i.sitting),lying_down:JSON.parse(i.lying_down),standing:JSON.parse(i.standing),takes:JSON.parse(i.takes),created_at:i.created_at,updated_at:i.updated_at};if(r.push(n),parseInt(n.appointment_id)==parseInt(e.patient_appointments.current_appointment.appointment_id)&&(a.takes=n.takes,a.temperature=n.sitting.temperature,a.sat=n.sitting.sat,t)){var s={takes:n.takes,temperature:n.sitting.temperature,sat:n.sitting.sat};e.reports.editedItem.meta.vital_signs=s}}),a.records=r}},t=>{})},initializeComparisonVitalSigns(){var t=this,e=t.comparison.vital_signs;e.loading=!0,e.current_patient={},e.patient_to_compare={};var a=api_url+"vital-signals/get/comparison",i={current_patient_id:t.comparison.patient_selected.patient_id,patient_to_compare_id:t.comparison.patient_to_compare.patient_id};t.$http.post(a,i).then(t=>{t.body.hasOwnProperty("current_patient_items")&&t.body.hasOwnProperty("patient_to_compare_items")&&(e.current_patient=t.body.current_patient_items.length>1?t.body.current_patient_items[t.body.current_patient_items.length-1]:t.body.current_patient_items[0],e.current_patient.takes=JSON.parse(e.current_patient.takes),e.current_patient.sitting=JSON.parse(e.current_patient.sitting),e.current_patient.lying_down=JSON.parse(e.current_patient.lying_down),e.current_patient.standing=JSON.parse(e.current_patient.standing),e.current_patient.sat=JSON.parse(e.current_patient.standing.sat),e.current_patient.temperature=JSON.parse(e.current_patient.standing.temperature),e.patient_to_compare=t.body.patient_to_compare_items.length>1?t.body.patient_to_compare_items[t.body.patient_to_compare_items.length-1]:t.body.patient_to_compare_items[0],e.patient_to_compare.takes=JSON.parse(e.patient_to_compare.takes),e.patient_to_compare.sitting=JSON.parse(e.patient_to_compare.sitting),e.patient_to_compare.lying_down=JSON.parse(e.patient_to_compare.lying_down),
e.patient_to_compare.standing=JSON.parse(e.patient_to_compare.standing),e.patient_to_compare.sat=JSON.parse(e.patient_to_compare.standing.sat),e.patient_to_compare.temperature=JSON.parse(e.patient_to_compare.standing.temperature)),e.loading=!1},t=>{e.loading=!1})},loadGeneralStatistics(){var t=this,e=0,a=0,i=0,r=0,n=t.patients.filter(t=>"F"==t.gender);n.forEach(e=>{a+=1,i+=t.getTimeDiff(e.birthdate)});var s=t.patients.filter(t=>"M"==t.gender);s.forEach(a=>{e+=1,r+=t.getTimeDiff(a.birthdate)}),a>0&&(t.statistics.female.age_average=Math.round(i/a)),e>0&&(t.statistics.male.age_average=Math.round(r/e)),t.statistics.male.total_patients=s.length,t.statistics.female.total_patients=n.length},loadPatientsEntryStatistics(){var t=this;t.statistics.chart.loading=!0;for(var e=0;e<8;e++)t.statistics.chart.weekly_data.labels[e]=moment(t.statistics.chart.weekly_data.current_day).subtract(7-e,"days").format("MM-DD");t.statistics.chart.weekly_data.labels.forEach((e,a)=>{var i=t.patients.filter(t=>t.entry_date==moment().format("YYYY-")+e);t.statistics.chart.weekly_data.datasets[0].data[a]=i.length,t.statistics.chart.weekly_data.datasets[1].data[a]=i.filter(t=>"M"==t.gender).length,t.statistics.chart.weekly_data.datasets[2].data[a]=i.filter(t=>"F"==t.gender).length}),t.statistics.chart.monthly_data.months.forEach((e,a)=>{var i=t.patients.filter(t=>t.entry_date.includes(moment().format("YYYY-")+e));t.statistics.chart.monthly_data.datasets[0].data[a]=i.length,t.statistics.chart.monthly_data.datasets[1].data[a]=i.filter(t=>"M"==t.gender).length,t.statistics.chart.monthly_data.datasets[2].data[a]=i.filter(t=>"F"==t.gender).length}),t.statistics.chart.loading=!1,void 0!==t.$refs.monthly_chart&&t.$refs.monthly_chart.renderChart(t.statistics.chart.monthly_data),void 0!==t.$refs.weekly_chart&&t.$refs.weekly_chart.renderChart(t.statistics.chart.weekly_data)},loadAnthropometryStatistics(){var t=this,e=0,a=0,i=0,r=0;t.statistics.anthropometry.loading=!0;var n=api_url+"anthropometry/get-by-list";t.$http.post(n,t.patients).then(n=>{n.body.forEach(t=>{var n="lb"==t.weight_suffix?parseFloat(n/2.205).toFixed(2):parseFloat(t.weight).toFixed(2),s="in"==t.height_suffix?parseFloat(s/2.54).toFixed(2):parseFloat(t.height).toFixed(2),o="in"==t.abdominal_waist_suffix?parseFloat(o/2.54).toFixed(2):parseFloat(t.abdominal_waist).toFixed(2);(n>0||s>0)&&(e+=1,a+=parseFloat(n),i+=parseFloat(s),r+=parseFloat(o))}),t.statistics.anthropometry.items=n.body,e>0&&(t.statistics.anthropometry.weight=parseFloat(a/e),t.statistics.anthropometry.height=parseFloat(i/e),t.statistics.anthropometry.abdominal_waist=parseFloat(r/e),t.statistics.anthropometry.bmi=t.getBMI(t.statistics.anthropometry.weight,t.statistics.anthropometry.height,"kg","cm").replace(" kg/m2",""),t.statistics.anthropometry.cs=t.getCS(t.statistics.anthropometry.weight,t.statistics.anthropometry.height,"kg","cm").replace(" m2","")),t.statistics.anthropometry.loading=!1},e=>{t.statistics.anthropometry.loading=!1})},loadDiseasesStatistics(){var t=this,e={controlled:0,no_controlled:0},a={controlled:0,no_controlled:0},i={controlled:0,no_controlled:0};t.statistics.diseases.loading=!0;var r=api_url+"history/get-by-list";t.$http.post(r,t.patients).then(r=>{r.body.forEach(t=>{t.history_content=JSON.parse(t.history_content).diseases;var r=t.history_content.hta,n=t.history_content.dyslipidemia,s=t.history_content.dtm2;r.active&&(r.controlled?e.controlled=e.controlled+1:e.no_controlled=e.no_controlled+1),n.active&&(n.controlled?a.controlled=a.controlled+1:a.no_controlled=a.no_controlled+1),s.active&&(s.controlled?i.controlled=i.controlled+1:i.no_controlled=i.no_controlled+1)}),t.statistics.diseases.hta=e,t.statistics.diseases.dyslipidemia=a,t.statistics.diseases.dmt2=i,t.statistics.diseases.histories=r.body,t.statistics.diseases.loading=!1},e=>{t.statistics.diseases.loading=!1})},loadLaboratoryExamsStatistics(){var t=this;t.statistics.laboratory_exam.loading=!0;var e={patients:t.patients,exams:t.statistics.laboratory_exam.items},a=api_url+"medical-exams/get-exams-by-patient-list";t.$http.post(a,e).then(e=>{t.statistics.laboratory_exam.items.forEach(t=>{var a=e.body.filter(e=>e.name==t.name);t.items=a.length,a.forEach(e=>{t.total=t.total+parseInt(e.results)}),t.items>0&&(t.total=parseInt(t.total/a.length))}),t.statistics.laboratory_exam.loading=!1},e=>{t.statistics.laboratory_exam.loading=!1})},initializeBasicStatistics(){this.loadPatientsEntryStatistics(),this.loadGeneralStatistics(),this.loadAnthropometryStatistics(),this.loadDiseasesStatistics(),this.loadLaboratoryExamsStatistics()},loadDiagnosticsToRecipe(){var t=this;if(-1==t.recipes.editedIndex){var e=[];t.patient_risk_factors.rf.risk_factors.forEach(t=>{if(console.log(t),"Sí"==t.diagnostic){var a={diagnostic:t.name,treatment_goal:""};e.push(a)}}),t.recipes.editedItem.diagnostics=e}},loadDiagnosticsToReport(){var t=this;if(-1==t.reports.editedIndex){var e=[];t.patient_risk_factors.rf.risk_factors.forEach(t=>{if("Sí"==t.diagnostic){var a=t.name;e.push(a)}}),t.reports.editedItem.meta.diagnostics=e}},loadPlanToReport(){var t=this,e=t.patient_plan,a=api_url+"patient-plans/get/"+t.editedItem.patient_id;t.$http.get(a).then(a=>{if(e.save_loading=!1,e.loading=!1,a.body.length>0){var i=[];a.body.forEach((a,r)=>{a.clinics_exams=JSON.parse(a.clinics_exams),i.push(a),parseInt(a.appointment_id)==parseInt(t.patient_appointments.current_appointment.appointment_id)&&(e.editedItem=a)}),e.items=i}t.reports.editedItem.meta.plan=e.editedItem},t=>{e.loading=!1,e.save_loading=!1})},loadTreatmentsToReport(){var t=this;if(t.recipes.items.length<1){var e=api_url+"recipes/get/"+t.editedItem.patient_id;t.recipes.items=[],t.$http.get(e).then(e=>{if(e.body.forEach((e,a)=>{item=e,item.diagnostics=JSON.parse(e.diagnostics),item.instructions=JSON.parse(e.instructions),t.recipes.items.push(item)}),t.recipes.items.length>0){var a=t.recipes.items[t.recipes.items.length-1];a.instructions.forEach(e=>{var a={treatment:e.treatment,dosis:e.dosis,interval:e.schedule};t.reports.editedItem.meta.treatments.push(a)})}},t=>{})}else{var a=t.recipes.items[t.recipes.items.length-1];a.instructions.forEach(e=>{var a={treatment:e.treatment,dosis:e.dosis,interval:e.schedule};t.reports.editedItem.meta.treatments.push(a)})}},loadLaboratoryExamsToReport(){var t=this,e=api_url+"medical-exams/get-exams-appointment-results/"+t.patient_appointments.current_appointment.appointment_id;t.$http.get(e).then(e=>{t.reports.editedItem.meta.laboratory_exam.items=e.body},t=>{})},loadExtrasToReport(){this.loadDiagnosticsToReport(),this.loadTreatmentsToReport(),this.loadPlanToReport(),this.initializeAnthropometry(!0),this.initializePhysicalExams(!0),this.initializeEchocardiograms(!0),this.initializeElectroCardiograms(!0),this.initializeVitalSigns(!0),this.loadLaboratoryExamsToReport()},getCurrentFactorRisk(){var t=this,e=t.patient_risk_factors;e.risk_factors_calc_list=[];var a={name:e.selectedForm.calc_name,patient_id:t.editedItem.patient_id,appointment_id:t.patient_appointments.current_appointment.appointment_id};e.selectedForm.obj.results=0,e.selectedForm.hasOwnProperty("appointment_id")&&delete e.selectedForm.appointment_id;var i=api_url+"patient-risk-factors/get-current-risk-factor/";t.$http.post(i,a).then(t=>{if(Array.isArray(t.body.current_rf)&&t.body.current_rf.length>0){var a=t.body.current_rf[0];e.selectedForm.obj.vars=Object.assign({},JSON.parse(a.vars)),e.selectedForm.patient_id=a.patient_id,e.selectedForm.appointment_id=a.appointment_id,e.selectedForm.obj.results=a.results,e.selectedForm.obj.hasOwnProperty("normalize")&&e.selectedForm.obj.normalize()}Array.isArray(t.body.risk_factors)&&t.body.risk_factors.length>0&&(e.risk_factors_calc_list=t.body.risk_factors)},t=>{})},editRecipeItem(t){var e=this;e.recipes.editedIndex=e.recipes.items.indexOf(t),e.recipes.editedItem=Object.assign({},t),e.recipes.dialog=!0},editReportItem(t){var e=this;e.reports.editedIndex=e.reports.items.indexOf(t),e.reports.editedItem=Object.assign({},t),e.reports.dialog=!0},editItem(t){var e=this;e.general_save=!0,e.editedIndex=e.patients.indexOf(t),e.editedItem=Object.assign({},t),e.dialog=!0},showItem(t){var e=this;e.editedItem=Object.assign({},t),e.editedViewIndex=e.patients.indexOf(t),e.view_dialog=!0},editAppointmentItem(t){var e=this.patient_appointments;e.editedIndex=e.appointments.indexOf(t),e.editedItem=Object.assign({},t),e.dialog=!0},deleteItem(t){this.editedIndex=this.patients.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},deleteAppointmentItem(t){var e=this.patient_appointments;e.editedIndex=e.appointments.indexOf(t),e.editedItem=Object.assign({},t),e.dialogDelete=!0},deleteExamItem(t){var e=this.patient_laboratory_exams;e.editedIndex=e.exam_results.indexOf(t),e.editedItem=Object.assign({},t),e.dialogDelete=!0},deleteExamFileItem(t){var e=this.patient_laboratory_exams;e.dialogFileDelete=!0,e.editedFileIndex=e.exam_files.indexOf(t),e.editedFileItem=Object.assign({},t)},deleteRecipeItem(t){var e=this.recipes;e.dialogDelete=!0,e.editedIndex=e.items.indexOf(t),e.editedItem=Object.assign({},t)},deleteReportItem(t){var e=this.reports;e.dialogDelete=!0,e.editedIndex=e.items.indexOf(t),e.editedItem=Object.assign({},t)},deleteItemConfirm(){var t=this,e=api_url+"patients/delete";t.$http.post(e,t.editedItem).then(e=>{t.loading=!1,"success"==e.body.status&&t.patients.splice(t.editedIndex,1),t.closeDelete(),activateAlert(e.body.message,e.body.status)},t=>{})},deleteRecipeItemConfirm(){var t=this,e=api_url+"recipes/delete";t.$http.post(e,t.recipes.editedItem).then(e=>{"success"==e.body.status&&(t.recipes.items.splice(t.recipes.editedIndex,1),t.closeRecipeDelete()),activateAlert(e.body.message,e.body.status)},t=>{})},deleteReportItemConfirm(){var t=this,e=api_url+"reports/delete";t.$http.post(e,t.reports.editedItem).then(e=>{"success"==e.body.status&&(t.reports.items.splice(t.reports.editedIndex,1),t.closeReportDelete()),activateAlert(e.body.message,e.body.status)},t=>{})},deleteAppointmentItemConfirm(){var t=this,e=t.patient_appointments,a=api_url+"appointments/delete";t.$http.post(a,{appointment_id:e.editedItem.appointment_id,patient_id:t.editedItem.patient_id}).then(a=>{t.loading=!1,"success"==a.body.status&&e.appointments.splice(e.editedIndex,1),activateAlert(a.body.message,a.body.status),t.closeAppointmentDelete()},e=>{t.closeAppointmentDelete()})},deleteExamItemConfirm(){var t=this,e=t.patient_laboratory_exams,a=api_url+"medical-exams/delete";e.editedItem.exam_name=e.selectedExam.name,e.editedItem.patient_id=t.editedItem.patient_id,t.$http.post(a,e.editedItem).then(a=>{"success"==a.body.status&&e.exam_results.splice(e.editedIndex,1),t.closeExamDelete(),activateAlert(a.body.message,a.body.status)},e=>{t.closeExamDelete()})},deleteExamFileItemConfirm(){var t=this,e=t.patient_laboratory_exams,a=api_url+"medical-exams/delete-file";e.editedFileItem.patient_id=t.editedItem.patient_id,t.$http.post(a,e.editedFileItem).then(a=>{"success"==a.body.status&&e.exam_files.splice(e.editedFileIndex,1),t.closeFileExamDelete(),activateAlert(a.body.message,a.body.status)},e=>{t.closeFileExamDelete()})},close(t=!0){this.dialog=!1,t&&this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},closeView(){this.view_dialog=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},closeAppointment(){var t=this.patient_appointments;t.dialog=!1,this.$nextTick(()=>{t.editedItem=Object.assign({},this.defaultItem),t.editedIndex=-1})},closeRecipe(){var t=this.recipes;t.dialog=!1,this.$nextTick(()=>{t.editedItem=Object.assign({},this.defaultItem),t.editedIndex=-1})},closeReport(){var t=this.reports;t.dialog=!1,this.$nextTick(()=>{t.editedItem=Object.assign({},this.defaultItem),t.editedIndex=-1})},closeExam(){var t=this.patient_laboratory_exams;this.$nextTick(()=>{t.defaultItem.exam_date=t.editedItem.exam_date,t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1})},closeFileExam(){var t=this.patient_laboratory_exams;this.$nextTick(()=>{t.defaultItem.exam_date=t.editedFileItem.exam_date,t.editedFileItem=Object.assign({},t.defaultItem),t.editedFileIndex=-1})},closeDelete(){this.dialogDelete=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},closeRecipeDelete(){this.recipes.dialogDelete=!1,this.$nextTick(()=>{this.recipes.editedItem=Object.assign({},this.defaultItem),this.recipes.editedIndex=-1})},closeReportDelete(){this.reports.dialogDelete=!1,this.$nextTick(()=>{this.reports.editedItem=Object.assign({},this.reports.defaultItem),this.reports.editedIndex=-1})},closeAppointmentDelete(){var t=this.patient_appointments;t.dialogDelete=!1,this.$nextTick(()=>{t.editedItem=Object.assign({},this.defaultItem),t.editedIndex=-1})},closeExamDelete(){var t=this.patient_laboratory_exams;t.dialogDelete=!1,this.$nextTick(()=>{t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1})},closeFileExamDelete(){var t=this.patient_laboratory_exams;this.$nextTick(()=>{t.editedFileItem=Object.assign({},t.defaultItem),t.editedFileIndex=-1}),t.dialogFileDelete=!1},save(){var t=this;if(t.loading=!0,t.editedIndex>-1){var e=api_url+"patients/update";t.$http.post(e,t.editedItem).then(e=>{t.loading=!1,"success"==e.body.status&&(Object.assign(t.patients[t.editedIndex],t.editedItem),t.tab="tab-2",t.initializeAppointments()),activateAlert(e.body.message,e.body.status)},t=>{})}else{e=api_url+"patients/create";t.$http.post(e,t.editedItem).then(e=>{t.loading=!1,"success"==e.body.status&&(t.editedItem.patient_id=e.body.data.patient_id,t.editedItem.full_name=t.editedItem.first_name+" "+t.editedItem.last_name,t.patients.push(t.editedItem),t.close(!1),t.editItem(t.editedItem)),t.upload_button=!1,activateAlert(e.body.message,e.body.status)},e=>{t.loading=!1})}},saveAppointment(){var t=this,e=t.patient_appointments;if(e.editedItem.patient_id=t.editedItem.patient_id,e.editedItem.full_name=t.getDoctorFullName(e.editedItem.user_id),t.loading=!0,e.editedIndex>-1){var a=api_url+"appointments/update";t.$http.post(a,e.editedItem).then(a=>{t.loading=!1,"success"==a.body.status&&Object.assign(e.appointments[e.editedIndex],e.editedItem),activateAlert(a.body.message,a.body.status),t.closeAppointment()},e=>{t.loading=!1,t.closeAppointment()})}else{a=api_url+"appointments/create";t.$http.post(a,e.editedItem).then(a=>{t.loading=!1,"success"==a.body.status&&(e.editedItem.appointment_id=a.body.data.appointment_id),e.editedItem.appointment_finished=0,e.appointments.push(e.editedItem),1==e.appointments.length?e.current_appointment=Object.assign({},e.editedItem):(e.current_appointment=Object.assign({},e.editedItem),e.previous_appointment=e.appointments[e.appointments.length-2]),activateAlert(a.body.message,a.body.status),t.closeAppointment()},e=>{t.loading=!1,t.closeAppointment()})}},finishAppointment(){var t=this,e=t.patient_appointments;t.finish_loading=!0;var a=api_url+"appointments/finish";t.$http.post(a,e.current_appointment).then(a=>{t.finish_loading=!1,"success"==a.body.status&&(t.patient_plan.alreadySaved=!1),e.current_appointment.appointment_finished=1,activateAlert(a.body.message,a.body.status)},e=>{t.finish_loading=!1})},finishAppointmentAndCreateNext(){var t=this,e=t.patient_appointments;t.finish_loading=!0;var a=api_url+"appointments/finish";t.$http.post(a,e.current_appointment).then(a=>{t.finish_loading=!1,"success"==a.body.status&&(t.patient_plan.alreadySaved=!1),e.current_appointment.appointment_finished=1,t.finishOptionsDialog=!1,t.tab="tab-2",e.editedItem={},e.dialog=!0,activateAlert(a.body.message,a.body.status)},e=>{t.finish_loading=!1})},saveAnthropometry(){var t=this,e=t.patient_anthropometry;t.loading=!0;var a=api_url+"anthropometry/create",i=e.editedItem;i.appointment_id=i.hasOwnProperty("appointment_id")?i.appointment_id:t.patient_appointments.current_appointment.appointment_id,i.patient_id=t.editedItem.patient_id,i.hasOwnProperty("created_at")&&(a=api_url+"anthropometry/update"),t.$http.post(a,i).then(a=>{t.loading=!1,"success"==a.body.status&&(e.editedItem.hasOwnProperty("created_at")||(e.editedItem.created_at=moment().format("YYYY-MM-DD")),t.tab="tab-5"),activateAlert(a.body.message,a.body.status)},e=>{t.loading=!1})},saveHistory(t=!0){var e=this,a=e.patient_history;a.loading=!0;var i=api_url+"history/update";a.form.patient_id=e.editedItem.patient_id,a.form.appointment_id=e.patient_appointments.current_appointment.appointment_id,e.$http.post(i,a.form).then(i=>{a.loading=!1,t?"success"==i.body.status&&(e.tab="tab-4",e.initializeAnthropometry()):(e.patient_risk_factors.rf.treatment_dialog=!1,"success"==i.body.status&&(i.body.message="Tratamientos actualizados")),activateAlert(i.body.message,i.body.status)},t=>{a.loading=!1})},saveFactorRisk(){var t=this,e=t.patient_risk_factors;e.loading=!0;var a=api_url+"patient-risk-factors/update",i={appointment_id:e.selectedForm.obj.hasOwnProperty.appointment_id?e.selectedForm.obj.appointment_id:t.patient_appointments.current_appointment.appointment_id,patient_id:t.editedItem.patient_id,name:e.selectedForm.calc_name,results:e.selectedForm.obj.results,nomenclature:e.selectedForm.obj.nomenclature,vars:e.selectedForm.obj.vars};t.$http.post(a,i).then(t=>{e.loading=!1,activateAlert(t.body.message,t.body.status)},t=>{e.loading=!1})},saveFactorRiskDiagnostic(){var t=this;t.patient_risk_factors.diagnostic_loading=!0;var e=api_url+"patient-risk-factors-diagnostic/update";data={patient_id:t.editedItem.patient_id,risk_factors:t.patient_risk_factors.rf.risk_factors,appointment_id:t.patient_appointments.current_appointment.appointment_id},t.$http.post(e,data).then(e=>{t.patient_risk_factors.diagnostic_loading=!1,activateAlert(e.body.message,e.body.status)},e=>{t.patient_history.loading=!1})},saveExam(t,e){var a=this,i=a.patient_laboratory_exams,r=api_url+"medical-exams/create";i.editedItem.appointment_id=a.patient_appointments.current_appointment.appointment_id,i.editedItem.patient_id=a.editedItem.patient_id,i.editedItem.exam_name=i.selectedExam.name,i.editedItem.exam_id=i.selectedExam.exam_id,t&&(i.editedItem.vars=e),a.$http.post(r,i.editedItem).then(t=>{"success"==t.body.status&&(i.editedItem.patient_exam_id=t.body.data.patient_exam_id),i.exam_results.push(i.editedItem),activateAlert(t.body.message,t.body.status),a.closeExam()},t=>{a.closeExam()})},savePhysicalExam(){var t=this,e=t.patient_physical_exam,a={},i=api_url+"patient-physical-exams/update";e.loading=!0,a.content=e.content,a.appointment_id=t.patient_appointments.current_appointment.appointment_id,a.patient_id=t.editedItem.patient_id,t.$http.post(i,a).then(a=>{e.loading=!1,"success"==a.body.status&&(t.tab="tab-7",t.initializeElectroCardiograms()),activateAlert(a.body.message,a.body.status)},t=>{e.loading=!1,activateAlert("Error inesperado, intente de nuevo","error")})},saveElectroCardiogram(){var t=this,e=t.patient_electro_cardiogram,a={content:e.content,appointment_id:t.patient_appointments.current_appointment.appointment_id,patient_id:t.editedItem.patient_id},i=api_url+"patient-electro-cardiograms/update";e.loading=!0,t.$http.post(i,a).then(a=>{e.loading=!1,"success"==a.body.status&&(t.tab="tab-8",t.initializeEchocardiograms()),activateAlert(a.body.message,a.body.status)},t=>{e.loading=!1,activateAlert("Error inesperado, intente de nuevo","error")})},saveEchocardiogram(){var t=this,e=t.patient_echocardiogram,a={appointment_id:t.patient_appointments.current_appointment.appointment_id,patient_id:t.editedItem.patient_id,content:e.content},i=api_url+"patient-echocardiograms/update";e.loading=!0,t.$http.post(i,a).then(a=>{e.loading=!1,"success"==a.body.status&&(t.tab="tab-9",t.initializeExams(),t.initializeExamsFiles()),activateAlert(a.body.message,a.body.status)},t=>{e.loading=!1,activateAlert("Error inesperado, intente de nuevo","error")})},saveLifeStyle(){var t=this,e=t.patient_life_style,a=api_url+"patient-life-style/update";e.save_loading=!0,e.editedItem.patient_id=t.editedItem.patient_id,e.editedItem.appointment_id=t.patient_appointments.current_appointment.appointment_id,t.$http.post(a,e.editedItem).then(t=>{e.save_loading=!1,"success"==t.body.status&&(e.tab="tab-12"),activateAlert(t.body.message,t.body.status)},t=>{e.save_loading=!1,activateAlert("Error inesperado, intente de nuevo","error")})},savePlan(){var t=this,e=t.patient_plan,a=api_url+"patient-plans/create";e.save_loading=!0,e.editedItem.patient_id=t.editedItem.patient_id,e.editedItem.appointment_id=t.patient_appointments.current_appointment.appointment_id,t.$http.post(a,e.editedItem).then(a=>{e.save_loading=!1,"success"==a.body.status&&(e.alreadySaved=!0,t.finishOptionsDialog=!0),activateAlert(a.body.message,a.body.status)},t=>{e.save_loading=!1,activateAlert("Error inesperado, intente de nuevo","error")})},saveFileExam(){var t=this,e=t.patient_laboratory_exams;e.add_file_loading=!0;var a=api_url+"medical-exams/create-file";let i=new FormData;i.append("file_result",e.editedFileItem.file_result),i.append("exam_date",e.editedFileItem.exam_date),i.append("patient_id",t.editedItem.patient_id),t.$http.post(a,i).then(a=>{"success"==a.body.status&&(e.editedFileItem.patient_exam_file_id=a.body.data.patient_exam_file_id,e.editedFileItem.file_result=a.body.data.file_result,e.exam_files.push(e.editedFileItem)),activateAlert(a.body.message,a.body.status),e.add_file_loading=!1,t.closeFileExam()},a=>{e.add_file_loading=!1,t.closeFileExam()})},saveRecipe(){var t=this,e=t.recipes;e.add_loading=!0;let a=e.editedItem;if(a.patient_id=t.editedItem.patient_id,e.editedIndex>-1){var i=api_url+"recipes/update";t.$http.post(i,a).then(a=>{activateAlert(a.body.message,a.body.status),e.add_loading=!1,"success"==a.body.status&&(Object.assign(e.items[e.editedIndex],e.editedItem),t.closeRecipe())},a=>{e.add_loading=!1,t.closeRecipe()})}else{i=api_url+"recipes/create";t.$http.post(i,a).then(a=>{activateAlert(a.body.message,a.body.status),e.add_loading=!1,"success"==a.body.status&&(e.editedItem.recipe_id=a.body.data.recipe_id,e.editedItem.registered_at=moment().format("YYYY-MM-DD"),e.items.push(e.editedItem),t.closeRecipe())},a=>{e.add_loading=!1,t.closeRecipe()})}},saveReport(){var t=this,e=t.reports;e.add_loading=!0;let a=e.editedItem;if(a.patient_id=t.editedItem.patient_id,e.editedIndex>-1){var i=api_url+"reports/update";t.$http.post(i,a).then(a=>{activateAlert(a.body.message,a.body.status),e.add_loading=!1,"success"==a.body.status&&(Object.assign(e.items[e.editedIndex],e.editedItem),t.closeReport())},a=>{e.add_loading=!1,t.closeReport()})}else{i=api_url+"reports/create";t.$http.post(i,a).then(a=>{activateAlert(a.body.message,a.body.status),e.add_loading=!1,"success"==a.body.status&&(e.editedItem.report_id=a.body.data.report_id,e.editedItem.registered_at=moment().format("YYYY-MM-DD"),e.items.push(e.editedItem),t.closeReport())},a=>{e.add_loading=!1,t.closeReport()})}},downloadRecipe(t){var e=this;e.recipes;let a=Object.assign({},t);a.patient=e.editedItem,a.patient.age=moment().diff(a.patient.birthdate,"years");var i=api_url+"recipes/download";e.$http.post(i,a).then(t=>{if("success"==t.body.status){var e=t.body.data,i=document.createElement("a");i.href=e.content,document.body.append(i),i.download="recipe-"+a.appointment_date+".pdf",i.click(),i.remove()}},t=>{})},downloadReport(t){var e=this;e.reports;let a=Object.assign({},t);a.meta.anthropometry.item.bmi,a.meta.anthropometry.item.cs="N/A",parseFloat(a.meta.anthropometry.item.weight)>0&&parseFloat(a.meta.anthropometry.item.height)>0&&(a.meta.anthropometry.item.bmi=e.getBMI(a.meta.anthropometry.item.weight,a.meta.anthropometry.item.height,a.meta.anthropometry.item.weight_suffix,a.meta.anthropometry.item.height_suffix).replace("kg/m2",""),a.meta.anthropometry.item.cs=e.getCS(a.meta.anthropometry.item.weight,a.meta.anthropometry.item.height,a.meta.anthropometry.item.weight_suffix,a.meta.anthropometry.item.height_suffix).replace("m2",""));var i=0,r=0,n=0,s=0,o=0,p=0,d=0;a.meta.vital_signs.takes.forEach(t=>{p+=(t.pa_left_arm1_average+t.pa_right_arm1_average)/2,d+=(t.pa_left_arm2_average+t.pa_right_arm2_average)/2,0!=parseInt(t.frc)&&(r+=1,n+=parseInt(t.frc)),0!=parseInt(t.breathing_rate)&&(s++,o+=parseInt(t.breathing_rate))}),o=s>1?o/s:o,n=n>1?n/r:n,p/=3,d/=3,i=`${p} / ${d}`,a.meta.vital_signs.ta_average=i,a.meta.vital_signs.breathing_rate=o,a.meta.vital_signs.frc=n,a.patient=e.editedItem,a.patient.age=moment().diff(a.patient.birthdate,"years");var _=api_url+"reports/download";e.$http.post(_,a).then(t=>{if("success"==t.body.status){var e=t.body.data,i=document.createElement("a");i.href=e.content,document.body.append(i),i.download="informe-"+a.appointment_date+".pdf",i.click(),i.remove()}},t=>{})},calcVitalSigns(){var t=this,e={sitting:{pa_suffix:"mmHg",br_suffix:"rpm",t_suffix:"°C",frc_suffix:"lat x min",frc:t.patient_vital_signs.takes[0].frc,pa_right_arm1:t.patient_vital_signs.takes[0].pa_right_arm1_average,pa_right_arm2:t.patient_vital_signs.takes[0].pa_right_arm2_average,pa_left_arm1:t.patient_vital_signs.takes[0].pa_left_arm1_average,pa_left_arm2:t.patient_vital_signs.takes[0].pa_left_arm2_average,breathing_rate:t.patient_vital_signs.takes[0].breathing_rate,temperature:t.patient_vital_signs.temperature,sat:t.patient_vital_signs.sat},lying_down:{pa_suffix:"mmHg",br_suffix:"rpm",t_suffix:"°C",frc_suffix:"lat x min",frc:t.patient_vital_signs.takes[1].frc,pa_right_arm1:t.patient_vital_signs.takes[1].pa_right_arm1_average,pa_right_arm2:t.patient_vital_signs.takes[1].pa_right_arm2_average,pa_left_arm1:t.patient_vital_signs.takes[1].pa_left_arm1_average,pa_left_arm2:t.patient_vital_signs.takes[1].pa_left_arm2_average,breathing_rate:t.patient_vital_signs.takes[1].breathing_rate,temperature:t.patient_vital_signs.temperature,sat:t.patient_vital_signs.sat},standing:{pa_suffix:"mmHg",br_suffix:"rpm",t_suffix:"°C",frc_suffix:"lat x min",frc:t.patient_vital_signs.takes[0].frc,pa_right_arm1:t.patient_vital_signs.takes[0].pa_right_arm1_average,pa_right_arm2:t.patient_vital_signs.takes[2].pa_right_arm2_average,pa_left_arm1:t.patient_vital_signs.takes[2].pa_left_arm1_average,pa_left_arm2:t.patient_vital_signs.takes[2].pa_left_arm2_average,breathing_rate:t.patient_vital_signs.takes[2].breathing_rate,temperature:t.patient_vital_signs.temperature,sat:t.patient_vital_signs.sat}},a=api_url+"vital-signals/update";e.patient_id=t.editedItem.patient_id,e.appointment_id=t.patient_appointments.current_appointment.appointment_id,e.takes=t.patient_vital_signs.takes,t.$http.post(a,e).then(a=>{activateAlert(a.body.message,a.body.status),"success"==a.body.status&&(t.patient_vital_signs.results[0]=e,t.patient_vital_signs.show_results=!0)},t=>{})},getDoctors(){var t=this,e=api_url+"members/get-doctors";0==t.patient_appointments.doctors.length&&(t.patient_appointments.select=!0,t.$http.get(e).then(e=>{t.patient_appointments.select=!1,t.patient_appointments.doctors=e.body},e=>{t.patient_appointments.select=!1}))},getDoctorFullName(t){var e=this.patient_appointments,a=e.doctors.filter(e=>e.user_id==t);return a[0].full_name},getRiskFactorData(t){var e=this.patient_risk_factors.risk_factors_list,a=e.filter(e=>e.name==t);return a},filterExamsByName(t){var e=this.patient_laboratory_exams.exams.find(e=>e.name==t);return e},showExamInfo(t){switch(this.showExamResults(t),t.name){case"Colesterol LDL":var e=this,a=api_url+"medical-exams/get",i={exam_id:e.filterExamsByName("Colesterol Total").exam_id,patient_id:e.editedItem.patient_id},r={exam_id:e.filterExamsByName("Colesterol HDL").exam_id,patient_id:e.editedItem.patient_id},n={exam_id:e.filterExamsByName("Triglicérídos").exam_id,patient_id:e.editedItem.patient_id};e.$http.post(a,i).then(t=>{e.patient_laboratory_exams.formulas.cholesterol_ldl.vars.total_cholesterol=t.body.length>0?t.body[t.body.length-1].results:0},t=>{}),e.$http.post(a,r).then(t=>{e.patient_laboratory_exams.formulas.cholesterol_ldl.vars.c_HDL=t.body.length>0?t.body[t.body.length-1].results:0},t=>{}),e.$http.post(a,n).then(t=>{e.patient_laboratory_exams.formulas.cholesterol_ldl.vars.triglyceride_level=t.body.length>0?t.body[t.body.length-1].results:0},t=>{});break;case"Colesterol No HDL":e=this,a=api_url+"medical-exams/get",i={exam_id:e.filterExamsByName("Colesterol Total").exam_id,patient_id:e.editedItem.patient_id};var s={exam_id:e.filterExamsByName("Colesterol No HDL").exam_id,patient_id:e.editedItem.patient_id};e.$http.post(a,i).then(t=>{e.patient_laboratory_exams.formulas.cholesterol_no_hdl.vars.total_cholesterol=t.body.length>0?t.body[t.body.length-1].results:0},t=>{}),e.$http.post(a,s).then(t=>{e.patient_laboratory_exams.formulas.cholesterol_no_hdl.vars.c_HDL=t.body.length>0?t.body[t.body.length-1].results:0},t=>{})}},showExamResults(t){var e=this,a=e.patient_laboratory_exams;a.laboratory_exam=!0,a.selectedExam=t;var i=api_url+"medical-exams/get",r={exam_id:t.exam_id,patient_id:this.editedItem.patient_id};e.$http.post(i,r).then(t=>{a.exam_results=t.body},t=>{})},showComparisonExamResults(t){var e=this,a=e.comparison.laboratory_exams;a.loading=!0,a.selectedExam=t,a.examsListed=!0,a.current_patient=[],a.patient_to_compare=[];var i=api_url+"medical-exams/get/comparison",r={exam_id:t.exam_id,current_patient_id:e.comparison.patient_selected.patient_id,patient_to_compare_id:e.comparison.patient_to_compare.patient_id};e.$http.post(i,r).then(t=>{if(t.body.hasOwnProperty("current_patient_items")&&t.body.hasOwnProperty("patient_to_compare_items")){var e=t.body.current_patient_items.length>1?t.body.current_patient_items[t.body.current_patient_items.length-1]:t.body.current_patient_items[0];a.current_patient.push(e);var i=t.body.patient_to_compare_items.length>1?t.body.patient_to_compare_items[t.body.patient_to_compare_items.length-1]:t.body.patient_to_compare_items[0];a.patient_to_compare.push(i)}a.loading=!1},t=>{a.loading=!1})},showFileExamResults(t){var e=this,a=e.patient_laboratory_exams;a.laboratory_exam=!0,a.selectedExam=t;var i=api_url+"medical-exams/get-exam-files",r={exam_id:t.exam_id,patient_id:this.editedItem.patient_id};e.$http.post(i,r).then(t=>{a.exam_files=t.body},t=>{})},assignGeneralVars(){var t=this;""!=t.patient_risk_factors.selectedForm.calc_name&&t.getCurrentFactorRisk(),t.setAnthropometryVars(),t.patient_risk_factors.selectedForm.obj.vars.age=moment(t.editedItem.birthdate,"YYYY-MM-DD").fromNow().split(" ")[1],t.patient_risk_factors.selectedForm.obj.vars.gender=t.editedItem.gender},getBMI(t,e,a,i){if(0!=e&&0!=t){t="lb"==a?t/2.205:t,e="in"==i?2.54*e:e,e=Math.pow(e/100,2);var r=Math.round(10*t/e)/10;return NaN!=typeof r&&(r+=" kg/m2"),r}},getCS(t,e,a,i){if(0!=e&&0!=t){t="lb"==a?t/2.205:t,e="in"==i?2.54*e:e;var r=3600,n=Math.pow(e*t/r,.5),s=Math.round(100*n)/100;return NaN!=typeof s&&(s+=" m2"),s}},getVitalSignalsAverage(t,e){var a=0;if(sitting=t.sitting,lying_down=t.lying_down,standing=t.standing,"left"==e){0==parseInt(sitting.pa_left_arm1)&&0==parseInt(sitting.pa_left_arm2)||a++,0==parseInt(lying_down.pa_left_arm1)&&0==parseInt(lying_down.pa_left_arm2)||a++,0==parseInt(standing.pa_left_arm1)&&0==parseInt(standing.pa_left_arm2)||a++;var i=Math.round((parseInt(sitting.pa_left_arm1)+parseInt(lying_down.pa_left_arm1)+parseInt(standing.pa_left_arm1))/a),r=Math.round((parseInt(sitting.pa_left_arm2)+parseInt(lying_down.pa_left_arm2)+parseInt(standing.pa_left_arm2))/a),n=i-r,s=Math.round(r- -(i-r)/a);return{pulse_pressure:n,pam:s}}if("right"==e){0==parseInt(sitting.pa_right_arm1)&&0==parseInt(sitting.pa_right_arm2)||a++,0==parseInt(lying_down.pa_right_arm1)&&0==parseInt(lying_down.pa_right_arm2)||a++,0==parseInt(standing.pa_right_arm1)&&0==parseInt(standing.pa_right_arm2)||a++;i=Math.round((parseInt(sitting.pa_right_arm1)+parseInt(lying_down.pa_right_arm1)+parseInt(standing.pa_right_arm1))/a),r=Math.round((parseInt(sitting.pa_right_arm2)+parseInt(lying_down.pa_right_arm2)+parseInt(standing.pa_right_arm2))/a),n=i-r,s=Math.round(r- -(i-r)/a);return{pulse_pressure:n,pam:s}}},getAverage(t,e,a){var i=this,r=0,n=0;return t.forEach(t=>{if(0==parseInt(t)||null==typeof t||""==t)return!1;r++;var e=parseInt(t);n+=e}),r>0&&(n=Math.round(n/r)),i.patient_vital_signs.takes[e][a]=n,n},getFRCAverage(t){
var e=0,a=0;return t.forEach(t=>{if(0==parseInt(t)||null==typeof t||""==t)return!1;e++;var i=parseInt(t);a+=i}),e>0&&(a=Math.round(a/e)),a},getSDverage(t){var e=0,a=0;return t.forEach(t=>{if(0==parseInt(t)||null==typeof t||""==t)return!1;e++;var i=parseInt(t);a+=i}),e>0&&(a=Math.round(a/e)),a},calcCholesterolLDL(){var t=this;if(!t.$refs.ple_formulas_cholesterol_ldl.validate())return!1;var e=t.patient_laboratory_exams.formulas.cholesterol_ldl;t.patient_laboratory_exams.formulas.cholesterol_ldl.results=parseInt(e.vars.total_cholesterol)-parseInt(e.vars.c_HDL),t.patient_laboratory_exams.editedItem.results=parseInt(e.vars.total_cholesterol)-parseInt(e.vars.c_HDL)-parseInt(e.vars.triglyceride_level/5)},calcCholesterolNoHDL(){var t=this,e=t.patient_laboratory_exams.formulas.cholesterol_no_hdl;t.patient_laboratory_exams.formulas.cholesterol_ldl.results=parseInt(e.vars.total_cholesterol)-parseInt(e.vars.c_HDL),t.patient_laboratory_exams.editedItem.results=parseInt(e.vars.total_cholesterol)-parseInt(e.vars.c_HDL)},calcQTC(){var t=this,e=t.patient_electro_cardiogram.content,a=e.qt,i=e.fc;e.rr=60/parseInt(i),e.rr=parseFloat(e.rr),e.qtrau=656/(1+parseInt(i)/100),e.qtrau=parseInt(e.qtrau),e.qtbaz=parseInt(a)/Math.sqrt(parseFloat(e.rr)),e.qtbaz=parseInt(e.qtbaz),e.qtfra=parseInt(a)+.154*(1-parseFloat(e.rr)),e.qtfra=parseInt(e.qtfra),e.qtfri=parseInt(a)/Math.pow(parseFloat(e.rr),1/3),e.qtfri=parseInt(e.qtfri),e.qtcal=parseInt(a)/Math.pow(parseFloat(e.rr)*parseFloat(e.rr),.2),e.qtcal=parseInt(e.qtcal)},fagerstromTest(){var t=this,e=t.patient_life_style.calc.fagerstrom,a=e.vars,i=a.input1+a.input2+a.input3+a.input4+a.input5+a.input6;return e.result=i,i},getFagerStromScoreDescription(t){var e=this,a=t?parseInt(e.patient_life_style.calc.fagerstrom.result):parseInt(e.patient_life_style.editedItem.smoking.fagerstrom_test),i="";return i=""==a?"":a>=0&&a<=2?"Dependencia MUY BAJA":a>=3&&a<=4?"Dependencia BAJA":5==a?"Dependencia MODERADA":a>=6&&a<=7?"Dependencia ALTA":a>=8&&a<=10?"Dependencia ALTA":"",i},pregnancyAlert(t){var e=this,a=t,i="",r=a.find(t=>t.includes("BRA")||t.includes("IECAS"));return i=null!=r&&r.length>0&&"F"==e.editedItem.gender,i},gfrCkdEpiFx(){var t=this,e=t.editedItem,a=e.gender,i=t.patient_laboratory_exams.formulas.filt_glom,r="M"==a?1:1.018,n="M"==a?-.411:-.329,s="M"==a?.9:.7,o=i.vars.serum_creatinine,p=i.vars.race,d=parseFloat(moment().diff(e.birthdate,"years")),_=141*Math.pow(Math.min(o/s,1),n)*Math.pow(Math.max(o/s,1),-1.209)*Math.pow(.993,d)*r*p;return t.patient_laboratory_exams.formulas.filt_glom.results=_.toFixed(2),t.patient_laboratory_exams.editedItem.results=_.toFixed(2),_.toFixed(2)},gfrRrmdFx(){var t=this,e=t.editedItem,a=e.gender,i=t.patient_laboratory_exams.formulas.egfr_mdr_ckdepi,r="M"==a?1:.742,n=i.vars.serum_creatinine,s=i.vars.race,o=parseFloat(moment().diff(e.birthdate,"years"));Math.pow(n,-1.154),Math.pow(o,-.203);var p=175*Math.pow(n,-1.154)*Math.pow(o,-.203)*r*s;return t.patient_laboratory_exams.formulas.egfr_mdr_ckdepi.results=p.toFixed(2),t.patient_laboratory_exams.editedItem.results=p.toFixed(2),p.toFixed(2)},assignGFRVars(t){var e=this.patient_laboratory_exams.formulas,a=this.patient_laboratory_exams.formulas.egfr_mdr_ckdepi.vars;"CKD-EPI"==t&&(e.filt_glom.vars.serum_creatinine=a.serum_creatinine,e.filt_glom.vars.race=1.21==a.race?1.159:1)},prevImage(t){const e=t.target.files[0],a=new FileReader;a.readAsDataURL(e),a.onload=(t=>{this.editedItem.avatar=e,this.previewImage=t.target.result,this.upload_button=!0})},uploadImage(t){var e=this;let a=new FormData;var i=api_url+"patients/update-avatar";e.image_loading=!0,e.image_loading=!0,a.append("patient_id",e.editedItem.patient_id),a.append("avatar",e.editedItem.avatar),e.$http.post(i,a).then(t=>{e.image_loading=!1,"success"==t.body.status&&(e.upload_button=!1,e.editedItem.avatar=t.body.data.avatar),activateAlert(t.body.message,t.body.status)},t=>{})},diagnosticDateCheck(t){if(!t.detected_previously){if("Menos de un año"==t.diagnostic_date||"Entre 1 y 2 años"==t.diagnostic_date||"3 a 4 años"==t.diagnostic_date||"4 a 5 años"==t.diagnostic_date||"Más de 5 años"==t.diagnostic_date||"Más de 10 años"==t.diagnostic_date)return t.diagnostic_date=moment().format("YYYY[-]MM[-]DD"),!0;t.diagnostic_date=""==t.diagnostic_date?moment().format("YYYY[-]MM[-]DD"):t.diagnostic_date}},fromNow:t=>moment(t).format("LL"),getCurrentDate:t=>moment().format("YYYY-MM-DD"),addItemToArray(t,e){""==t&&null==typeof t||e.push(t)},addObjectToArray(t,e){""==t&&null==typeof t||e.push({name:t,group:"Group 4"})},getClinicExamsActive(t){var e=t.filter((t,e)=>parseInt(t.value));return e},getTimeDiff:t=>moment().diff(t,"years"),getOnlyYear:t=>""==t?"":moment(t).format("YYYY"),displayOnlyYear:t=>t.substring(0,4),resetPatientInformation(){this.patient_appointments.appointments=[]},searchFRTreatment(t){var e=this,a=e.patient_risk_factors;if(a.rf.hasOwnProperty("created_at")&&a.risk_factors_diagnostics.length>1){var i=a.risk_factors_diagnostics.length,r=a.risk_factors_diagnostics[i-2].risk_factors.find(e=>e.name==t);return void 0!==r&&"Sí"==r.diagnostic&&"Sí"==r.has_treatment?r.comment:""}i=a.risk_factors_diagnostics.length;return r=a.risk_factors_diagnostics[i-1].risk_factors.find(e=>e.name==t),void 0!==r&&"Sí"==r.diagnostic&&"Sí"==r.has_treatment?r.comment:""},hasPreviousFRTreatment(t){var e=this,a=e.patient_risk_factors;if(e.patient_appointments.previous_appointment.hasOwnProperty("appointment_id")){if(a.rf.hasOwnProperty("created_at")&&a.risk_factors_diagnostics.length>1){var i=a.risk_factors_diagnostics.length,r=a.risk_factors_diagnostics[i-2].risk_factors.find(e=>e.name==t);return void 0!==r&&"Sí"==r.diagnostic&&"Sí"==r.has_treatment}i=a.risk_factors_diagnostics.length;return r=a.risk_factors_diagnostics[i-1].risk_factors.find(e=>e.name==t),void 0!==r&&"Sí"==r.diagnostic&&"Sí"==r.has_treatment}return!1},previousFRTreatmentDescription(t,e,a=!1){var i=this,r=i.patient_risk_factors;if(r.rf.hasOwnProperty("created_at")&&r.risk_factors_diagnostics.length>1){var n=r.risk_factors_diagnostics.length,s=r.risk_factors_diagnostics[n-2].risk_factors.find(e=>e.name==t);return void 0!==s&&"Sí"==s.diagnostic&&"Sí"==s.has_treatment&&s.comment!=e&&""!=e?a?"Previo: "+s.comment:"Tratamiento cambiado de "+s.comment+" a "+e:""}n=r.risk_factors_diagnostics.length;return void 0!==r.risk_factors_diagnostics[n-1]?(s=r.risk_factors_diagnostics[n-1].risk_factors.find(e=>e.name==t),void 0!==s&&"Sí"==s.diagnostic&&"Sí"==s.has_treatment&&s.comment!=e&&""!=e?a?"Previo: "+s.comment:"Tratamiento cambiado de "+s.comment+" a "+e:""):""},getPercentDifference(t,e,a=!1){var i=this,r=i.patient_appointments;switch(e=void 0===e?{}:e,t){case"anthropometry":if(a){var n=i.comparison.anthropometry;if(n.current_patient.hasOwnProperty("patient_id")&&n.patient_to_compare.hasOwnProperty("patient_id")){var s=e.patient_to_compare?n.patient_to_compare:n.current_patient,o=e.patient_to_compare?n.current_patient:n.patient_to_compare,p=parseInt(s.abdominal_waist),d=parseInt(s.height),_=parseInt(s.weight),c=parseFloat(i.getBMI(_,d,s.weight_suffix,s.height_suffix).replace(" kg/m2","")),m=parseFloat(i.getCS(_,d,s.weight_suffix,s.height_suffix).replace(" m2","")),l=parseInt(o.abdominal_waist),u=parseInt(o.height),h=parseInt(o.weight),g=parseFloat(i.getBMI(h,u,o.weight_suffix,o.height_suffix).replace(" kg/m2","")),f=parseFloat(i.getCS(h,u,o.weight_suffix,o.height_suffix).replace(" m2","")),y={numeric:_-h,percent:(_-h)/h*100},v={numeric:d-u,percent:(d-u)/u*100},b={numeric:p-l,percent:(p-l)/l*100},x={numeric:c-g,percent:(c-g)/g*100},I={numeric:m-f,percent:(m-f)/f*100};return{weight:y,height:v,abdominal_waist:b,bmi:x,cs:I}}return{}}n=i.patient_anthropometry;var k={weight:0,height:0,abdominal_waist:0,bmi:0,cs:0};if(r.previous_appointment.hasOwnProperty("appointment_id")){var w=n.history.find(t=>t.appointment_id==r.previous_appointment.appointment_id);if(void 0!==w&&w.hasOwnProperty("appointment_id")){p=parseInt(n.editedItem.abdominal_waist),d=parseInt(n.editedItem.height),_=parseInt(n.editedItem.weight),c=parseFloat(i.getBMI(_,d,n.editedItem.weight_suffix,n.editedItem.height_suffix).replace(" kg/m2","")),m=parseFloat(i.getCS(_,d,n.editedItem.weight_suffix,n.editedItem.height_suffix).replace(" m2","")),l=parseInt(w.abdominal_waist),u=parseInt(w.height),h=parseInt(w.weight),g=parseFloat(i.getBMI(h,u,w.weight_suffix,w.height_suffix).replace(" kg/m2","")),f=parseFloat(i.getCS(h,u,w.weight_suffix,w.height_suffix).replace(" m2","")),y={numeric:_-h,percent:(_-h)/h*100},v={numeric:d-u,percent:(d-u)/u*100},b={numeric:p-l,percent:(p-l)/l*100},x={numeric:c-g,percent:(c-g)/g*100},I={numeric:m-f,percent:(m-f)/f*100};return{weight:y,height:v,abdominal_waist:b,bmi:x,cs:I}}return k}return k;case"vital-signals":if(a){n=i.comparison.vital_signs;if(n.current_patient.hasOwnProperty("patient_id")&&n.patient_to_compare.hasOwnProperty("patient_id")){s=e.patient_to_compare?n.patient_to_compare:n.current_patient,o=e.patient_to_compare?n.current_patient:n.patient_to_compare;var A=parseInt(s.sat),D=parseInt(s.sat),E=parseInt(o.lying_down.temperature),O=parseInt(o.lying_down.sat),F={numeric:A-E,percent:(A-E)/E*100},M={numeric:D-O,percent:(D-O)/O*100};if(takes={},e.hasOwnProperty("index")){var P=s.takes[e.index],N=o.takes[e.index],q=parseInt(P.breathing_rate),Y=parseInt(P.frc),z=parseInt(N.breathing_rate),S=parseInt(N.frc),C={};if(e.hasOwnProperty("arm")){var T=parseInt(P[e.arm]),$=parseInt(N[e.arm]);C={numeric:T-$,percent:(T-$)/$*100}}var R={numeric:q-z,percent:(q-z)/z*100},j={numeric:Y-S,percent:(Y-S)/S*100};takes={br:R,frc:j,arm:C}}return{temperature:F,sat:M,take:takes}}return{}}n=i.patient_vital_signs;if(r.previous_appointment.hasOwnProperty("appointment_id")){var L=n.records.find(t=>t.appointment_id==r.previous_appointment.appointment_id);if(null==L&&(L=n.records[n.records.length-2]),L.hasOwnProperty("appointment_id")){A=parseInt(n.sat),D=parseInt(n.sat),E=parseInt(L.lying_down.temperature),O=parseInt(L.lying_down.sat),F={numeric:A-E,percent:(A-E)/E*100},M={numeric:D-O,percent:(D-O)/O*100};if(takes={},e.hasOwnProperty("index")){P=n.takes[e.index],N=L.takes[e.index],q=parseInt(P.breathing_rate),Y=parseInt(P.frc),z=parseInt(N.breathing_rate),S=parseInt(N.frc),C={};if(e.hasOwnProperty("arm")){T=parseInt(P[e.arm]),$=parseInt(N[e.arm]);C={numeric:T-$,percent:(T-$)/$*100}}R={numeric:q-z,percent:(q-z)/z*100},j={numeric:Y-S,percent:(Y-S)/S*100};takes={br:R,frc:j,arm:C}}return{temperature:F,sat:M,take:takes}}return{}}break;case"physical-exam":if(a){n=i.comparison.physical_exams;if(n.current_patient.hasOwnProperty("patient_id")&&n.patient_to_compare.hasOwnProperty("patient_id")){s=e.patient_to_compare?n.patient_to_compare:n.current_patient,o=e.patient_to_compare?n.current_patient:n.patient_to_compare;var H=parseInt(s.content.pvy.swivel_stop),B=parseInt(s.content.edema.range),G=parseInt(o.content.pvy.swivel_stop),J=parseInt(o.content.edema.range),V={},Q={mid:{},mii:{},symmetrical_range:{}};if(e.hasOwnProperty("soplo")){var U=e.soplo,K=o.content.auscultation.soplo.items[e.i];if(void 0!==K){var W=parseInt(U.intensity_foco),X=parseInt(K.intensity_foco),Z=W-X,tt={numeric:Z,percent:Z/(-1==Math.sign(Z)?W:X)*100};V=tt}else V={numeric:0,percent:0}}if(e.hasOwnProperty("pp")){var et=parseInt(s.content.peripheral_pulses.mii),at=parseInt(s.content.peripheral_pulses.mid),it=parseInt(s.content.peripheral_pulses.symmetrical_range),rt=parseInt(o.content.peripheral_pulses.mii),nt=parseInt(o.content.peripheral_pulses.mid),st=parseInt(o.content.peripheral_pulses.symmetrical_range),ot=et-rt,pt=at-nt,dt=it-st,_t={numeric:ot,percent:ot/(-1==Math.sign(ot)?et:rt)*100},ct={numeric:pt,percent:pt/(-1==Math.sign(pt)?at:nt)*100},mt={numeric:dt,percent:dt/(-1==Math.sign(dt)?it:st)*100};Q={mid:ct,mii:_t,symmetrical_range:mt}}var lt=H-G,ut=B-J,ht={numeric:lt,percent:lt/(-1==Math.sign(lt)?H:G)*100},gt={numeric:ut,percent:ut/(-1==Math.sign(ut)?B:J)*100};return{pvy:{swivel_stop:ht},auscultation:{soplo:V},pp:Q,edema:gt}}return{}}n=i.patient_physical_exam;if(r.previous_appointment.hasOwnProperty("appointment_id")){var ft=n.items[n.items.length-2];if(ft.hasOwnProperty("appointment_id")){H=parseInt(n.content.pvy.swivel_stop),B=parseInt(n.content.edema.range),G=parseInt(ft.content.pvy.swivel_stop),J=parseInt(ft.content.edema.range),V={},Q={mid:{},mii:{},symmetrical_range:{}};if(e.hasOwnProperty("soplo")){W=parseInt(e.soplo.intensity_foco),X=parseInt(ft.content.auscultation.soplo.items[e.i].intensity_foco),tt={numeric:W-X,percent:(W-X)/X*100};V=tt}if(e.hasOwnProperty("pp")){et=parseInt(n.content.peripheral_pulses.mii),at=parseInt(n.content.peripheral_pulses.mid),it=parseInt(n.content.peripheral_pulses.symmetrical_range),rt=parseInt(ft.content.peripheral_pulses.mii),nt=parseInt(ft.content.peripheral_pulses.mid),st=parseInt(ft.content.peripheral_pulses.symmetrical_range),_t={numeric:et-rt,percent:(et-rt)/rt*100},ct={numeric:at-nt,percent:(at-nt)/nt*100},mt={numeric:it-st,percent:(it-st)/st*100};Q={mid:ct,mii:_t,symmetrical_range:mt}}ht={numeric:H-G,percent:(H-G)/G*100},gt={numeric:B-J,percent:(B-J)/J*100};return{pvy:{swivel_stop:ht},auscultation:{soplo:V},pp:Q,edema:gt}}return{}}return{};case"electro-cardiogram":if(a){n=i.comparison.electro_cardiogram;if(n.current_patient.hasOwnProperty("patient_id")){s=e.patient_to_compare?n.patient_to_compare:n.current_patient,o=e.patient_to_compare?n.current_patient:n.patient_to_compare;var yt=parseInt(s.content.frecuency),vt=parseInt(s.content.pr),bt=parseInt(s.content.axes.qtc),xt=parseInt(s.content.axes.p),It=parseInt(s.content.axes.qrs),kt=parseInt(s.content.axes.t),wt=parseInt(o.content.frecuency),At=parseInt(o.content.pr),Dt=parseInt(o.content.axes.qtc),Et=parseInt(o.content.axes.p),Ot=parseInt(o.content.axes.qrs),Ft=parseInt(o.content.axes.t),Mt={qtba:{},qtcal:{},qtfra:{},qtfri:{},qtrau:{},rr:{}};if(e.hasOwnProperty("qtc_calc")){var Pt=parseInt(s.content.qtbaz),Nt=parseInt(s.content.qtcal),qt=parseInt(s.content.qtfra),Yt=parseInt(s.content.qtfri),zt=parseInt(s.content.qtrau),St=parseFloat(s.content.rr),Ct=parseInt(o.content.qtbaz),Tt=parseInt(o.content.qtcal),$t=parseInt(o.content.qtfra),Rt=parseInt(o.content.qtfri),jt=parseInt(o.content.qtrau),Lt=parseFloat(o.content.rr);qtbaz_numeric_difference=Pt-Ct,qtcal_numeric_difference=Nt-Tt,qtfra_numeric_difference=qt-$t,qtfri_numeric_difference=Yt-Rt,qtrau_numeric_difference=zt-jt,rr_numeric_difference=St-Lt;var Ht={numeric:qtbaz_numeric_difference,percent:qtbaz_numeric_difference/(-1==Math.sign(qtbaz_numeric_difference)?Pt:Ct)*100},Bt={numeric:qtbaz_numeric_difference,percent:qtbaz_numeric_difference/(-1==Math.sign(qtbaz_numeric_difference)?Nt:Tt)*100},Gt={numeric:qtfra_numeric_difference,percent:qtfra_numeric_difference/(-1==Math.sign(qtbaz_numeric_difference)?qt:$t)*100},Jt={numeric:qtfri_numeric_difference,percent:qtfri_numeric_difference/(-1==Math.sign(qtfri_numeric_difference)?Yt:Rt)*100},Vt={numeric:qtrau_numeric_difference,percent:qtrau_numeric_difference/(-1==Math.sign(qtrau_numeric_difference)?zt:jt)*100},Qt={numeric:rr_numeric_difference,percent:rr_numeric_difference/(-1==Math.sign(rr_numeric_difference)?St:Lt)*100};Mt={qtcal:Bt,qtbaz:Ht,qtfra:Gt,qtfri:Jt,qtrau:Vt,rr:Qt}}frecuency_numeric_difference=yt-wt,pr_numeric_difference=vt-At,qtc_numeric_difference=bt-Dt,axes_p_numeric_difference=xt-Et,axes_qrs_numeric_difference=It-Ot,axes_t_numeric_difference=kt-Ft;var Ut={numeric:frecuency_numeric_difference,percent:frecuency_numeric_difference/(-1==Math.sign(frecuency_numeric_difference)?yt:wt)*100},Kt={numeric:pr_numeric_difference,percent:pr_numeric_difference/(-1==Math.sign(pr_numeric_difference)?vt:At)*100},Wt={numeric:qtc_numeric_difference,percent:qtc_numeric_difference/(-1==Math.sign(pr_numeric_difference)?vt:At)*100},Xt={numeric:axes_p_numeric_difference,percent:axes_p_numeric_difference/(-1==Math.sign(axes_p_numeric_difference)?xt:Et)*100},Zt={numeric:axes_qrs_numeric_difference,percent:axes_qrs_numeric_difference/(-1==Math.sign(pr_numeric_difference)?It:Ot)*100},te={numeric:axes_t_numeric_difference,percent:axes_t_numeric_difference/(-1==Math.sign(axes_t_numeric_difference)?kt:Ft)*100};return{frecuency:Ut,qtc_r:Mt,pr:Kt,qtc:Wt,axes:{p:Xt,qrs:Zt,t:te}}}return{}}n=i.patient_electro_cardiogram;if(r.previous_appointment.hasOwnProperty("appointment_id")){ft=n.items[n.items.length-2];if(ft.hasOwnProperty("appointment_id")){yt=parseInt(n.content.frecuency),vt=parseInt(n.content.pr),bt=parseInt(n.content.axes.qtc),xt=parseInt(n.content.axes.p),It=parseInt(n.content.axes.qrs),kt=parseInt(n.content.axes.t),wt=parseInt(ft.content.frecuency),At=parseInt(ft.content.pr),Dt=parseInt(ft.content.axes.qtc),Et=parseInt(ft.content.axes.p),Ot=parseInt(ft.content.axes.qrs),Ft=parseInt(ft.content.axes.t),Mt={qtba:{},qtcal:{},qtfra:{},qtfri:{},qtrau:{},rr:{}};if(e.hasOwnProperty("qtc_calc")){Pt=parseInt(n.content.qtbaz),Nt=parseInt(n.content.qtcal),qt=parseInt(n.content.qtfra),Yt=parseInt(n.content.qtfri),zt=parseInt(n.content.qtrau),St=parseFloat(n.content.rr),Ct=parseInt(ft.content.qtbaz),Tt=parseInt(ft.content.qtcal),$t=parseInt(ft.content.qtfra),Rt=parseInt(ft.content.qtfri),jt=parseInt(ft.content.qtrau),Lt=parseFloat(ft.content.rr),Ht={numeric:Pt-Ct,percent:(Pt-Ct)/Ct*100},Bt={numeric:Nt-Tt,percent:(Nt-Tt)/Tt*100},Gt={numeric:qt-$t,percent:(qt-$t)/$t*100},Jt={numeric:Yt-Rt,percent:(Yt-Rt)/Rt*100},Vt={numeric:zt-jt,percent:(zt-jt)/jt*100},Qt={numeric:St-Lt,percent:(St-Lt)/Lt*100};Mt={qtcal:Bt,qtbaz:Ht,qtfra:Gt,qtfri:Jt,qtrau:Vt,rr:Qt}}Ut={numeric:yt-wt,percent:(yt-wt)/wt*100},Kt={numeric:vt-At,percent:(vt-At)/At*100},Wt={numeric:bt-Dt,percent:(bt-Dt)/Dt*100},Xt={numeric:xt-Et,percent:(xt-Et)/Et*100},Zt={numeric:It-Ot,percent:(It-Ot)/Ot*100},te={numeric:kt-Ft,percent:(kt-Ft)/Ft*100};return{frecuency:Ut,qtc_r:Mt,pr:Kt,qtc:Wt,axes:{p:Xt,qrs:Zt,t:te}}}return{}}return{};case"history":var ee={numeric:0,percent:0};if(a){n=i.comparison.history;var ae={dosis:ee,daily_dosis:ee};if(void 0!==n.current_patient||void 0!==n.patient_to_compare){s=e.patient_to_compare?n.patient_to_compare:n.current_patient,o=e.patient_to_compare?n.current_patient:n.patient_to_compare;if(void 0!==s&&void 0!==o){if(e.hasOwnProperty("dosis")){var ie=""!=s.history_content.diseases[e.treatment.disease][e.treatment.treatment].dosis?parseInt(s.history_content.diseases[e.treatment.disease][e.treatment.treatment].dosis):0,re=""!=o.history_content.diseases[e.treatment.disease][e.treatment.treatment].dosis?parseFloat(o.history_content.diseases[e.treatment.disease][e.treatment.treatment].dosis):0,ne=ie-re,se={numeric:ne,percent:ne/(-1==Math.sign(ne)?ie:re)*100};ae.dosis=se}else if(e.hasOwnProperty("daily_dosis")){var oe=parseInt(s.history_content.diseases[e.treatment.disease][e.treatment.treatment].daily_dosis),pe=parseFloat(o.history_content.diseases[e.treatment.disease][e.treatment.treatment].daily_dosis),de=oe-pe,_e={numeric:de,percent:de/(-1==Math.sign(de)?oe:pe)*100};ae.daily_dosis=_e}return ae}return{dosis:ee,daily_dosis:ee}}return{dosis:ee,daily_dosis:ee}}if(r.previous_appointment.hasOwnProperty("appointment_id")){var ce=n.items.find(t=>t.appointment_id==r.previous_appointment.appointment_id);ae={dosis:ee,daily_dosis:ee};if(ce.hasOwnProperty("appointment_id")){if(e.hasOwnProperty("dosis")){ie=""!=n.form.history_content.diseases[e.treatment.disease][e.treatment.treatment].dosis?parseInt(n.form.history_content.diseases[e.treatment.disease][e.treatment.treatment].dosis):0,re=""!=ce.history_content.diseases[e.treatment.disease][e.treatment.treatment].dosis?parseFloat(ce.history_content.diseases[e.treatment.disease][e.treatment.treatment].dosis):0,se={numeric:ie-re,percent:(ie-re)/re*100};ae.dosis=se}else if(e.hasOwnProperty("daily_dosis")){oe=parseInt(n.form.history_content.diseases[e.treatment.disease][e.treatment.treatment].daily_dosis),pe=parseFloat(ce.history_content.diseases[e.treatment.disease][e.treatment.treatment].daily_dosis),_e={numeric:oe-pe,percent:(oe-pe)/pe*100};ae.daily_dosis=_e}return ae}return{dosis:ee,daily_dosis:ee}}break;case"laboratory-exam":if(a){n=i.comparison.laboratory_exams,ee={numeric:0,percent:0};if(null!=n.current_patient[0]&&n.current_patient[0].hasOwnProperty("patient_id")&&null!=n.patient_to_compare[0]&&n.patient_to_compare[0].hasOwnProperty("patient_id")){s=e.patient_to_compare?n.patient_to_compare[0]:n.current_patient[0],o=e.patient_to_compare?n.current_patient[0]:n.patient_to_compare[0],ae={exam:ee};var me=parseInt(s.results),le=parseFloat(o.results),ue=me-le,he={numeric:ue,percent:ue/(-1==Math.sign(ue)?me:le)*100};return ae.exam=he,ae}return{exam:ee}}n=i.patient_laboratory_exams,ee={numeric:0,percent:0};if(r.previous_appointment.hasOwnProperty("appointment_id")){var ge=n.exam_results.indexOf(e.item),fe=n.exam_results[ge],ye=n.exam_results[ge-1];ae={exam:ee};if(void 0!==ye&&ye.hasOwnProperty("appointment_id")){me=parseInt(fe.results),le=parseFloat(ye.results),he={numeric:me-le,percent:(me-le)/le*100};return ae.exam=he,ae}return{exam:ee}}return{exam:ee};case"risk-factor-calc-list":ee={numeric:0,percent:0};if(a){n=i.comparison.diagnostics.risk_factors,ae={dosis:ee,daily_dosis:ee};if(n.current_patient.length>0||n.patient_to_compare.length>0){s=e.patient_to_compare?n.patient_to_compare:n.current_patient,o=e.patient_to_compare?n.current_patient:n.patient_to_compare;if(void 0!==s&&void 0!==o){var ve=e.item,be=o.find(t=>t.name==ve.name);ae={calc:ee};if(void 0!==be&&be.hasOwnProperty("appointment_id")){me=parseFloat(ve.results),le=parseFloat(be.results);var xe=me-le,Ie={numeric:xe,percent:xe/(-1==Math.sign(xe)?me:le)*100};return ae.calc=Ie,ae}return{calc:ee}}return{dosis:ee,daily_dosis:ee}}return{dosis:ee,daily_dosis:ee}}n=i.patient_risk_factors;if(r.previous_appointment.hasOwnProperty("appointment_id")){ve=e.item,be=n.risk_factors_list.previous_list.find(t=>t.name==ve.name),ae={calc:ee};if(void 0!==be&&be.hasOwnProperty("appointment_id")){me=parseFloat(ve.results),le=parseFloat(be.results),Ie={numeric:me-le,percent:(me-le)/le*100};return ae.calc=Ie,ae}return{calc:ee}}break;case"risk-factor-calc":n=i.patient_risk_factors,ee={numeric:0,percent:0};if(r.previous_appointment.hasOwnProperty("appointment_id")){ve=n.selectedForm,be=n.risk_factors_calc_list.find(t=>t.appointment_id==r.previous_appointment.appointment_id),ae={calc:ee};if(void 0!==be&&be.hasOwnProperty("appointment_id")){me=parseFloat(ve.obj.results),le=parseFloat(be.results),Ie={numeric:me-le,percent:(me-le)/le*100};return ae.calc=Ie,ae}return{calc:ee}}return{calc:ee}}},returnNumberSign(t){var e="";return 1==Math.sign(t)&&0!==t&&t!==1/0&&NaN!==t?e="+":-1==Math.sign(t)&&0!==t&&t!==1/0&&NaN!==t?e="":(e="",t=0),e+t},filterFollowUpsAppointments(t,e=!1){var a=this,i=a.patient_appointments;a.FollowUpAppointmentsDialog=!1;var r=i.appointments.indexOf(t);if(i.previous_appointment=r>0?i.appointments[r-1]:{},a.view_dialog)switch(a.view_tab){case"tab-view-3":a.initializeHistory();break;case"tab-view-4":a.initializeAnthropometry();break;case"tab-view-5":a.initializeVitalSigns();break;case"tab-view-6":a.initializePhysicalExams();break;case"tab-view-7":a.initializeElectroCardiograms();break;case"tab-view-8":a.initializeEchocardiograms();break;case"tab-view-9":a.initializeExams(),a.initializeExamsFiles();break;case"tab-view-10":a.initializeFactorsRisk(!0);break;case"tab-view-11":a.initializePlans()}else switch(a.tab){case"tab-3":a.initializeHistory();break;case"tab-4":a.initializeAnthropometry();break;case"tab-5":a.initializeVitalSigns();break;case"tab-6":a.initializePhysicalExams();break;case"tab-7":a.initializeElectroCardiograms();break;case"tab-8":a.initializeEchocardiograms();break;case"tab-9":a.initializeExams(),a.initializeExamsFiles();break;case"tab-10":a.initializeFactorsRisk(a.view_dialog);break;case"tab-11":a.initializePlans()}},searchTemplate(){return this.filtered_templates=this.templates.filter(t=>t.material_name.toLowerCase().includes(this.template_search.toLowerCase()))},getTelephoneInput(t,e){this.editedItem.telephone=e.number.international}}});