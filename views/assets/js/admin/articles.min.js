let vm=new Vue({vuetify:vuetify,el:"#siac-suite-container",data:{barAlert:!1,barTimeout:1e3,barMessage:"",barType:"",loading:!1,valid:!1,dialog:!1,dialogDelete:!1,rules:[e=>!e||e.size<3e6||"La imágen no debe tener un tamaño mayor a 3 MB!"],headers:[{text:"Título",align:"start",value:"title"},{text:"Descripción",value:"description"},{text:"Fecha de publicación",value:"published_at"},{text:"Acciones",value:"actions",align:"center",sortable:!1}],articles:[],editedIndex:-1,editedItem:{},defaultItem:{content:"",published_at:current_date}},computed:{formTitle:function(){return-1===this.editedIndex?"Crear artículo para SIAC Comunidad":"Editar artículo"}},watch:{dialog:function(e){e||this.close()},dialogDelete:function(e){e||this.closeDelete()},editedItem:{deep:!0,handler:()=>{-1==this.editedIndex&&vm.$refs.form.validate()}}},created:function(){this.initialize()},mounted:function(){},methods:{initialize:function(){var e=api_url+"articles/get";this.$http.get(e).then(e=>{this.articles=e.body},e=>{})},editItem:function(e){this.editedIndex=this.articles.indexOf(e),this.editedItem=Object.assign({},e),this.editedItem.image=null,this.dialog=!0},deleteItem:function(e){this.editedIndex=this.articles.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm:function(){var e=this.editedItem.article_id,t=api_url+"articles/delete";this.$http.post(t,{article_id:e}).then(e=>{"success"==e.body.status&&this.articles.splice(this.editedIndex,1),this.closeDelete(),activateAlert(e.body.message,e.body.status)},e=>{this.closeDelete()})},closeDelete:function(){this.dialogDelete=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},close:function(){this.dialog=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},formatDate:function(e){return new Date(e).toLocaleString("es-ES",date_options)},save:function(){var e,t=this,i=t.editedIndex,d=t.editedItem,a=new FormData;a.append("image",d.image),a.append("title",d.title),a.append("description",d.description),a.append("content",d.content),-1<this.editedIndex?(a.append("article_id",d.article_id),e=api_url+"articles/update",this.$http.post(e,a,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(e=>{"success"==e.body.status&&(d.slug=e.body.data.slug),Object.assign(t.articles[i],d),activateAlert(e.body.message,e.body.status)},e=>{})):(e=api_url+"articles/create",this.$http.post(e,a).then(e=>{"success"==e.body.status&&(t.editedItem.title=d.title),t.editedItem.content=d.content,t.editedItem.description=d.description,t.editedItem.image=null,t.editedItem.published_at=current_date,t.editedItem.article_id=e.body.data.article_id,t.editedItem.slug=e.body.data.slug,this.articles.push(t.editedItem),activateAlert(e.body.message,e.body.status)},e=>{})),this.close()}}});